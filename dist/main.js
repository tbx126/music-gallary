parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"LVkZ":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"MTTc":[function(require,module,exports) {
function e(e){return o(e)||t(e)||r(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,n){if(e){if("string"==typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,n):void 0}}function t(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return a(e)}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(n){function r(e){var n,o,a,i=null;function s(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(s.enabled){var a=s,i=Number(new Date),u=i-(n||i);a.diff=u,a.prev=n,a.curr=i,n=i,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return"%";l++;var o=r.formatters[n];if("function"==typeof o){var i=t[l];e=o.call(a,i),t.splice(l,1),l--}return e}),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return s.namespace=e,s.useColors=r.useColors(),s.color=r.selectColor(e),s.extend=t,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==i?i:(o!==r.namespaces&&(o=r.namespaces,a=r.enabled(e)),a)},set:function(e){i=e}}),"function"==typeof r.init&&r.init(s),s}function t(e,n){var t=r(this.namespace+(void 0===n?":":n)+e);return t.log=this.log,t}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){var n=[].concat(e(r.names.map(o)),e(r.skips.map(o).map(function(e){return"-"+e}))).join(",");return r.enable(""),n},r.enable=function(e){var n;r.save(e),r.namespaces=e,r.names=[],r.skips=[];var t=("string"==typeof e?e:"").split(/[\s,]+/),o=t.length;for(n=0;n<o;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;var n,t;for(n=0,t=r.skips.length;n<t;n++)if(r.skips[n].test(e))return!1;for(n=0,t=r.names.length;n<t;n++)if(r.names[n].test(e))return!0;return!1},r.humanize=require("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(function(e){r[e]=n[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){for(var n=0,t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]},r.enable(r.load()),r}module.exports=i;
},{"ms":"LVkZ"}],"lwAM":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"jD9Y":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),this.useColors){var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}}function t(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function r(){var o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function n(){try{return localStorage}catch(e){}}exports.formatArgs=C,exports.save=t,exports.load=r,exports.useColors=o,exports.storage=n(),exports.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.log=console.debug||console.log||function(){},module.exports=require("./common")(exports);var{formatters:s}=module.exports;s.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"MTTc","process":"lwAM"}],"PSlN":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function c(t){var e=s();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!y(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function p(t,e,r){return(p=s()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&b(o,r.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EndOfStreamError=exports.defaultMessages=void 0,exports.defaultMessages="End-Of-Stream";var v=function(t){i(n,l(Error));var e=c(n);function n(){return u(this,n),e.call(this,exports.defaultMessages)}return r(n)}();exports.EndOfStreamError=v;
},{}],"VEd6":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var r=o(t,"string");return"symbol"===e(r)?r:String(r)}function o(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Deferred=void 0;var u=r(function e(){var t=this;i(this,e),this.resolve=function(){return null},this.reject=function(){return null},this.promise=new Promise(function(e,r){t.reject=r,t.resolve=e})});exports.Deferred=u;
},{}],"owYW":[function(require,module,exports) {
var define;
var e;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){"use strict";r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(F){s=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),u=new j(n||[]);return i(a,"_invoke",{value:k(e,r,u)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(F){return{type:"throw",arg:F}}}e.wrap=h;var p={};function d(){}function v(){}function y(){}var m={};s(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(_([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=y.prototype=d.prototype=Object.create(m);function x(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function E(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var f=l(e[i],e,a);if("throw"!==f.type){var s=f.arg,h=s.value;return h&&"object"==t(h)&&o.call(h,"__await")?r.resolve(h.__await).then(function(e){n("next",e,u,c)},function(e){n("throw",e,u,c)}):r.resolve(h).then(function(e){s.value=e,u(s)},function(e){return n("throw",e,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function k(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,f,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,f,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(E.prototype),s(E.prototype,c,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(w),s(w,f,"Generator"),s(w,u,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function n(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(f){return void r(f)}u.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(o,i){var a=e.apply(t,r);function u(e){n(a,o,i,u,c,"next",e)}function c(e){n(a,o,i,u,c,"throw",e)}u(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var r=f(e,"string");return"symbol"===t(r)?r:String(r)}function f(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=exports.EndOfStreamError=void 0;var s=require("./EndOfFileStream"),h=require("./Deferred"),l=require("./EndOfFileStream");Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return l.EndOfStreamError}});var p=1048576,d=function(){function e(t){var r=this;if(i(this,e),this.s=t,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!t.read||!t.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",function(){return r.reject(new s.EndOfStreamError)}),this.s.once("error",function(e){return r.reject(e)}),this.s.once("close",function(){return r.reject(new Error("Stream closed"))})}return u(e,[{key:"peek",value:function(){var e=o(r().mark(function e(t,n,o){var i;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.read(t,n,o);case 2:return i=e.sent,this.peekQueue.push(t.subarray(n,n+i)),e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=o(r().mark(function e(t,n,o){var i,a,u,c,f,h;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o){e.next=2;break}return e.abrupt("return",0);case 2:if(0!==this.peekQueue.length||!this.endOfStream){e.next=4;break}throw new s.EndOfStreamError;case 4:i=o,a=0;case 6:if(!(this.peekQueue.length>0&&i>0)){e.next=17;break}if(u=this.peekQueue.pop()){e.next=10;break}throw new Error("peekData should be defined");case 10:c=Math.min(u.length,i),t.set(u.subarray(0,c),n+a),a+=c,i-=c,c<u.length&&this.peekQueue.push(u.subarray(c)),e.next=6;break;case 17:if(!(i>0)||this.endOfStream){e.next=28;break}return f=Math.min(i,p),e.next=21,this.readFromStream(t,n+a,f);case 21:if(h=e.sent,a+=h,!(h<f)){e.next=25;break}return e.abrupt("break",28);case 25:i-=h,e.next=17;break;case 28:return e.abrupt("return",a);case 29:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"readFromStream",value:function(){var e=o(r().mark(function e(t,n,o){var i,a,u=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.s.read(o))){e.next=6;break}return t.set(i,n),e.abrupt("return",i.length);case 6:return a={buffer:t,offset:n,length:o,deferred:new h.Deferred},this.deferred=a.deferred,this.s.once("readable",function(){u.readDeferred(a)}),e.abrupt("return",a.deferred.promise);case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"readDeferred",value:function(e){var t=this,r=this.s.read(e.length);r?(e.buffer.set(r,e.offset),e.deferred.resolve(r.length),this.deferred=null):this.s.once("readable",function(){t.readDeferred(e)})}},{key:"reject",value:function(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}}]),e}();exports.StreamReader=d;
},{"./EndOfFileStream":"PSlN","./Deferred":"VEd6"}],"cbCW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=exports.EndOfStreamError=void 0;var e=require("./EndOfFileStream");Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return e.EndOfStreamError}});var r=require("./StreamReader");Object.defineProperty(exports,"StreamReader",{enumerable:!0,get:function(){return r.StreamReader}});
},{"./EndOfFileStream":"PSlN","./StreamReader":"owYW"}],"LFSx":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"zZ10":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"ZyaC":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"qcot":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"LFSx","ieee754":"zZ10","isarray":"ZyaC","buffer":"qcot"}],"PoRW":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(B){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),u=new j(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(B){return{type:"throw",arg:B}}}t.wrap=l;var p={};function v(){}function y(){}function d(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(_([])));w&&w!==e&&o.call(w,u)&&(m=w);var b=d.prototype=v.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=L(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=f(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(k.prototype),f(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),f(b,s,"Generator"),f(b,u,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function u(t){o(a,n,i,u,c,"next",t)}function c(t){o(a,n,i,u,c,"throw",t)}u(void 0)})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractTokenizer=void 0;var l=require("peek-readable"),h=function(){function t(e){a(this,t),this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}return c(t,[{key:"readToken",value:function(){var t=i(n().mark(function t(r){var o,i,a=arguments;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:this.position,i=e.alloc(r.len),t.next=4,this.readBuffer(i,{position:o});case 4:if(!(t.sent<r.len)){t.next=7;break}throw new l.EndOfStreamError;case 7:return t.abrupt("return",r.get(i,0));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"peekToken",value:function(){var t=i(n().mark(function t(r){var o,i,a=arguments;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:this.position,i=e.alloc(r.len),t.next=4,this.peekBuffer(i,{position:o});case 4:if(!(t.sent<r.len)){t.next=7;break}throw new l.EndOfStreamError;case 7:return t.abrupt("return",r.get(i,0));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readNumber",value:function(){var t=i(n().mark(function t(e){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readBuffer(this.numBuffer,{length:e.len});case 2:if(!(t.sent<e.len)){t.next=5;break}throw new l.EndOfStreamError;case 5:return t.abrupt("return",e.get(this.numBuffer,0));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"peekNumber",value:function(){var t=i(n().mark(function t(e){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.peekBuffer(this.numBuffer,{length:e.len});case 2:if(!(t.sent<e.len)){t.next=5;break}throw new l.EndOfStreamError;case 5:return t.abrupt("return",e.get(this.numBuffer,0));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"ignore",value:function(){var t=i(n().mark(function t(e){var r;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.fileInfo.size){t.next=5;break}if(r=this.fileInfo.size-this.position,!(e>r)){t.next=5;break}return this.position+=r,t.abrupt("return",r);case 5:return this.position+=e,t.abrupt("return",e);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=i(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"normalizeOptions",value:function(t,e){if(e&&void 0!==e.position&&e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return e?{mayBeLess:!0===e.mayBeLess,offset:e.offset?e.offset:0,length:e.length?e.length:t.length-(e.offset?e.offset:0),position:e.position?e.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}}]),t}();exports.AbstractTokenizer=h;
},{"peek-readable":"cbCW","buffer":"qcot"}],"h40E":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){"use strict";r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(T){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new _(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(T){return{type:"throw",arg:T}}}t.wrap=l;var p={};function y(){}function v(){}function d(){}var m={};s(m,u,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(S([])));g&&g!==n&&o.call(g,u)&&(m=g);var w=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function k(t,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var f=h(t[i],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==e(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(k.prototype),s(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),s(w,f,"Generator"),s(w,u,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var r=f(t,"string");return"symbol"===e(r)?r:String(r)}function f(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadStreamTokenizer=void 0;var m=require("./AbstractTokenizer"),b=require("peek-readable"),g=256e3,w=function(t){s(n,m.AbstractTokenizer);var e=h(n);function n(t,r){var o;return i(this,n),(o=e.call(this,r)).streamReader=new b.StreamReader(t),o}return u(n,[{key:"getFileInfo",value:function(){var t=o(r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fileInfo);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readBuffer",value:function(){var t=o(r().mark(function t(e,n){var o,i,a;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.normalizeOptions(e,n),!((i=o.position-this.position)>0)){t.next=8;break}return t.next=5,this.ignore(i);case 5:return t.abrupt("return",this.readBuffer(e,n));case 8:if(!(i<0)){t.next=10;break}throw new Error("`options.position` must be equal or greater than `tokenizer.position`");case 10:if(0!==o.length){t.next=12;break}return t.abrupt("return",0);case 12:return t.next=14,this.streamReader.read(e,o.offset,o.length);case 14:if(a=t.sent,this.position+=a,n&&n.mayBeLess||!(a<o.length)){t.next=18;break}throw new b.EndOfStreamError;case 18:return t.abrupt("return",a);case 19:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"peekBuffer",value:function(){var t=o(r().mark(function t(e,n){var o,i,a,u;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.normalizeOptions(e,n),i=0,!o.position){t.next=15;break}if(!((a=o.position-this.position)>0)){t.next=13;break}return u=new Uint8Array(o.length+a),t.next=8,this.peekBuffer(u,{mayBeLess:o.mayBeLess});case 8:return i=t.sent,e.set(u.subarray(a),o.offset),t.abrupt("return",i-a);case 13:if(!(a<0)){t.next=15;break}throw new Error("Cannot peek from a negative offset in a stream");case 15:if(!(o.length>0)){t.next=29;break}return t.prev=16,t.next=19,this.streamReader.peek(e,o.offset,o.length);case 19:i=t.sent,t.next=27;break;case 22:if(t.prev=22,t.t0=t.catch(16),!(n&&n.mayBeLess&&t.t0 instanceof b.EndOfStreamError)){t.next=26;break}return t.abrupt("return",0);case 26:throw t.t0;case 27:if(o.mayBeLess||!(i<o.length)){t.next=29;break}throw new b.EndOfStreamError;case 29:return t.abrupt("return",i);case 30:case"end":return t.stop()}},t,this,[[16,22]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"ignore",value:function(){var t=o(r().mark(function t(e){var n,o,i,a,u;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=Math.min(g,e),o=new Uint8Array(n),i=0;case 3:if(!(i<e)){t.next=13;break}return a=e-i,t.next=7,this.readBuffer(o,{length:Math.min(n,a)});case 7:if(!((u=t.sent)<0)){t.next=10;break}return t.abrupt("return",u);case 10:i+=u,t.next=3;break;case 13:return t.abrupt("return",i);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),n}();exports.ReadStreamTokenizer=w;
},{"./AbstractTokenizer":"PoRW","peek-readable":"cbCW"}],"FUZC":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(T){s=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new _(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(T){return{type:"throw",arg:T}}}e.wrap=l;var p={};function y(){}function v(){}function d(){}var m={};s(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(P([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function O(r,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=h(r[i],r,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==t(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=L(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function L(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,L(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),s(w,f,"Generator"),s(w,u,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:P(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(r){var e=c(r,"string");return"symbol"===t(e)?e:String(e)}function c(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function f(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r)}function s(t,r){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function l(t){var r=y();return function(){var e,n=v(t);if(r){var o=v(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return h(this,e)}}function h(r,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferTokenizer=void 0;var d=require("peek-readable"),m=require("./AbstractTokenizer"),g=function(t){f(i,m.AbstractTokenizer);var e=l(i);function i(t,r){var n;return o(this,i),(n=e.call(this,r)).uint8Array=t,n.fileInfo.size=n.fileInfo.size?n.fileInfo.size:t.length,n}return a(i,[{key:"readBuffer",value:function(){var t=n(r().mark(function t(e,n){var o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.position){t.next=4;break}if(!(n.position<this.position)){t.next=3;break}throw new Error("`options.position` must be equal or greater than `tokenizer.position`");case 3:this.position=n.position;case 4:return t.next=6,this.peekBuffer(e,n);case 6:return o=t.sent,this.position+=o,t.abrupt("return",o);case 9:case"end":return t.stop()}},t,this)}));return function(r,e){return t.apply(this,arguments)}}()},{key:"peekBuffer",value:function(){var t=n(r().mark(function t(e,n){var o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-o.position,o.length),o.mayBeLess||!(i<o.length)){t.next=6;break}throw new d.EndOfStreamError;case 6:return e.set(this.uint8Array.subarray(o.position,o.position+i),o.offset),t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));return function(r,e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=n(r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}]),i}();exports.BufferTokenizer=g;
},{"peek-readable":"cbCW","./AbstractTokenizer":"PoRW"}],"tvmF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromBuffer=exports.fromStream=exports.EndOfStreamError=void 0;var e=require("./ReadStreamTokenizer"),r=require("./BufferTokenizer"),t=require("peek-readable");function o(r,t){return t=t||{},new e.ReadStreamTokenizer(r,t)}function n(e,t){return new r.BufferTokenizer(e,t)}Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}}),exports.fromStream=o,exports.fromBuffer=n;
},{"./ReadStreamTokenizer":"h40E","./BufferTokenizer":"FUZC","peek-readable":"cbCW"}],"rOYN":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var n=i(t,"string");return"symbol"===e(n)?n:String(n)}function i(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnsiStringType=exports.StringType=exports.BufferType=exports.Uint8ArrayType=exports.IgnoreType=exports.Float80_LE=exports.Float80_BE=exports.Float64_LE=exports.Float64_BE=exports.Float32_LE=exports.Float32_BE=exports.Float16_LE=exports.Float16_BE=exports.INT64_BE=exports.UINT64_BE=exports.INT64_LE=exports.UINT64_LE=exports.INT32_LE=exports.INT32_BE=exports.INT24_BE=exports.INT24_LE=exports.INT16_LE=exports.INT16_BE=exports.INT8=exports.UINT32_BE=exports.UINT32_LE=exports.UINT24_BE=exports.UINT24_LE=exports.UINT16_BE=exports.UINT16_LE=exports.UINT8=void 0;var s=require("ieee754");function f(t){return new DataView(t.buffer,t.byteOffset)}exports.UINT8={len:1,get:function(t,e){return f(t).getUint8(e)},put:function(t,e,n){return f(t).setUint8(e,n),e+1}},exports.UINT16_LE={len:2,get:function(t,e){return f(t).getUint16(e,!0)},put:function(t,e,n){return f(t).setUint16(e,n,!0),e+2}},exports.UINT16_BE={len:2,get:function(t,e){return f(t).getUint16(e)},put:function(t,e,n){return f(t).setUint16(e,n),e+2}},exports.UINT24_LE={len:3,get:function(t,e){var n=f(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put:function(t,e,n){var r=f(t);return r.setUint8(e,255&n),r.setUint16(e+1,n>>8,!0),e+3}},exports.UINT24_BE={len:3,get:function(t,e){var n=f(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put:function(t,e,n){var r=f(t);return r.setUint16(e,n>>8),r.setUint8(e+2,255&n),e+3}},exports.UINT32_LE={len:4,get:function(t,e){return f(t).getUint32(e,!0)},put:function(t,e,n){return f(t).setUint32(e,n,!0),e+4}},exports.UINT32_BE={len:4,get:function(t,e){return f(t).getUint32(e)},put:function(t,e,n){return f(t).setUint32(e,n),e+4}},exports.INT8={len:1,get:function(t,e){return f(t).getInt8(e)},put:function(t,e,n){return f(t).setInt8(e,n),e+1}},exports.INT16_BE={len:2,get:function(t,e){return f(t).getInt16(e)},put:function(t,e,n){return f(t).setInt16(e,n),e+2}},exports.INT16_LE={len:2,get:function(t,e){return f(t).getInt16(e,!0)},put:function(t,e,n){return f(t).setInt16(e,n,!0),e+2}},exports.INT24_LE={len:3,get:function(t,e){var n=exports.UINT24_LE.get(t,e);return n>8388607?n-16777216:n},put:function(t,e,n){var r=f(t);return r.setUint8(e,255&n),r.setUint16(e+1,n>>8,!0),e+3}},exports.INT24_BE={len:3,get:function(t,e){var n=exports.UINT24_BE.get(t,e);return n>8388607?n-16777216:n},put:function(t,e,n){var r=f(t);return r.setUint16(e,n>>8),r.setUint8(e+2,255&n),e+3}},exports.INT32_BE={len:4,get:function(t,e){return f(t).getInt32(e)},put:function(t,e,n){return f(t).setInt32(e,n),e+4}},exports.INT32_LE={len:4,get:function(t,e){return f(t).getInt32(e,!0)},put:function(t,e,n){return f(t).setInt32(e,n,!0),e+4}},exports.UINT64_LE={len:8,get:function(t,e){return f(t).getBigUint64(e,!0)},put:function(t,e,n){return f(t).setBigUint64(e,n,!0),e+8}},exports.INT64_LE={len:8,get:function(t,e){return f(t).getBigInt64(e,!0)},put:function(t,e,n){return f(t).setBigInt64(e,n,!0),e+8}},exports.UINT64_BE={len:8,get:function(t,e){return f(t).getBigUint64(e)},put:function(t,e,n){return f(t).setBigUint64(e,n),e+8}},exports.INT64_BE={len:8,get:function(t,e){return f(t).getBigInt64(e)},put:function(t,e,n){return f(t).setBigInt64(e,n),e+8}},exports.Float16_BE={len:2,get:function(t,e){return s.read(t,e,!1,10,this.len)},put:function(t,e,n){return s.write(t,n,e,!1,10,this.len),e+this.len}},exports.Float16_LE={len:2,get:function(t,e){return s.read(t,e,!0,10,this.len)},put:function(t,e,n){return s.write(t,n,e,!0,10,this.len),e+this.len}},exports.Float32_BE={len:4,get:function(t,e){return f(t).getFloat32(e)},put:function(t,e,n){return f(t).setFloat32(e,n),e+4}},exports.Float32_LE={len:4,get:function(t,e){return f(t).getFloat32(e,!0)},put:function(t,e,n){return f(t).setFloat32(e,n,!0),e+4}},exports.Float64_BE={len:8,get:function(t,e){return f(t).getFloat64(e)},put:function(t,e,n){return f(t).setFloat64(e,n),e+8}},exports.Float64_LE={len:8,get:function(t,e){return f(t).getFloat64(e,!0)},put:function(t,e,n){return f(t).setFloat64(e,n,!0),e+8}},exports.Float80_BE={len:10,get:function(t,e){return s.read(t,e,!1,63,this.len)},put:function(t,e,n){return s.write(t,n,e,!1,63,this.len),e+this.len}},exports.Float80_LE={len:10,get:function(t,e){return s.read(t,e,!0,63,this.len)},put:function(t,e,n){return s.write(t,n,e,!0,63,this.len),e+this.len}};var p=function(){function t(e){n(this,t),this.len=e}return o(t,[{key:"get",value:function(t,e){}}]),t}();exports.IgnoreType=p;var l=function(){function t(e){n(this,t),this.len=e}return o(t,[{key:"get",value:function(t,e){return t.subarray(e,e+this.len)}}]),t}();exports.Uint8ArrayType=l;var c=function(){function e(t){n(this,e),this.len=t}return o(e,[{key:"get",value:function(e,n){return t.from(e.subarray(n,n+this.len))}}]),e}();exports.BufferType=c;var a=function(){function e(t,r){n(this,e),this.len=t,this.encoding=r}return o(e,[{key:"get",value:function(e,n){return t.from(e).toString(this.encoding,n,n+this.len)}}]),e}();exports.StringType=a;var g=function(){function t(e){n(this,t),this.len=e}return o(t,[{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.decode(e,n,n+this.len)}}],[{key:"decode",value:function(e,n,r){for(var o="",u=n;u<r;++u)o+=t.codePointToString(t.singleByteDecoder(e[u]));return o}},{key:"inRange",value:function(t,e,n){return e<=t&&t<=n}},{key:"codePointToString",value:function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}},{key:"singleByteDecoder",value:function(e){if(t.inRange(e,0,127))return e;var n=t.windows1252[e-128];if(null===n)throw Error("invaliding encoding");return n}}]),t}();exports.AnsiStringType=g,g.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];
},{"ieee754":"zZ10","buffer":"qcot"}],"TDI3":[function(require,module,exports) {
"use strict";function r(r){return o(r)||e(r)||n(r)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,t){if(r){if("string"==typeof r)return a(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(r,t):void 0}}function e(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function o(r){if(Array.isArray(r))return a(r)}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}exports.stringToBytes=function(t){return r(t).map(function(r){return r.charCodeAt(0)})},exports.tarHeaderChecksumMatches=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(n))return!1;for(var e=256,o=t;o<t+148;o++)e+=r[o];for(var a=t+156;a<t+512;a++)e+=r[a];return n===e},exports.uint32SyncSafeToken={get:function(r,t){return 127&r[t+3]|r[t+2]<<7|r[t+1]<<14|r[t]<<21},len:4};
},{}],"NJ20":[function(require,module,exports) {
"use strict";module.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};
},{}],"mKqu":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var define,Buffer=require("buffer").Buffer;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},r=Object.prototype,t=r.hasOwnProperty,n=Object.defineProperty||function(e,r,t){e[r]=t.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function c(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{c({},"")}catch(z){c=function(e,r,t){return e[r]=t}}function s(e,r,t,a){var i=r&&r.prototype instanceof m?r:m,u=Object.create(i.prototype),o=new S(a||[]);return n(u,"_invoke",{value:v(e,t,o)}),u}function f(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(z){return{type:"throw",arg:z}}}e.wrap=s;var p={};function m(){}function x(){}function b(){}var l={};c(l,i,function(){return this});var d=Object.getPrototypeOf,h=d&&d(d(B([])));h&&h!==r&&t.call(h,i)&&(l=h);var k=b.prototype=m.prototype=Object.create(l);function g(e){["next","throw","return"].forEach(function(r){c(e,r,function(e){return this._invoke(r,e)})})}function y(e,r){var a;n(this,"_invoke",{value:function(n,i){function u(){return new r(function(a,u){!function n(a,i,u,o){var c=f(e[a],e,i);if("throw"!==c.type){var s=c.arg,p=s.value;return p&&"object"==_typeof(p)&&t.call(p,"__await")?r.resolve(p.__await).then(function(e){n("next",e,u,o)},function(e){n("throw",e,u,o)}):r.resolve(p).then(function(e){s.value=e,u(s)},function(e){return n("throw",e,u,o)})}o(c.arg)}(n,i,a,u)})}return a=a?a.then(u,u):u()}})}function v(e,r,t){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return j()}for(t.method=a,t.arg=i;;){var u=t.delegate;if(u){var o=w(u,t);if(o){if(o===p)continue;return o}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===n)throw n="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n="executing";var c=f(e,r,t);if("normal"===c.type){if(n=t.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(n="completed",t.method="throw",t.arg=c.arg)}}}function w(e,r){var t=r.method,n=e.iterator[t];if(void 0===n)return r.delegate=null,"throw"===t&&e.iterator.return&&(r.method="return",r.arg=void 0,w(e,r),"throw"===r.method)||"return"!==t&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+t+"' method")),p;var a=f(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function T(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function B(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(t.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return x.prototype=b,n(k,"constructor",{value:b,configurable:!0}),n(b,"constructor",{value:x,configurable:!0}),x.displayName=c(b,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===x||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},g(y.prototype),c(y.prototype,u,function(){return this}),e.AsyncIterator=y,e.async=function(r,t,n,a,i){void 0===i&&(i=Promise);var u=new y(s(r,t,n,a),i);return e.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})},g(k),c(k,o,"Generator"),c(k,i,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),e.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=B,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&t.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t,n){return u.type="throw",u.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=e,u.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(u)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),p},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),T(t),p}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;T(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:B(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=void 0),p}},e}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,u,o=[],c=!0,s=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(f){s=!0,a=f}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(e){var r=_toPrimitive(e,"string");return"symbol"===_typeof(r)?r:String(r)}function _toPrimitive(e,r){if("object"!==_typeof(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function asyncGeneratorStep(e,r,t,n,a,i,u){try{var o=e[i](u),c=o.value}catch(s){return void t(s)}o.done?r(c):Promise.resolve(c).then(n,a)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function u(e){asyncGeneratorStep(i,n,a,u,o,"next",e)}function o(e){asyncGeneratorStep(i,n,a,u,o,"throw",e)}u(void 0)})}}var Token=require("token-types"),strtok3=require("strtok3/lib/core"),_require=require("./util"),stringToBytes=_require.stringToBytes,tarHeaderChecksumMatches=_require.tarHeaderChecksumMatches,uint32SyncSafeToken=_require.uint32SyncSafeToken,supported=require("./supported"),minimumBytes=4100;function fromStream(e){return _fromStream.apply(this,arguments)}function _fromStream(){return(_fromStream=_asyncToGenerator(_regeneratorRuntime().mark(function e(r){var t;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,strtok3.fromStream(r);case 2:return t=e.sent,e.prev=3,e.next=6,fromTokenizer(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.next=10,t.close();case 10:return e.finish(7);case 11:case"end":return e.stop()}},e,null,[[3,,7,11]])}))).apply(this,arguments)}function fromBuffer(e){return _fromBuffer.apply(this,arguments)}function _fromBuffer(){return(_fromBuffer=_asyncToGenerator(_regeneratorRuntime().mark(function e(r){var t,n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)){e.next=2;break}throw new TypeError("Expected the `input` argument to be of type `Uint8Array` or `Buffer` or `ArrayBuffer`, got `".concat(_typeof(r),"`"));case 2:if((t=r instanceof Buffer?r:Buffer.from(r))&&t.length>1){e.next=5;break}return e.abrupt("return");case 5:return n=strtok3.fromBuffer(t),e.abrupt("return",fromTokenizer(n));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _check(e,r,t){t=_objectSpread({offset:0},t);var n,a=_createForOfIteratorHelper(r.entries());try{for(a.s();!(n=a.n()).done;){var i=_slicedToArray(n.value,2),u=i[0],o=i[1];if(t.mask){if(o!==(t.mask[u]&e[u+t.offset]))return!1}else if(o!==e[u+t.offset])return!1}}catch(c){a.e(c)}finally{a.f()}return!0}function fromTokenizer(e){return _fromTokenizer2.apply(this,arguments)}function _fromTokenizer2(){return(_fromTokenizer2=_asyncToGenerator(_regeneratorRuntime().mark(function e(r){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",_fromTokenizer(r));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof strtok3.EndOfStreamError){e.next=8;break}throw e.t0;case 8:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}function _fromTokenizer(e){return _fromTokenizer3.apply(this,arguments)}function _fromTokenizer3(){return(_fromTokenizer3=_asyncToGenerator(_regeneratorRuntime().mark(function e(r){var t,n,a,i,u,o,c,s,f,p,m,x,b,l,d,h,k,g,y,v,w,_,T,S,B;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Buffer.alloc(minimumBytes),12,n=function(e,r){return _check(t,e,r)},a=function(e,r){return n(stringToBytes(e),r)},r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),e.next=7,r.peekBuffer(t,{length:12,mayBeLess:!0});case 7:if(!n([66,77])){e.next=9;break}return e.abrupt("return",{ext:"bmp",mime:"image/bmp"});case 9:if(!n([11,119])){e.next=11;break}return e.abrupt("return",{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"});case 11:if(!n([120,1])){e.next=13;break}return e.abrupt("return",{ext:"dmg",mime:"application/x-apple-diskimage"});case 13:if(!n([77,90])){e.next=15;break}return e.abrupt("return",{ext:"exe",mime:"application/x-msdownload"});case 15:if(!n([37,33])){e.next=21;break}return e.next=18,r.peekBuffer(t,{length:24,mayBeLess:!0});case 18:if(!a("PS-Adobe-",{offset:2})||!a(" EPSF-",{offset:14})){e.next=20;break}return e.abrupt("return",{ext:"eps",mime:"application/eps"});case 20:return e.abrupt("return",{ext:"ps",mime:"application/postscript"});case 21:if(!n([31,160])&&!n([31,157])){e.next=23;break}return e.abrupt("return",{ext:"Z",mime:"application/x-compress"});case 23:if(!n([255,216,255])){e.next=25;break}return e.abrupt("return",{ext:"jpg",mime:"image/jpeg"});case 25:if(!n([73,73,188])){e.next=27;break}return e.abrupt("return",{ext:"jxr",mime:"image/vnd.ms-photo"});case 27:if(!n([31,139,8])){e.next=29;break}return e.abrupt("return",{ext:"gz",mime:"application/gzip"});case 29:if(!n([66,90,104])){e.next=31;break}return e.abrupt("return",{ext:"bz2",mime:"application/x-bzip2"});case 31:if(!a("ID3")){e.next=42;break}return e.next=34,r.ignore(6);case 34:return e.next=36,r.readToken(uint32SyncSafeToken);case 36:if(i=e.sent,!(r.position+i>r.fileInfo.size)){e.next=39;break}return e.abrupt("return",{ext:"mp3",mime:"audio/mpeg"});case 39:return e.next=41,r.ignore(i);case 41:return e.abrupt("return",fromTokenizer(r));case 42:if(!a("MP+")){e.next=44;break}return e.abrupt("return",{ext:"mpc",mime:"audio/x-musepack"});case 44:if(67!==t[0]&&70!==t[0]||!n([87,83],{offset:1})){e.next=46;break}return e.abrupt("return",{ext:"swf",mime:"application/x-shockwave-flash"});case 46:if(!n([71,73,70])){e.next=48;break}return e.abrupt("return",{ext:"gif",mime:"image/gif"});case 48:if(!a("FLIF")){e.next=50;break}return e.abrupt("return",{ext:"flif",mime:"image/flif"});case 50:if(!a("8BPS")){e.next=52;break}return e.abrupt("return",{ext:"psd",mime:"image/vnd.adobe.photoshop"});case 52:if(!a("WEBP",{offset:8})){e.next=54;break}return e.abrupt("return",{ext:"webp",mime:"image/webp"});case 54:if(!a("MPCK")){e.next=56;break}return e.abrupt("return",{ext:"mpc",mime:"audio/x-musepack"});case 56:if(!a("FORM")){e.next=58;break}return e.abrupt("return",{ext:"aif",mime:"audio/aiff"});case 58:if(!a("icns",{offset:0})){e.next=60;break}return e.abrupt("return",{ext:"icns",mime:"image/icns"});case 60:if(!n([80,75,3,4])){e.next=121;break}e.prev=61;case 62:if(!(r.position+30<r.fileInfo.size)){e.next=114;break}return e.next=65,r.readBuffer(t,{length:30});case 65:return u={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)},e.next=68,r.readToken(new Token.StringType(u.filenameLength,"utf-8"));case 68:return u.filename=e.sent,e.next=71,r.ignore(u.extraFieldLength);case 71:if("META-INF/mozilla.rsa"!==u.filename){e.next=73;break}return e.abrupt("return",{ext:"xpi",mime:"application/x-xpinstall"});case 73:if(!u.filename.endsWith(".rels")&&!u.filename.endsWith(".xml")){e.next=83;break}o=u.filename.split("/")[0],e.t0=o,e.next="_rels"===e.t0?78:"word"===e.t0?79:"ppt"===e.t0?80:"xl"===e.t0?81:82;break;case 78:return e.abrupt("break",83);case 79:return e.abrupt("return",{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});case 80:return e.abrupt("return",{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"});case 81:return e.abrupt("return",{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});case 82:return e.abrupt("break",83);case 83:if(!u.filename.startsWith("xl/")){e.next=85;break}return e.abrupt("return",{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});case 85:if(!u.filename.startsWith("3D/")||!u.filename.endsWith(".model")){e.next=87;break}return e.abrupt("return",{ext:"3mf",mime:"model/3mf"});case 87:if("mimetype"!==u.filename||u.compressedSize!==u.uncompressedSize){e.next=98;break}return e.next=90,r.readToken(new Token.StringType(u.compressedSize,"utf-8"));case 90:c=e.sent,e.t1=c,e.next="application/epub+zip"===e.t1?94:"application/vnd.oasis.opendocument.text"===e.t1?95:"application/vnd.oasis.opendocument.spreadsheet"===e.t1?96:"application/vnd.oasis.opendocument.presentation"===e.t1?97:98;break;case 94:return e.abrupt("return",{ext:"epub",mime:"application/epub+zip"});case 95:return e.abrupt("return",{ext:"odt",mime:"application/vnd.oasis.opendocument.text"});case 96:return e.abrupt("return",{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"});case 97:return e.abrupt("return",{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"});case 98:if(0!==u.compressedSize){e.next=110;break}s=-1;case 100:if(!(s<0&&r.position<r.fileInfo.size)){e.next=108;break}return e.next=103,r.peekBuffer(t,{mayBeLess:!0});case 103:return s=t.indexOf("504B0304",0,"hex"),e.next=106,r.ignore(s>=0?s:t.length);case 106:e.next=100;break;case 108:e.next=112;break;case 110:return e.next=112,r.ignore(u.compressedSize);case 112:e.next=62;break;case 114:e.next=120;break;case 116:if(e.prev=116,e.t2=e.catch(61),e.t2 instanceof strtok3.EndOfStreamError){e.next=120;break}throw e.t2;case 120:return e.abrupt("return",{ext:"zip",mime:"application/zip"});case 121:if(!a("OggS")){e.next=140;break}return e.next=124,r.ignore(28);case 124:return f=Buffer.alloc(8),e.next=127,r.readBuffer(f);case 127:if(!_check(f,[79,112,117,115,72,101,97,100])){e.next=129;break}return e.abrupt("return",{ext:"opus",mime:"audio/opus"});case 129:if(!_check(f,[128,116,104,101,111,114,97])){e.next=131;break}return e.abrupt("return",{ext:"ogv",mime:"video/ogg"});case 131:if(!_check(f,[1,118,105,100,101,111,0])){e.next=133;break}return e.abrupt("return",{ext:"ogm",mime:"video/ogg"});case 133:if(!_check(f,[127,70,76,65,67])){e.next=135;break}return e.abrupt("return",{ext:"oga",mime:"audio/ogg"});case 135:if(!_check(f,[83,112,101,101,120,32,32])){e.next=137;break}return e.abrupt("return",{ext:"spx",mime:"audio/ogg"});case 137:if(!_check(f,[1,118,111,114,98,105,115])){e.next=139;break}return e.abrupt("return",{ext:"ogg",mime:"audio/ogg"});case 139:return e.abrupt("return",{ext:"ogx",mime:"application/ogg"});case 140:if(!n([80,75])||3!==t[2]&&5!==t[2]&&7!==t[2]||4!==t[3]&&6!==t[3]&&8!==t[3]){e.next=142;break}return e.abrupt("return",{ext:"zip",mime:"application/zip"});case 142:if(!a("ftyp",{offset:4})||0==(96&t[8])){e.next=167;break}p=t.toString("binary",8,12).replace("\0"," ").trim(),e.t3=p,e.next="avif"===e.t3?147:"mif1"===e.t3?148:"msf1"===e.t3?149:"heic"===e.t3?150:"heix"===e.t3?150:"hevc"===e.t3?151:"hevx"===e.t3?151:"qt"===e.t3?152:"M4V"===e.t3?153:"M4VH"===e.t3?153:"M4VP"===e.t3?153:"M4P"===e.t3?154:"M4B"===e.t3?155:"M4A"===e.t3?156:"F4V"===e.t3?157:"F4P"===e.t3?158:"F4A"===e.t3?159:"F4B"===e.t3?160:"crx"===e.t3?161:162;break;case 147:return e.abrupt("return",{ext:"avif",mime:"image/avif"});case 148:return e.abrupt("return",{ext:"heic",mime:"image/heif"});case 149:return e.abrupt("return",{ext:"heic",mime:"image/heif-sequence"});case 150:return e.abrupt("return",{ext:"heic",mime:"image/heic"});case 151:return e.abrupt("return",{ext:"heic",mime:"image/heic-sequence"});case 152:return e.abrupt("return",{ext:"mov",mime:"video/quicktime"});case 153:return e.abrupt("return",{ext:"m4v",mime:"video/x-m4v"});case 154:return e.abrupt("return",{ext:"m4p",mime:"video/mp4"});case 155:return e.abrupt("return",{ext:"m4b",mime:"audio/mp4"});case 156:return e.abrupt("return",{ext:"m4a",mime:"audio/x-m4a"});case 157:return e.abrupt("return",{ext:"f4v",mime:"video/mp4"});case 158:return e.abrupt("return",{ext:"f4p",mime:"video/mp4"});case 159:return e.abrupt("return",{ext:"f4a",mime:"audio/mp4"});case 160:return e.abrupt("return",{ext:"f4b",mime:"audio/mp4"});case 161:return e.abrupt("return",{ext:"cr3",mime:"image/x-canon-cr3"});case 162:if(!p.startsWith("3g")){e.next=166;break}if(!p.startsWith("3g2")){e.next=165;break}return e.abrupt("return",{ext:"3g2",mime:"video/3gpp2"});case 165:return e.abrupt("return",{ext:"3gp",mime:"video/3gpp"});case 166:return e.abrupt("return",{ext:"mp4",mime:"video/mp4"});case 167:if(!a("MThd")){e.next=169;break}return e.abrupt("return",{ext:"mid",mime:"audio/midi"});case 169:if(!a("wOFF")||!n([0,1,0,0],{offset:4})&&!a("OTTO",{offset:4})){e.next=171;break}return e.abrupt("return",{ext:"woff",mime:"font/woff"});case 171:if(!a("wOF2")||!n([0,1,0,0],{offset:4})&&!a("OTTO",{offset:4})){e.next=173;break}return e.abrupt("return",{ext:"woff2",mime:"font/woff2"});case 173:if(!n([212,195,178,161])&&!n([161,178,195,212])){e.next=175;break}return e.abrupt("return",{ext:"pcap",mime:"application/vnd.tcpdump.pcap"});case 175:if(!a("DSD ")){e.next=177;break}return e.abrupt("return",{ext:"dsf",mime:"audio/x-dsf"});case 177:if(!a("LZIP")){e.next=179;break}return e.abrupt("return",{ext:"lz",mime:"application/x-lzip"});case 179:if(!a("fLaC")){e.next=181;break}return e.abrupt("return",{ext:"flac",mime:"audio/x-flac"});case 181:if(!n([66,80,71,251])){e.next=183;break}return e.abrupt("return",{ext:"bpg",mime:"image/bpg"});case 183:if(!a("wvpk")){e.next=185;break}return e.abrupt("return",{ext:"wv",mime:"audio/wavpack"});case 185:if(!a("%PDF")){e.next=195;break}return e.next=188,r.ignore(1350);case 188:return 10485760,m=Buffer.alloc(Math.min(10485760,r.fileInfo.size)),e.next=192,r.readBuffer(m,{mayBeLess:!0});case 192:if(!m.includes(Buffer.from("AIPrivateData"))){e.next=194;break}return e.abrupt("return",{ext:"ai",mime:"application/postscript"});case 194:return e.abrupt("return",{ext:"pdf",mime:"application/pdf"});case 195:if(!n([0,97,115,109])){e.next=197;break}return e.abrupt("return",{ext:"wasm",mime:"application/wasm"});case 197:if(!n([73,73,42,0])){e.next=210;break}if(!a("CR",{offset:8})){e.next=200;break}return e.abrupt("return",{ext:"cr2",mime:"image/x-canon-cr2"});case 200:if(!n([28,0,254,0],{offset:8})&&!n([31,0,11,0],{offset:8})){e.next=202;break}return e.abrupt("return",{ext:"nef",mime:"image/x-nikon-nef"});case 202:if(!n([8,0,0,0],{offset:4})||!n([45,0,254,0],{offset:8})&&!n([39,0,254,0],{offset:8})){e.next=204;break}return e.abrupt("return",{ext:"dng",mime:"image/x-adobe-dng"});case 204:return t=Buffer.alloc(24),e.next=207,r.peekBuffer(t);case 207:if(!n([16,251,134,1],{offset:4})&&!n([8,0,0,0],{offset:4})||!n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})){e.next=209;break}return e.abrupt("return",{ext:"arw",mime:"image/x-sony-arw"});case 209:return e.abrupt("return",{ext:"tif",mime:"image/tiff"});case 210:if(!n([77,77,0,42])){e.next=212;break}return e.abrupt("return",{ext:"tif",mime:"image/tiff"});case 212:if(!a("MAC ")){e.next=214;break}return e.abrupt("return",{ext:"ape",mime:"audio/ape"});case 214:if(!n([26,69,223,163])){e.next=230;break}return x=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n,a,i;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.peekNumber(Token.UINT8);case 2:for(t=e.sent,n=128,a=0;0==(t&n)&&0!==n;)++a,n>>=1;return i=Buffer.alloc(a+1),e.next=9,r.readBuffer(i);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var r,t,n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return r=e.sent,e.next=5,x();case 5:return(t=e.sent)[0]^=128>>t.length-1,n=Math.min(6,t.length),e.abrupt("return",{id:r.readUIntBE(0,r.length),len:t.readUIntBE(t.length-n,n)});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n){var a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0)){e.next=11;break}return e.next=3,b();case 3:if(17026!==(a=e.sent).id){e.next=6;break}return e.abrupt("return",r.readToken(new Token.StringType(a.len,"utf-8")));case 6:return e.next=8,r.ignore(a.len);case 8:--n,e.next=0;break;case 11:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}(),e.next=220,b();case 220:return d=e.sent,e.next=223,l(1,d.len);case 223:h=e.sent,e.t4=h,e.next="webm"===e.t4?227:"matroska"===e.t4?228:229;break;case 227:return e.abrupt("return",{ext:"webm",mime:"video/webm"});case 228:return e.abrupt("return",{ext:"mkv",mime:"video/x-matroska"});case 229:return e.abrupt("return");case 230:if(!n([82,73,70,70])){e.next=237;break}if(!n([65,86,73],{offset:8})){e.next=233;break}return e.abrupt("return",{ext:"avi",mime:"video/vnd.avi"});case 233:if(!n([87,65,86,69],{offset:8})){e.next=235;break}return e.abrupt("return",{ext:"wav",mime:"audio/vnd.wave"});case 235:if(!n([81,76,67,77],{offset:8})){e.next=237;break}return e.abrupt("return",{ext:"qcp",mime:"audio/qcelp"});case 237:if(!a("SQLi")){e.next=239;break}return e.abrupt("return",{ext:"sqlite",mime:"application/x-sqlite3"});case 239:if(!n([78,69,83,26])){e.next=241;break}return e.abrupt("return",{ext:"nes",mime:"application/x-nintendo-nes-rom"});case 241:if(!a("Cr24")){e.next=243;break}return e.abrupt("return",{ext:"crx",mime:"application/x-google-chrome-extension"});case 243:if(!a("MSCF")&&!a("ISc(")){e.next=245;break}return e.abrupt("return",{ext:"cab",mime:"application/vnd.ms-cab-compressed"});case 245:if(!n([237,171,238,219])){e.next=247;break}return e.abrupt("return",{ext:"rpm",mime:"application/x-rpm"});case 247:if(!n([197,208,211,198])){e.next=249;break}return e.abrupt("return",{ext:"eps",mime:"application/eps"});case 249:if(!n([40,181,47,253])){e.next=251;break}return e.abrupt("return",{ext:"zst",mime:"application/zstd"});case 251:if(!n([79,84,84,79,0])){e.next=253;break}return e.abrupt("return",{ext:"otf",mime:"font/otf"});case 253:if(!a("#!AMR")){e.next=255;break}return e.abrupt("return",{ext:"amr",mime:"audio/amr"});case 255:if(!a("{\\rtf")){e.next=257;break}return e.abrupt("return",{ext:"rtf",mime:"application/rtf"});case 257:if(!n([70,76,86,1])){e.next=259;break}return e.abrupt("return",{ext:"flv",mime:"video/x-flv"});case 259:if(!a("IMPM")){e.next=261;break}return e.abrupt("return",{ext:"it",mime:"audio/x-it"});case 261:if(!(a("-lh0-",{offset:2})||a("-lh1-",{offset:2})||a("-lh2-",{offset:2})||a("-lh3-",{offset:2})||a("-lh4-",{offset:2})||a("-lh5-",{offset:2})||a("-lh6-",{offset:2})||a("-lh7-",{offset:2})||a("-lzs-",{offset:2})||a("-lz4-",{offset:2})||a("-lz5-",{offset:2})||a("-lhd-",{offset:2}))){e.next=263;break}return e.abrupt("return",{ext:"lzh",mime:"application/x-lzh-compressed"});case 263:if(!n([0,0,1,186])){e.next=268;break}if(!n([33],{offset:4,mask:[241]})){e.next=266;break}return e.abrupt("return",{ext:"mpg",mime:"video/MP1S"});case 266:if(!n([68],{offset:4,mask:[196]})){e.next=268;break}return e.abrupt("return",{ext:"mpg",mime:"video/MP2P"});case 268:if(!a("ITSF")){e.next=270;break}return e.abrupt("return",{ext:"chm",mime:"application/vnd.ms-htmlhelp"});case 270:if(!n([253,55,122,88,90,0])){e.next=272;break}return e.abrupt("return",{ext:"xz",mime:"application/x-xz"});case 272:if(!a("<?xml ")){e.next=274;break}return e.abrupt("return",{ext:"xml",mime:"application/xml"});case 274:if(!n([55,122,188,175,39,28])){e.next=276;break}return e.abrupt("return",{ext:"7z",mime:"application/x-7z-compressed"});case 276:if(!n([82,97,114,33,26,7])||0!==t[6]&&1!==t[6]){e.next=278;break}return e.abrupt("return",{ext:"rar",mime:"application/x-rar-compressed"});case 278:if(!a("solid ")){e.next=280;break}return e.abrupt("return",{ext:"stl",mime:"model/stl"});case 280:if(!a("BLENDER")){e.next=282;break}return e.abrupt("return",{ext:"blend",mime:"application/x-blender"});case 282:if(!a("!<arch>")){e.next=291;break}return e.next=285,r.ignore(8);case 285:return e.next=287,r.readToken(new Token.StringType(13,"ascii"));case 287:if("debian-binary"!==e.sent){e.next=290;break}return e.abrupt("return",{ext:"deb",mime:"application/x-deb"});case 290:return e.abrupt("return",{ext:"ar",mime:"application/x-unix-archive"});case 291:if(!n([137,80,78,71,13,10,26,10])){e.next=309;break}return k=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readToken(Token.INT32_BE);case 2:return e.t0=e.sent,e.next=5,r.readToken(new Token.StringType(4,"binary"));case 5:return e.t1=e.sent,e.abrupt("return",{length:e.t0,type:e.t1});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=295,r.ignore(8);case 295:return e.next=297,k();case 297:if(!((g=e.sent).length<0)){e.next=300;break}return e.abrupt("return");case 300:e.t5=g.type,e.next="IDAT"===e.t5?303:"acTL"===e.t5?304:305;break;case 303:return e.abrupt("return",{ext:"png",mime:"image/png"});case 304:return e.abrupt("return",{ext:"apng",mime:"image/apng"});case 305:return e.next=307,r.ignore(g.length+4);case 307:if(r.position+8<r.fileInfo.size){e.next=295;break}case 308:return e.abrupt("return",{ext:"png",mime:"image/png"});case 309:if(!n([65,82,82,79,87,49,0,0])){e.next=311;break}return e.abrupt("return",{ext:"arrow",mime:"application/x-apache-arrow"});case 311:if(!n([103,108,84,70,2,0,0,0])){e.next=313;break}return e.abrupt("return",{ext:"glb",mime:"model/gltf-binary"});case 313:if(!(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))){e.next=315;break}return e.abrupt("return",{ext:"mov",mime:"video/quicktime"});case 315:if(!n([73,73,82,79,8,0,0,0,24])){e.next=317;break}return e.abrupt("return",{ext:"orf",mime:"image/x-olympus-orf"});case 317:if(!a("gimp xcf ")){e.next=319;break}return e.abrupt("return",{ext:"xcf",mime:"image/x-xcf"});case 319:if(!n([73,73,85,0,24,0,0,0,136,231,116,216])){e.next=321;break}return e.abrupt("return",{ext:"rw2",mime:"image/x-panasonic-rw2"});case 321:if(!n([48,38,178,117,142,102,207,17,166,217])){e.next=346;break}return y=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Buffer.alloc(16),e.next=3,r.readBuffer(t);case 3:return e.t0=t,e.t1=Number,e.next=7,r.readToken(Token.UINT64_LE);case 7:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",{id:e.t0,size:e.t3});case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=325,r.ignore(30);case 325:if(!(r.position+24<r.fileInfo.size)){e.next=345;break}return e.next=328,y();case 328:if(v=e.sent,w=v.size-24,!_check(v.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){e.next=341;break}return _=Buffer.alloc(16),e.t6=w,e.next=335,r.readBuffer(_);case 335:if(w=e.t6-=e.sent,!_check(_,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43])){e.next=338;break}return e.abrupt("return",{ext:"asf",mime:"audio/x-ms-asf"});case 338:if(!_check(_,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43])){e.next=340;break}return e.abrupt("return",{ext:"asf",mime:"video/x-ms-asf"});case 340:return e.abrupt("break",345);case 341:return e.next=343,r.ignore(w);case 343:e.next=325;break;case 345:return e.abrupt("return",{ext:"asf",mime:"application/vnd.ms-asf"});case 346:if(!n([171,75,84,88,32,49,49,187,13,10,26,10])){e.next=348;break}return e.abrupt("return",{ext:"ktx",mime:"image/ktx"});case 348:if(!n([126,16,4])&&!n([126,24,4])||!n([48,77,73,69],{offset:4})){e.next=350;break}return e.abrupt("return",{ext:"mie",mime:"application/x-mie"});case 350:if(!n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2})){e.next=352;break}return e.abrupt("return",{ext:"shp",mime:"application/x-esri-shape"});case 352:if(!n([0,0,0,12,106,80,32,32,13,10,135,10])){e.next=366;break}return e.next=355,r.ignore(20);case 355:return e.next=357,r.readToken(new Token.StringType(4,"ascii"));case 357:T=e.sent,e.t7=T,e.next="jp2 "===e.t7?361:"jpx "===e.t7?362:"jpm "===e.t7?363:"mjp2"===e.t7?364:365;break;case 361:return e.abrupt("return",{ext:"jp2",mime:"image/jp2"});case 362:return e.abrupt("return",{ext:"jpx",mime:"image/jpx"});case 363:return e.abrupt("return",{ext:"jpm",mime:"image/jpm"});case 364:return e.abrupt("return",{ext:"mj2",mime:"image/mj2"});case 365:return e.abrupt("return");case 366:if(!n([255,10])&&!n([0,0,0,12,74,88,76,32,13,10,135,10])){e.next=368;break}return e.abrupt("return",{ext:"jxl",mime:"image/jxl"});case 368:if(!n([0,0,1,186])&&!n([0,0,1,179])){e.next=370;break}return e.abrupt("return",{ext:"mpg",mime:"video/mpeg"});case 370:if(!n([0,1,0,0,0])){e.next=372;break}return e.abrupt("return",{ext:"ttf",mime:"font/ttf"});case 372:if(!n([0,0,1,0])){e.next=374;break}return e.abrupt("return",{ext:"ico",mime:"image/x-icon"});case 374:if(!n([0,0,2,0])){e.next=376;break}return e.abrupt("return",{ext:"cur",mime:"image/x-icon"});case 376:if(!n([208,207,17,224,161,177,26,225])){e.next=378;break}return e.abrupt("return",{ext:"cfb",mime:"application/x-cfb"});case 378:return e.next=380,r.peekBuffer(t,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0});case 380:if(!a("BEGIN:")){e.next=385;break}if(!a("VCARD",{offset:6})){e.next=383;break}return e.abrupt("return",{ext:"vcf",mime:"text/vcard"});case 383:if(!a("VCALENDAR",{offset:6})){e.next=385;break}return e.abrupt("return",{ext:"ics",mime:"text/calendar"});case 385:if(!a("FUJIFILMCCD-RAW")){e.next=387;break}return e.abrupt("return",{ext:"raf",mime:"image/x-fujifilm-raf"});case 387:if(!a("Extended Module:")){e.next=389;break}return e.abrupt("return",{ext:"xm",mime:"audio/x-xm"});case 389:if(!a("Creative Voice File")){e.next=391;break}return e.abrupt("return",{ext:"voc",mime:"audio/x-voc"});case 391:if(!(n([4,0,0,0])&&t.length>=16)){e.next=403;break}if(!((S=t.readUInt32LE(12))>12&&t.length>=S+16)){e.next=403;break}if(e.prev=394,B=t.slice(16,S+16).toString(),!JSON.parse(B).files){e.next=399;break}return e.abrupt("return",{ext:"asar",mime:"application/x-asar"});case 399:e.next=403;break;case 401:e.prev=401,e.t8=e.catch(394);case 403:if(!n([6,14,43,52,2,5,1,1,13,1,2,1,1,2])){e.next=405;break}return e.abrupt("return",{ext:"mxf",mime:"application/mxf"});case 405:if(!a("SCRM",{offset:44})){e.next=407;break}return e.abrupt("return",{ext:"s3m",mime:"audio/x-s3m"});case 407:if(!n([71],{offset:4})||!n([71],{offset:192})&&!n([71],{offset:196})){e.next=409;break}return e.abrupt("return",{ext:"mts",mime:"video/mp2t"});case 409:if(!n([66,79,79,75,77,79,66,73],{offset:60})){e.next=411;break}return e.abrupt("return",{ext:"mobi",mime:"application/x-mobipocket-ebook"});case 411:if(!n([68,73,67,77],{offset:128})){e.next=413;break}return e.abrupt("return",{ext:"dcm",mime:"application/dicom"});case 413:if(!n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70])){e.next=415;break}return e.abrupt("return",{ext:"lnk",mime:"application/x.ms.shortcut"});case 415:if(!n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0])){e.next=417;break}return e.abrupt("return",{ext:"alias",mime:"application/x.apple.alias"});case 417:if(!n([76,80],{offset:34})||!(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8}))){e.next=419;break}return e.abrupt("return",{ext:"eot",mime:"application/vnd.ms-fontobject"});case 419:if(!n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29])){e.next=421;break}return e.abrupt("return",{ext:"indd",mime:"application/x-indesign"});case 421:return e.next=423,r.peekBuffer(t,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0});case 423:if(!tarHeaderChecksumMatches(t)){e.next=425;break}return e.abrupt("return",{ext:"tar",mime:"application/x-tar"});case 425:if(!n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0])){e.next=427;break}return e.abrupt("return",{ext:"skp",mime:"application/vnd.sketchup.skp"});case 427:if(!a("-----BEGIN PGP MESSAGE-----")){e.next=429;break}return e.abrupt("return",{ext:"pgp",mime:"application/pgp-encrypted"});case 429:if(!(t.length>=2&&n([255,224],{offset:0,mask:[255,224]}))){e.next=440;break}if(!n([16],{offset:1,mask:[22]})){e.next=434;break}if(!n([8],{offset:1,mask:[8]})){e.next=433;break}return e.abrupt("return",{ext:"aac",mime:"audio/aac"});case 433:return e.abrupt("return",{ext:"aac",mime:"audio/aac"});case 434:if(!n([2],{offset:1,mask:[6]})){e.next=436;break}return e.abrupt("return",{ext:"mp3",mime:"audio/mpeg"});case 436:if(!n([4],{offset:1,mask:[6]})){e.next=438;break}return e.abrupt("return",{ext:"mp2",mime:"audio/mpeg"});case 438:if(!n([6],{offset:1,mask:[6]})){e.next=440;break}return e.abrupt("return",{ext:"mp1",mime:"audio/mpeg"});case 440:case"end":return e.stop()}},e,null,[[61,116],[394,401]])}))).apply(this,arguments)}var stream=function stream(readableStream){return new Promise(function(resolve,reject){var stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",_asyncToGenerator(_regeneratorRuntime().mark(function e(){var r,t,n,a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new stream.PassThrough,t=stream.pipeline?stream.pipeline(readableStream,r,function(){}):readableStream.pipe(r),n=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0),e.prev=3,e.next=6,fromBuffer(n);case 6:a=e.sent,r.fileType=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),reject(e.t0);case 13:resolve(t);case 14:case"end":return e.stop()}},e,null,[[3,10]])})))})},fileType={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType,"extensions",{get:function(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get:function(){return new Set(supported.mimeTypes)}}),module.exports=fileType;
},{"token-types":"rOYN","strtok3/lib/core":"tvmF","./util":"TDI3","./supported":"NJ20","buffer":"qcot"}],"UNrW":[function(require,module,exports) {
"use strict";var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function o(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var r=e.parameters,n=e.type;if(!n||!i.test(n))throw new TypeError("invalid type");var a=n;if(r&&"object"==typeof r)for(var o,f=Object.keys(r).sort(),u=0;u<f.length;u++){if(o=f[u],!t.test(o))throw new TypeError("invalid parameter name");a+="; "+o+"="+p(r[o])}return a}function f(r){if(!r)throw new TypeError("argument string is required");var t="object"==typeof r?u(r):r;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var a=t.indexOf(";"),o=-1!==a?t.slice(0,a).trim():t.trim();if(!i.test(o))throw new TypeError("invalid media type");var f=new s(o.toLowerCase());if(-1!==a){var p,y,c;for(e.lastIndex=a;y=e.exec(t);){if(y.index!==a)throw new TypeError("invalid parameter format");a+=y[0].length,p=y[1].toLowerCase(),34===(c=y[2]).charCodeAt(0)&&-1!==(c=c.slice(1,-1)).indexOf("\\")&&(c=c.replace(n,"$1")),f.parameters[p]=c}if(a!==t.length)throw new TypeError("invalid parameter format")}return f}function u(e){var r;if("function"==typeof e.getHeader?r=e.getHeader("content-type"):"object"==typeof e.headers&&(r=e.headers&&e.headers["content-type"]),"string"!=typeof r)throw new TypeError("content-type header is missing from object");return r}function p(e){var n=String(e);if(t.test(n))return n;if(n.length>0&&!r.test(n))throw new TypeError("invalid parameter value");return'"'+n.replace(a,"\\$1")+'"'}function s(e){this.parameters=Object.create(null),this.type=e}exports.format=o,exports.parse=f;
},{}],"atBn":[function(require,module,exports) {
"use strict";var r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,t=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function i(t){if(!t||"object"!=typeof t)throw new TypeError("argument obj is required");var i=t.subtype,s=t.suffix,n=t.type;if(!n||!e.test(n))throw new TypeError("invalid type");if(!i||!r.test(i))throw new TypeError("invalid subtype");var o=n+"/"+i;if(s){if(!e.test(s))throw new TypeError("invalid suffix");o+="+"+s}return o}function s(r){if(!r)throw new TypeError("argument string is required");if("string"!=typeof r)throw new TypeError("argument string is required to be a string");return t.test(r.toLowerCase())}function n(r){if(!r)throw new TypeError("argument string is required");if("string"!=typeof r)throw new TypeError("argument string is required to be a string");var e=t.exec(r.toLowerCase());if(!e)throw new TypeError("invalid media type");var i,s=e[1],n=e[2],a=n.lastIndexOf("+");return-1!==a&&(i=n.substr(a+1),n=n.substr(0,a)),new o(s,n,i)}function o(r,e,t){this.type=r,this.subtype=e,this.suffix=t}exports.format=i,exports.parse=n,exports.test=s;
},{}],"rhWo":[function(require,module,exports) {
"use strict";var t,o,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackType=exports.TargetType=exports.DataType=void 0,function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"}(t=exports.DataType||(exports.DataType={})),function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"}(o=exports.TargetType||(exports.TargetType={})),function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"}(e=exports.TrackType||(exports.TrackType={}));
},{}],"sEye":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackType=void 0;var e=require("./matroska/types");Object.defineProperty(exports,"TrackType",{enumerable:!0,get:function(){return e.TrackType}});
},{"./matroska/types":"rhWo"}],"Wlj4":[function(require,module,exports) {
"use strict";function l(l){return exports.commonTags.hasOwnProperty(l)&&!exports.commonTags[l].multiple}function i(l){return!exports.commonTags[l].multiple||exports.commonTags[l].unique}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isUnique=exports.isSingleton=exports.commonTags=void 0,exports.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}},exports.isSingleton=l,exports.isUnique=i;
},{}],"QsEN":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)}function i(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommonTagMapper=void 0;var a=function(){function t(n,r){e(this,t),this.tagTypes=n,this.tagMap=r}return r(t,[{key:"mapGenericTag",value:function(t,e){t={id:t.id,value:t.value},this.postMap(t,e);var n=this.getCommonName(t.id);return n?{id:n,value:t.value}:null}},{key:"getCommonName",value:function(t){return this.tagMap[t]}},{key:"postMap",value:function(t,e){}}],[{key:"toIntOrNull",value:function(t){var e=parseInt(t,10);return isNaN(e)?null:e}},{key:"normalizeTrack",value:function(t){var e=t.toString().split("/");return{no:parseInt(e[0],10)||null,of:parseInt(e[1],10)||null}}}]),t}();a.maxRatingScore=1,exports.CommonTagMapper=a;
},{}],"oC4z":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=p();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v1TagMapper=void 0;var s=require("../common/GenericTagMapper"),b={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"},m=function(t){u(n,s.CommonTagMapper);var e=f(n);function n(){return i(this,n),e.call(this,["ID3v1"],b)}return r(n)}();exports.ID3v1TagMapper=m;
},{"../common/GenericTagMapper":"QsEN"}],"JjHc":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=l();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CaseInsensitiveTagMap=void 0;var y=require("./GenericTagMapper"),b=function(t){u(o,y.CommonTagMapper);var r=f(o);function o(t,n){e(this,o);for(var i={},u=0,c=Object.keys(n);u<c.length;u++){var f=c[u];i[f.toUpperCase()]=n[f]}return r.call(this,t,i)}return n(o,[{key:"getCommonName",value:function(t){return this.tagMap[t.toUpperCase()]}}]),o}();exports.CaseInsensitiveTagMap=b;
},{"./GenericTagMapper":"QsEN"}],"e0Mm":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r,t,e){return 0!=(r[t]&1<<e)}function e(r,t,e,o){var n=t;if("utf16le"===o){for(;0!==r[n]||0!==r[n+1];){if(n>=e)return e;n+=2}return n}for(;0!==r[n];){if(n>=e)return e;n++}return n}function o(r){var t=r.indexOf("\0");return-1===t?r:r.substr(0,t)}function n(r){var t=r.length;if(0!=(1&t))throw new Error("Buffer length must be even");for(var e=0;e<t;e+=2){var o=r[e];r[e]=r[e+1],r[e+1]=o}return r}function i(t,e){if(255===t[0]&&254===t[1])return i(t.subarray(2),e);if("utf16le"===e&&254===t[0]&&255===t[1]){if(0!=(1&t.length))throw new Error("Expected even number of octets for 16-bit unicode string");return i(n(t),e)}return r.from(t).toString(e)}function u(r){return r=(r=r.replace(/^\x00+/g,"")).replace(/\x00+$/g,"")}function f(r,t,e,o){var n=e%8,i=r[t+~~(e/8)];i&=255>>n;var u=8-n,s=o-u;return s<0?i>>=8-n-o:s>0&&(i<<=s,i|=f(r,t,e+u,s)),i}function s(r,t,e){return 1===f(r,t,e,1)}function a(r){for(var t=[],e=0,o=r.length;e<o;e++){var n=Number(r.charCodeAt(e)).toString(16);t.push(1===n.length?"0"+n:n)}return t.join(" ")}function p(r){return 10*Math.log10(r)}function x(r){return Math.pow(10,r/10)}function l(r){var t=r.split(" ").map(function(r){return r.trim().toLowerCase()});if(t.length>=1){var e=parseFloat(t[0]);return 2===t.length&&"db"===t[1]?{dB:e,ratio:x(e)}:{dB:p(e),ratio:e}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toRatio=exports.dbToRatio=exports.ratioToDb=exports.a2hex=exports.isBitSet=exports.getBitAllignedNumber=exports.stripNulls=exports.decodeString=exports.trimRightNull=exports.findZero=exports.getBit=void 0,exports.getBit=t,exports.findZero=e,exports.trimRightNull=o,exports.decodeString=i,exports.stripNulls=u,exports.getBitAllignedNumber=f,exports.isBitSet=s,exports.a2hex=a,exports.ratioToDb=p,exports.dbToRatio=x,exports.toRatio=l;
},{"buffer":"qcot"}],"L3xY":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function i(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(r){var t=a(r,"string");return"symbol"===e(t)?t:String(t)}function a(r,t){if("object"!==e(r)||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var n=i.call(r,t||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&u(e,r)}function u(e,r){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e})(e,r)}function c(e){var r=X();return function(){var t,i=T(e);if(r){var n=T(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return s(this,t)}}function s(r,t){if(t&&("object"===e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(r)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v24TagMapper=void 0;var d=require("../common/GenericTagMapper"),p=require("../common/CaseInsensitiveTagMap"),m=require("../common/Util"),_={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"},f=function(e){o(n,p.CaseInsensitiveTagMap);var t=c(n);function n(){return r(this,n),t.call(this,["ID3v2.3","ID3v2.4"],_)}return i(n,[{key:"postMap",value:function(e,r){switch(e.id){case"UFID":"http://musicbrainz.org"===e.value.owner_identifier&&(e.id+=":"+e.value.owner_identifier,e.value=m.decodeString(e.value.identifier,"latin1"));break;case"PRIV":switch(e.value.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=":"+e.value.owner_identifier,e.value=4===e.value.data.length?e.value.data.readUInt32LE(0):null,null===e.value&&r.addWarning("Failed to parse PRIV:PeakValue");break;default:r.addWarning("Unknown PRIV owner-identifier: ".concat(e.value.owner_identifier))}break;case"COMM":e.value=e.value?e.value.text:null;break;case"POPM":e.value=n.toRating(e.value)}}}],[{key:"toRating",value:function(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*d.CommonTagMapper.maxRatingScore:void 0}}}]),n}();exports.ID3v24TagMapper=f;
},{"../common/GenericTagMapper":"QsEN","../common/CaseInsensitiveTagMap":"JjHc","../common/Util":"e0Mm"}],"BSVV":[function(require,module,exports) {
"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function t(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function e(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,n(i.key),i)}}function i(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function n(t){var e=o(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function u(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&a(r,t)}function a(r,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r})(r,t)}function c(r){var t=p();return function(){var e,i=f(r);if(t){var n=f(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return s(this,e)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function f(r){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfTagMapper=void 0;var d=require("../common/GenericTagMapper"),b={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"},M=function(r){u(n,d.CommonTagMapper);var e=c(n);function n(){return t(this,n),e.call(this,["asf"],b)}return i(n,[{key:"postMap",value:function(r){switch(r.id){case"WM/SharedUserRating":var t=r.id.split(":");r.value=n.toRating(r.value),r.id=t[0]}}}],[{key:"toRating",value:function(r){return{rating:parseFloat(r+1)/5}}}]),n}();exports.AsfTagMapper=M;
},{"../common/GenericTagMapper":"QsEN"}],"xe48":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function r(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=n(e,"string");return"symbol"===t(r)?r:String(r)}function n(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=l();return function(){var r,o=p(t);if(e){var n=p(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return s(this,r)}}function s(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v22TagMapper=exports.id3v22TagMap=void 0;var y=require("../common/CaseInsensitiveTagMap");exports.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};var b=function(t){u(o,y.CaseInsensitiveTagMap);var e=a(o);function o(){return i(this,o),e.call(this,["ID3v2.2"],exports.id3v22TagMap)}return r(o)}();exports.ID3v22TagMapper=b;
},{"../common/CaseInsensitiveTagMap":"JjHc"}],"e34Z":[function(require,module,exports) {
"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function t(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i(n.key),n)}}function e(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function i(t){var e=n(t,"string");return"symbol"===r(e)?e:String(e)}function n(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function a(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&c(r,t)}function c(r,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r})(r,t)}function u(r){var t=p();return function(){var e,i=f(r);if(t){var n=f(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return s(this,e)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function f(r){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.APEv2TagMapper=void 0;var b=require("../common/CaseInsensitiveTagMap"),d={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"},m=function(r){a(i,b.CaseInsensitiveTagMap);var t=u(i);function i(){return o(this,i),t.call(this,["APEv2"],d)}return e(i)}();exports.APEv2TagMapper=m;
},{"../common/CaseInsensitiveTagMap":"JjHc"}],"a2TP":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t){var i=n(t,"string");return"symbol"===e(i)?i:String(i)}function n(t,i){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,i||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=l();return function(){var i,r=m(e);if(t){var n=m(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return s(this,i)}}function s(t,i){if(i&&("object"===e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MP4TagMapper=exports.tagType=void 0;var T=require("../common/CaseInsensitiveTagMap"),d={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik"};exports.tagType="iTunes";var y=function(e){a(r,T.CaseInsensitiveTagMap);var t=c(r);function r(){return o(this,r),t.call(this,[exports.tagType],d)}return i(r)}();exports.MP4TagMapper=y;
},{"../common/CaseInsensitiveTagMap":"JjHc"}],"ZM9N":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function i(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=n(e,"string");return"symbol"===t(r)?r:String(r)}function n(e,r){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=l();return function(){var r,i=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return s(this,r)}}function s(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisTagMapper=void 0;var S=require("../../common/GenericTagMapper"),R={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"},T=function(t){a(o,S.CommonTagMapper);var r=u(o);function o(){return e(this,o),r.call(this,["vorbis"],R)}return i(o,[{key:"postMap",value:function(t){if(0===t.id.indexOf("RATING:")){var e=t.id.split(":");t.value=o.toRating(e[1],t.value),t.id=e[0]}}}],[{key:"toRating",value:function(t,e){return{source:t?t.toLowerCase():t,rating:parseFloat(e)*S.CommonTagMapper.maxRatingScore}}}]),o}();exports.VorbisTagMapper=T;
},{"../../common/GenericTagMapper":"QsEN"}],"WbCo":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=l();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RiffInfoTagMapper=exports.riffInfoTagMap=void 0;var y=require("../common/GenericTagMapper");exports.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};var b=function(t){c(n,y.CommonTagMapper);var e=u(n);function n(){return i(this,n),e.call(this,["exif"],exports.riffInfoTagMap)}return r(n)}();exports.RiffInfoTagMapper=b;
},{"../common/GenericTagMapper":"QsEN"}],"MBqx":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(r){var e=o(r,"string");return"symbol"===t(e)?e:String(e)}function o(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r)}function c(t,r){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function u(t){var r=s();return function(){var e,n=p(t);if(r){var o=p(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return f(this,e)}}function f(r,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(r)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatroskaTagMapper=void 0;var b=require("../common/CaseInsensitiveTagMap"),y={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"},m=function(t){a(n,b.CaseInsensitiveTagMap);var r=u(n);function n(){return i(this,n),r.call(this,["matroska"],y)}return e(n)}();exports.MatroskaTagMapper=m;
},{"../common/CaseInsensitiveTagMap":"JjHc"}],"hxJa":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=l();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AiffTagMapper=void 0;var s=require("../common/GenericTagMapper"),b={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"},m=function(t){u(n,s.CommonTagMapper);var e=f(n);function n(){return i(this,n),e.call(this,["AIFF"],b)}return r(n)}();exports.AiffTagMapper=m;
},{"../common/GenericTagMapper":"QsEN"}],"CeTJ":[function(require,module,exports) {
"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function e(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=t(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var a=0,o=function(){};return{s:o,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,p=!0,f=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return p=r.done,r},e:function(r){f=!0,i=r},f:function(){try{p||null==n.return||n.return()}finally{if(f)throw i}}}}function t(r,e){if(r){if("string"==typeof r)return n(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(r,e):void 0}}function n(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function a(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function o(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,p(n.key),n)}}function i(r,e,t){return e&&o(r.prototype,e),t&&o(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function p(e){var t=f(e,"string");return"symbol"===r(t)?t:String(t)}function f(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CombinedTagMapper=void 0;var u=require("../id3v1/ID3v1TagMap"),c=require("../id3v2/ID3v24TagMapper"),l=require("../asf/AsfTagMapper"),g=require("../id3v2/ID3v22TagMapper"),s=require("../apev2/APEv2TagMapper"),y=require("../mp4/MP4TagMapper"),v=require("../ogg/vorbis/VorbisTagMapper"),M=require("../riff/RiffInfoTagMap"),b=require("../matroska/MatroskaTagMapper"),m=require("../aiff/AiffTagMap"),T=function(){function r(){var e=this;a(this,r),this.tagMappers={},[new u.ID3v1TagMapper,new g.ID3v22TagMapper,new c.ID3v24TagMapper,new y.MP4TagMapper,new y.MP4TagMapper,new v.VorbisTagMapper,new s.APEv2TagMapper,new l.AsfTagMapper,new M.RiffInfoTagMapper,new b.MatroskaTagMapper,new m.AiffTagMapper].forEach(function(r){e.registerTagMapper(r)})}return i(r,[{key:"mapTag",value:function(r,e,t){if(this.tagMappers[r])return this.tagMappers[r].mapGenericTag(e,t);throw new Error("No generic tag mapper defined for tag-format: "+r)}},{key:"registerTagMapper",value:function(r){var t,n=e(r.tagTypes);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.tagMappers[a]=r}}catch(o){n.e(o)}finally{n.f()}}}]),r}();exports.CombinedTagMapper=T;
},{"../id3v1/ID3v1TagMap":"oC4z","../id3v2/ID3v24TagMapper":"L3xY","../asf/AsfTagMapper":"BSVV","../id3v2/ID3v22TagMapper":"xe48","../apev2/APEv2TagMapper":"e34Z","../mp4/MP4TagMapper":"a2TP","../ogg/vorbis/VorbisTagMapper":"ZM9N","../riff/RiffInfoTagMap":"WbCo","../matroska/MatroskaTagMapper":"MBqx","../aiff/AiffTagMap":"hxJa"}],"Xpa0":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(P){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),c=new I(n||[]);return i(a,"_invoke",{value:_(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}r.wrap=f;var v={};function p(){}function m(){}function d(){}var y={};l(y,c,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(j([])));b&&b!==n&&o.call(b,c)&&(y=b);var w=d.prototype=p.prototype=Object.create(y);function k(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function x(e,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var s=h(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function _(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},k(x.prototype),l(x.prototype,u,function(){return this}),r.AsyncIterator=x,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new x(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(w),l(w,s,"Generator"),l(w,c,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=j,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},r}function r(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,u,"next",t)}function u(t){r(a,o,i,c,u,"throw",t)}c(void 0)})}}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function s(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(e){var r=f(e,"string");return"symbol"===t(r)?r:String(r)}function f(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.joinArtists=exports.MetadataCollector=void 0;var h=require("../type"),v=require("debug"),p=require("./GenericTagTypes"),m=require("./CombinedTagMapper"),d=require("./GenericTagMapper"),y=require("./Util"),g=require("file-type/core"),b=(0,v.default)("music-metadata:collector"),w=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"],k=function(){function t(e){c(this,t),this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new m.CombinedTagMapper;var r,n=1,i=o(w);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.originPriority[a]=n++}}catch(u){i.e(u)}finally{i.f()}this.originPriority.artificial=500,this.originPriority.id3v1=600}return s(t,[{key:"hasAny",value:function(){return Object.keys(this.native).length>0}},{key:"addStreamInfo",value:function(t){b("streamInfo: type=".concat(h.TrackType[t.type],", codec=").concat(t.codecName)),this.format.trackInfo.push(t)}},{key:"setFormat",value:function(t,e){b("format: ".concat(t," = ").concat(e)),this.format[t]=e,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:t,value:e}})}},{key:"addTag",value:function(t,e,r){b("tag ".concat(t,".").concat(e," = ").concat(r)),this.native[t]||(this.format.tagTypes.push(t),this.native[t]=[]),this.native[t].push({id:e,value:r}),this.toCommon(t,e,r)}},{key:"addWarning",value:function(t){this.quality.warnings.push({message:t})}},{key:"postMap",value:function(t,e){var r=this;switch(e.id){case"artist":if(this.commonOrigin.artist===this.originPriority[t])return this.postMap("artificial",{id:"artists",value:e.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:e.value});break;case"artists":if(!(this.common.artist&&this.commonOrigin.artist!==this.originPriority.artificial||this.common.artists&&-1!==this.common.artists.indexOf(e.value))){var n={id:"artist",value:x((this.common.artists||[]).concat([e.value]))};this.setGenericTag("artificial",n)}break;case"picture":return void this.postFixPicture(e.value).then(function(n){null!==n&&(e.value=n,r.setGenericTag(t,e))});case"totaltracks":return void(this.common.track.of=d.CommonTagMapper.toIntOrNull(e.value));case"totaldiscs":return void(this.common.disk.of=d.CommonTagMapper.toIntOrNull(e.value));case"movementTotal":return void(this.common.movementIndex.of=d.CommonTagMapper.toIntOrNull(e.value));case"track":case"disk":case"movementIndex":var o=this.common[e.id].of;return this.common[e.id]=d.CommonTagMapper.normalizeTrack(e.value),void(this.common[e.id].of=null!=o?o:this.common[e.id].of);case"bpm":case"year":case"originalyear":e.value=parseInt(e.value,10);break;case"date":var i=parseInt(e.value.substr(0,4),10);isNaN(i)||(this.common.year=i);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":e.value="string"==typeof e.value?parseInt(e.value,10):e.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":e.value=(0,y.toRatio)(e.value);break;case"replaygain_track_minmax":e.value=e.value.split(",").map(function(t){return parseInt(t,10)});break;case"replaygain_undo":var a=e.value.split(",").map(function(t){return parseInt(t,10)});e.value={leftChannel:a[0],rightChannel:a[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":e.value="1"===e.value||1===e.value;break;case"isrc":if(this.common[e.id]&&-1!==this.common[e.id].indexOf(e.value))return}null!==e.value&&this.setGenericTag(t,e)}},{key:"toCommonMetadata",value:function(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}},{key:"postFixPicture",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.data&&r.data.length>0)){t.next=13;break}if(r.format){t.next=10;break}return t.next=4,g.fromBuffer(r.data);case 4:if(!(n=t.sent)){t.next=9;break}r.format=n.mime,t.next=10;break;case 9:return t.abrupt("return",null);case 10:switch(r.format=r.format.toLocaleLowerCase(),r.format){case"image/jpg":r.format="image/jpeg"}return t.abrupt("return",r);case 13:return this.addWarning("Empty picture tag found"),t.abrupt("return",null);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"toCommon",value:function(t,e,r){var n={id:e,value:r},o=this.tagMapper.mapTag(t,n,this);o&&this.postMap(t,o)}},{key:"setGenericTag",value:function(t,e){b("common.".concat(e.id," = ").concat(e.value));var r=this.commonOrigin[e.id]||1e3,n=this.originPriority[t];if((0,p.isSingleton)(e.id)){if(!(n<=r))return b("Ignore native tag (singleton): ".concat(t,".").concat(e.id," = ").concat(e.value));this.common[e.id]=e.value,this.commonOrigin[e.id]=n}else if(n===r)(0,p.isUnique)(e.id)&&-1!==this.common[e.id].indexOf(e.value)?b("Ignore duplicate value: ".concat(t,".").concat(e.id," = ").concat(e.value)):this.common[e.id].push(e.value);else{if(!(n<r))return b("Ignore native tag (list): ".concat(t,".").concat(e.id," = ").concat(e.value));this.common[e.id]=[e.value],this.commonOrigin[e.id]=n}this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:e.id,value:e.value}})}}]),t}();function x(t){return t.length>2?t.slice(0,t.length-1).join(", ")+" & "+t[t.length-1]:t.join(" & ")}exports.MetadataCollector=k,exports.joinArtists=x;
},{"../type":"sEye","debug":"jD9Y","./GenericTagTypes":"Wlj4","./CombinedTagMapper":"CeTJ","./GenericTagMapper":"QsEN","./Util":"e0Mm","file-type/core":"mKqu"}],"ujrG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextEncodingToken=exports.ExtendedHeader=exports.ID3v2Header=exports.UINT32SYNCSAFE=exports.AttachedPictureType=void 0;var e,t=require("token-types"),r=require("../common/Util");!function(e){e[e.Other=0]="Other",e[e["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",e[e["Other file icon"]=2]="Other file icon",e[e["Cover (front)"]=3]="Cover (front)",e[e["Cover (back)"]=4]="Cover (back)",e[e["Leaflet page"]=5]="Leaflet page",e[e["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",e[e["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",e[e["Artist/performer"]=8]="Artist/performer",e[e.Conductor=9]="Conductor",e[e["Band/Orchestra"]=10]="Band/Orchestra",e[e.Composer=11]="Composer",e[e["Lyricist/text writer"]=12]="Lyricist/text writer",e[e["Recording Location"]=13]="Recording Location",e[e["During recording"]=14]="During recording",e[e["During performance"]=15]="During performance",e[e["Movie/video screen capture"]=16]="Movie/video screen capture",e[e["A bright coloured fish"]=17]="A bright coloured fish",e[e.Illustration=18]="Illustration",e[e["Band/artist logotype"]=19]="Band/artist logotype",e[e["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"}(e=exports.AttachedPictureType||(exports.AttachedPictureType={})),exports.UINT32SYNCSAFE={get:function(e,t){return 127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21},len:4},exports.ID3v2Header={len:10,get:function(e,o){return{fileIdentifier:new t.StringType(3,"ascii").get(e,o),version:{major:t.INT8.get(e,o+3),revision:t.INT8.get(e,o+4)},flags:{unsynchronisation:r.getBit(e,o+5,7),isExtendedHeader:r.getBit(e,o+5,6),expIndicator:r.getBit(e,o+5,5),footer:r.getBit(e,o+5,4)},size:exports.UINT32SYNCSAFE.get(e,o+6)}}},exports.ExtendedHeader={len:10,get:function(e,o){return{size:t.UINT32_BE.get(e,o),extendedFlags:t.UINT16_BE.get(e,o+4),sizeOfPadding:t.UINT32_BE.get(e,o+6),crcDataPresent:r.getBit(e,o+4,31)}}},exports.TextEncodingToken={len:1,get:function(e,t){switch(e[t]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:default:return{encoding:"utf8",bom:!1}}}};
},{"token-types":"rOYN","../common/Util":"e0Mm"}],"O0hF":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(r){var e=i(r,"string");return"symbol"===t(e)?e:String(e)}function i(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BasicParser=void 0;var u=function(){function t(){r(this,t)}return n(t,[{key:"init",value:function(t,r,e){return this.metadata=t,this.tokenizer=r,this.options=e,this}}]),t}();exports.BasicParser=u;
},{}],"P2sd":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FourCcToken=void 0;var e=require("./Util"),o=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;exports.FourCcToken={len:4,get:function(r,n){var t=r.toString("binary",n,n+exports.FourCcToken.len);if(!t.match(o))throw new Error("FourCC contains invalid characters: ".concat(e.a2hex(t),' "').concat(t,'"'));return t},put:function(e,o,n){var t=r.from(n,"binary");if(4!==t.length)throw new Error("Invalid length");return t.copy(e,o)}};
},{"./Util":"e0Mm","buffer":"qcot"}],"xQQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBitSet=exports.parseTagFlags=exports.TagField=exports.TagItemHeader=exports.TagFooter=exports.Header=exports.DescriptorParser=exports.DataType=void 0;var e,t=require("token-types"),r=require("../common/FourCC");!function(e){e[e.text_utf8=0]="text_utf8",e[e.binary=1]="binary",e[e.external_info=2]="external_info",e[e.reserved=3]="reserved"}(e=exports.DataType||(exports.DataType={})),exports.DescriptorParser={len:52,get:function(e,a){return{ID:r.FourCcToken.get(e,a),version:t.UINT32_LE.get(e,a+4)/1e3,descriptorBytes:t.UINT32_LE.get(e,a+8),headerBytes:t.UINT32_LE.get(e,a+12),seekTableBytes:t.UINT32_LE.get(e,a+16),headerDataBytes:t.UINT32_LE.get(e,a+20),apeFrameDataBytes:t.UINT32_LE.get(e,a+24),apeFrameDataBytesHigh:t.UINT32_LE.get(e,a+28),terminatingDataBytes:t.UINT32_LE.get(e,a+32),fileMD5:new t.Uint8ArrayType(16).get(e,a+36)}}},exports.Header={len:24,get:function(e,r){return{compressionLevel:t.UINT16_LE.get(e,r),formatFlags:t.UINT16_LE.get(e,r+2),blocksPerFrame:t.UINT32_LE.get(e,r+4),finalFrameBlocks:t.UINT32_LE.get(e,r+8),totalFrames:t.UINT32_LE.get(e,r+12),bitsPerSample:t.UINT16_LE.get(e,r+16),channel:t.UINT16_LE.get(e,r+18),sampleRate:t.UINT32_LE.get(e,r+20)}}},exports.TagFooter={len:32,get:function(e,r){return{ID:new t.StringType(8,"ascii").get(e,r),version:t.UINT32_LE.get(e,r+8),size:t.UINT32_LE.get(e,r+12),fields:t.UINT32_LE.get(e,r+16),flags:s(t.UINT32_LE.get(e,r+20))}}},exports.TagItemHeader={len:8,get:function(e,r){return{size:t.UINT32_LE.get(e,r),flags:s(t.UINT32_LE.get(e,r+4))}}};var a=function(e){return new t.Uint8ArrayType(e.size-exports.TagFooter.len)};function s(e){return{containsHeader:o(e,31),containsFooter:o(e,30),isHeader:o(e,31),readOnly:o(e,0),dataType:(6&e)>>1}}function o(e,t){return 0!=(e&1<<t)}exports.TagField=a,exports.parseTagFlags=s,exports.isBitSet=o;
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"IhDz":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var e,t=require("buffer").Buffer;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(F){f=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),u=new O(n||[]);return o(i,"_invoke",{value:P(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(F){return{type:"throw",arg:F}}}e.wrap=l;var h={};function d(){}function y(){}function v(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(A([])));b&&b!==t&&n.call(b,u)&&(m=b);var w=v.prototype=d.prototype=Object.create(m);function k(e){["next","throw","return"].forEach(function(t){f(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){var a;o(this,"_invoke",{value:function(o,i){function u(){return new t(function(a,u){!function o(a,i,u,c){var s=p(e[a],e,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){o("next",e,u,c)},function(e){o("throw",e,u,c)}):t.resolve(l).then(function(e){f.value=e,u(f)},function(e){return o("throw",e,u,c)})}c(s.arg)}(o,i,a,u)})}return a=a?a.then(u,u):u()}})}function P(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return j()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=E(i,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,f(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),f(x.prototype,c,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),z(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function u(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=h(e,"string");return"symbol"===r(t)?t:String(t)}function h(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=b();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.APEv2Parser=void 0;var k=require("debug"),x=require("strtok3/lib/core"),P=require("token-types"),E=require("../common/Util"),T=require("../common/BasicParser"),z=require("./APEv2Token"),O=(0,k.default)("music-metadata:parser:APEv2"),A="APEv2",j="APETAGEX",F=function(e){d(o,T.BasicParser);var r=v(o);function o(){var e;return s(this,o),(e=r.apply(this,arguments)).ape={},e}return l(o,[{key:"tryParseApeHeader",value:function(){var e=c(i().mark(function e(){var r,n,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<z.TagFooter.len)){e.next=3;break}return O("No APEv2 header found, end-of-file reached"),e.abrupt("return");case 3:return e.next=5,this.tokenizer.peekToken(z.TagFooter);case 5:if((r=e.sent).ID!==j){e.next=12;break}return e.next=9,this.tokenizer.ignore(z.TagFooter.len);case 9:return e.abrupt("return",this.parseTags(r));case 12:if(O("APEv2 header not found at offset=".concat(this.tokenizer.position)),!this.tokenizer.fileInfo.size){e.next=19;break}return n=this.tokenizer.fileInfo.size-this.tokenizer.position,a=t.alloc(n),e.next=18,this.tokenizer.readBuffer(a);case 18:return e.abrupt("return",o.parseTagFooter(this.metadata,a,this.options));case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=c(i().mark(function e(){var t,r,n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(z.DescriptorParser);case 2:if("MAC "===(t=e.sent).ID){e.next=5;break}throw new Error("Unexpected descriptor ID");case 5:return this.ape.descriptor=t,r=t.descriptorBytes-z.DescriptorParser.len,e.next=9,r>0?this.parseDescriptorExpansion(r):this.parseHeader();case 9:return n=e.sent,e.next=12,this.tokenizer.ignore(n.forwardBytes);case 12:return e.abrupt("return",this.tryParseApeHeader());case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseTags",value:function(){var e=c(i().mark(function e(r){var o,a,u,c,s,f,l,p,h,d,y,v,m,g;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=t.alloc(256),a=r.size-z.TagFooter.len,O("Parse APE tags at offset=".concat(this.tokenizer.position,", size=").concat(a)),u=0;case 4:if(!(u<r.fields)){e.next=56;break}if(!(a<z.TagItemHeader.len)){e.next=8;break}return this.metadata.addWarning("APEv2 Tag-header: ".concat(r.fields-u," items remaining, but no more tag data to read.")),e.abrupt("break",56);case 8:return e.next=10,this.tokenizer.readToken(z.TagItemHeader);case 10:return c=e.sent,a-=z.TagItemHeader.len+c.size,e.next=14,this.tokenizer.peekBuffer(o,{length:Math.min(o.length,a)});case 14:return s=E.findZero(o,0,o.length),e.next=17,this.tokenizer.readToken(new P.StringType(s,"ascii"));case 17:return f=e.sent,e.next=20,this.tokenizer.ignore(1);case 20:a-=f.length+1,e.t0=c.flags.dataType,e.next=e.t0===z.DataType.text_utf8?24:e.t0===z.DataType.binary?31:e.t0===z.DataType.external_info?44:e.t0===z.DataType.reserved?48:53;break;case 24:return e.next=26,this.tokenizer.readToken(new P.StringType(c.size,"utf8"));case 26:l=e.sent,p=l.split(/\x00/g),h=n(p);try{for(h.s();!(d=h.n()).done;)y=d.value,this.metadata.addTag(A,f,y)}catch(i){h.e(i)}finally{h.f()}return e.abrupt("break",53);case 31:if(!this.options.skipCovers){e.next=36;break}return e.next=34,this.tokenizer.ignore(c.size);case 34:e.next=43;break;case 36:return v=t.alloc(c.size),e.next=39,this.tokenizer.readBuffer(v);case 39:s=E.findZero(v,0,v.length),m=v.toString("utf8",0,s),g=t.from(v.slice(s+1)),this.metadata.addTag(A,f,{description:m,data:g});case 43:return e.abrupt("break",53);case 44:return O("Ignore external info ".concat(f)),e.next=47,this.tokenizer.ignore(c.size);case 47:return e.abrupt("break",53);case 48:return O("Ignore external info ".concat(f)),this.metadata.addWarning('APEv2 header declares a reserved datatype for "'.concat(f,'"')),e.next=52,this.tokenizer.ignore(c.size);case 52:return e.abrupt("break",53);case 53:u++,e.next=4;break;case 56:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseDescriptorExpansion",value:function(){var e=c(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.ignore(t);case 2:return e.abrupt("return",this.parseHeader());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseHeader",value:function(){var e=c(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(z.Header);case 2:return t=e.sent,this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",t.bitsPerSample),this.metadata.setFormat("sampleRate",t.sampleRate),this.metadata.setFormat("numberOfChannels",t.channel),this.metadata.setFormat("duration",o.calculateDuration(t)),e.abrupt("return",{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],[{key:"tryParseApeHeader",value:function(e,t,r){var n=new o;return n.init(e,t,r),n.tryParseApeHeader()}},{key:"calculateDuration",value:function(e){var t=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return(t+=e.finalFrameBlocks)/e.sampleRate}},{key:"findApeFooterOffset",value:function(){var e=c(i().mark(function e(r,n){var o,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.alloc(z.TagFooter.len),e.next=3,r.randomRead(o,0,z.TagFooter.len,n-z.TagFooter.len);case 3:if("APETAGEX"!==(a=z.TagFooter.get(o,0)).ID){e.next=7;break}return O("APE footer header at offset=".concat(n)),e.abrupt("return",{footer:a,offset:n-a.size});case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"parseTagFooter",value:function(e,t,r){var n=z.TagFooter.get(t,t.length-z.TagFooter.len);if(n.ID!==j)throw new Error("Unexpected APEv2 Footer ID preamble value.");x.fromBuffer(t);var a=new o;return a.init(e,x.fromBuffer(t),r),a.parseTags(n)}}]),o}();exports.APEv2Parser=F;
},{"debug":"jD9Y","strtok3/lib/core":"tvmF","token-types":"rOYN","../common/Util":"e0Mm","../common/BasicParser":"O0hF","./APEv2Token":"xQQP","buffer":"qcot"}],"WTnS":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(G){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:x(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(G){return{type:"throw",arg:G}}}t.wrap=f;var p={};function y(){}function d(){}function v(){}var g={};l(g,u,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(T([])));b&&b!==e&&o.call(b,u)&&(g=b);var k=v.prototype=y.prototype=Object.create(g);function w(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=R(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function R(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,R(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=v,i(k,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:d,configurable:!0}),d.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},w(P.prototype),l(P.prototype,c,function(){return this}),t.AsyncIterator=P,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new P(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(k),l(k,s,"Generator"),l(k,u,function(){return this}),l(k,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function u(t){o(a,n,i,u,c,"next",t)}function c(t){o(a,n,i,u,c,"throw",t)}u(void 0)})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=l(t,"string");return"symbol"===r(e)?e:String(e)}function l(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=h(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=m();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasID3v1Header=exports.ID3v1Parser=exports.Genres=void 0;var k=require("debug"),w=require("token-types"),P=require("../common/Util"),x=require("../common/BasicParser"),R=require("../apev2/APEv2Parser"),S=(0,k.default)("music-metadata:parser:ID3v1");exports.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];var E={len:128,get:function(t,e){var r=new O(3).get(t,e);return"TAG"===r?{header:r,title:new O(30).get(t,e+3),artist:new O(30).get(t,e+33),album:new O(30).get(t,e+63),year:new O(4).get(t,e+93),comment:new O(28).get(t,e+97),zeroByte:w.UINT8.get(t,e+127),track:w.UINT8.get(t,e+126),genre:w.UINT8.get(t,e+127)}:null}},O=function(t){p(r,w.StringType);var e=d(r);function r(t){return a(this,r),e.call(this,t,"binary")}return c(r,[{key:"get",value:function(t,e){var n=f(b(r.prototype),"get",this).call(this,t,e);return(n=(n=P.trimRightNull(n)).trim()).length>0?n:void 0}}]),r}(),T=function(t){p(r,x.BasicParser);var e=d(r);function r(){return a(this,r),e.apply(this,arguments)}return c(r,[{key:"parse",value:function(){var t=i(n().mark(function t(){var e,o,i,a,u,c,s;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tokenizer.fileInfo.size){t.next=3;break}return S("Skip checking for ID3v1 because the file-size is unknown"),t.abrupt("return");case 3:if(!this.options.apeHeader){t.next=9;break}return this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position),(e=new R.APEv2Parser).init(this.metadata,this.tokenizer,this.options),t.next=9,e.parseTags(this.options.apeHeader.footer);case 9:if(o=this.tokenizer.fileInfo.size-E.len,!(this.tokenizer.position>o)){t.next=13;break}return S("Already consumed the last 128 bytes"),t.abrupt("return");case 13:return t.next=15,this.tokenizer.readToken(E,o);case 15:if(i=t.sent){for(S("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-E.len),a=0,u=["title","artist","album","comment","track","year"];a<u.length;a++)i[c=u[a]]&&""!==i[c]&&this.addTag(c,i[c]);(s=r.getGenre(i.genre))&&this.addTag("genre",s)}else S("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-E.len);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"addTag",value:function(t,e){this.metadata.addTag("ID3v1",t,e)}}],[{key:"getGenre",value:function(t){if(t<exports.Genres.length)return exports.Genres[t]}}]),r}();function L(t){return G.apply(this,arguments)}function G(){return(G=i(n().mark(function t(r){var o;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.fileSize>=128)){t.next=5;break}return o=e.alloc(3),t.next=4,r.randomRead(o,0,o.length,r.fileSize-128);case 4:return t.abrupt("return","TAG"===o.toString("binary"));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.ID3v1Parser=T,exports.hasID3v1Header=L;
},{"debug":"jD9Y","token-types":"rOYN","../common/Util":"e0Mm","../common/BasicParser":"O0hF","../apev2/APEv2Parser":"IhDz","buffer":"qcot"}],"toCx":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i(a.key),a)}}function n(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw i}}}}function s(e,r){if(e){if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrameParser=exports.parseGenre=void 0;var u=require("debug"),d=require("token-types"),f=require("../common/Util"),p=require("./ID3v2Token"),g=require("../id3v1/ID3v1Parser"),m=(0,u.default)("music-metadata:id3v2:frame-parser"),y="latin1";function v(e){var r,t,a=[],n="",i=c(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if("string"==typeof r)if("("===o&&""===r)n+="(",r=void 0;else if(")"===o){""!==n&&(a.push(n),n="");var s=h(r);s&&a.push(s),r=void 0}else r+=o;else"("===o?r="":n+=o}}catch(l){i.e(l)}finally{i.f()}return n&&(0===a.length&&n.match(/^\d*$/)&&(n=g.Genres[n]),a.push(n)),a}function h(e){return"RX"===e?"Remix":"CR"===e?"Cover":e.match(/^\d*$/)?g.Genres[e]:void 0}exports.parseGenre=v;var b=function(){function r(e,a){t(this,r),this.major=e,this.warningCollector=a}return n(r,[{key:"readData",value:function(t,a,n){if(0!==t.length){var i,o=p.TextEncodingToken.get(t,0),c=o.encoding,s=o.bom,l=t.length,u=0,g=[],h=r.getNullTerminatorLength(c),b={};switch(m("Parsing tag type=".concat(a,", encoding=").concat(c,", bom=").concat(s)),"TXXX"!==a&&"T"===a[0]?"T*":a){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":var S;try{S=f.decodeString(t.slice(1),c).replace(/\x00+$/,"")}catch(j){this.warningCollector.addWarning("id3v2.".concat(this.major," type=").concat(a," header has invalid string value: ").concat(j.message))}switch(a){case"TMCL":case"TIPL":case"IPLS":g=this.splitValue(a,S),g=r.functionList(g);break;case"TRK":case"TRCK":case"TPOS":g=S;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":g=this.splitValue(a,S);break;case"TCO":case"TCON":g=this.splitValue(a,S).map(function(e){return v(e)}).reduce(function(e,r){return e.concat(r)},[]);break;case"PCS":case"PCST":g=this.major>=4?this.splitValue(a,S):[S],g=Array.isArray(g)&&""===g[0]?1:0;break;default:g=this.major>=4?this.splitValue(a,S):[S]}break;case"TXXX":g={description:(g=r.readIdentifierAndData(t,u+1,l,c)).id,text:this.splitValue(a,f.decodeString(g.data,c).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(n){var T={};switch(u+=1,this.major){case 2:T.format=f.decodeString(t.slice(u,u+3),"latin1"),u+=3;break;case 3:case 4:i=f.findZero(t,u,l,y),T.format=f.decodeString(t.slice(u,i),y),u=i+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}T.format=r.fixPictureMimeType(T.format),T.type=p.AttachedPictureType[t[u]],u+=1,i=f.findZero(t,u,l,c),T.description=f.decodeString(t.slice(u,i),c),u=i+h,T.data=e.from(t.slice(u,l)),g=T}break;case"CNT":case"PCNT":g=d.UINT32_BE.get(t,0);break;case"SYLT":for(u+=7,g=[];u<l;){var k=t.slice(u,u=f.findZero(t,u,l,c));u+=5,g.push(f.decodeString(k,c))}break;case"ULT":case"USLT":case"COM":case"COMM":u+=1,b.language=f.decodeString(t.slice(u,u+3),y),u+=3,i=f.findZero(t,u,l,c),b.description=f.decodeString(t.slice(u,i),c),u=i+h,b.text=f.decodeString(t.slice(u,l),c).replace(/\x00+$/,""),g=[b];break;case"UFID":g={owner_identifier:(g=r.readIdentifierAndData(t,u,l,y)).id,identifier:g.data};break;case"PRIV":g={owner_identifier:(g=r.readIdentifierAndData(t,u,l,y)).id,data:g.data};break;case"POPM":i=f.findZero(t,u,l,y);var P=f.decodeString(t.slice(u,i),y),C=l-(u=i+1);g={email:P,rating:d.UINT8.get(t,u),counter:C>=5?d.UINT32_BE.get(t,u+1):void 0};break;case"GEOB":i=f.findZero(t,u+1,l,c);var w=f.decodeString(t.slice(u+1,i),y);u=i+1,i=f.findZero(t,u,l-u,c);var I=f.decodeString(t.slice(u,i),y);u=i+1,i=f.findZero(t,u,l-u,c),g={type:w,filename:I,description:f.decodeString(t.slice(u,i),y),data:t.slice(u+1,l)};break;case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":g=f.decodeString(t.slice(u,i),y);break;case"WXXX":i=f.findZero(t,u+1,l,c);var O=f.decodeString(t.slice(u+1,i),c);u=i+("utf16le"===c?2:1),g={description:O,url:f.decodeString(t.slice(u,l),y)};break;case"WFD":case"WFED":g=f.decodeString(t.slice(u+1,f.findZero(t,u+1,l,c)),c);break;case"MCDI":g=t.slice(0,l);break;default:m("Warning: unsupported id3v2-tag-type: "+a)}return g}this.warningCollector.addWarning("id3v2.".concat(this.major," header has empty tag type=").concat(a))}},{key:"splitValue",value:function(e,t){var a;return this.major<4?(a=t.split(/\x00/g)).length>1?this.warningCollector.addWarning("ID3v2.".concat(this.major," ").concat(e," uses non standard null-separator.")):a=t.split(/\//g):a=t.split(/\x00/g),r.trimArray(a)}}],[{key:"fixPictureMimeType",value:function(e){switch(e=e.toLocaleLowerCase()){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}},{key:"functionList",value:function(e){for(var r={},t=0;t+1<e.length;t+=2){var a=e[t+1].split(",");r[e[t]]=r.hasOwnProperty(e[t])?r[e[t]].concat(a):a}return r}},{key:"trimArray",value:function(e){return e.map(function(e){return e.replace(/\x00+$/,"").trim()})}},{key:"readIdentifierAndData",value:function(e,t,a,n){var i=f.findZero(e,t,a,n),o=f.decodeString(e.slice(t,i),n);return t=i+r.getNullTerminatorLength(n),{id:o,data:e.slice(t,a)}}},{key:"getNullTerminatorLength",value:function(e){return"utf16le"===e?2:1}}]),r}();exports.FrameParser=b;
},{"debug":"jD9Y","token-types":"rOYN","../common/Util":"e0Mm","./ID3v2Token":"ujrG","../id3v1/ID3v1Parser":"WTnS","buffer":"qcot"}],"pIqu":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var e,t=require("buffer").Buffer;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){"use strict";o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(S){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),u=new j(n||[]);return a(o,"_invoke",{value:E(e,r,u)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(S){return{type:"throw",arg:S}}}e.wrap=f;var h={};function v(){}function p(){}function y(){}var g={};l(g,u,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(_([])));w&&w!==t&&n.call(w,u)&&(g=w);var b=y.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var i;a(this,"_invoke",{value:function(a,o){function u(){return new t(function(i,u){!function a(i,o,u,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){a("next",e,u,c)},function(e){a("throw",e,u,c)}):t.resolve(f).then(function(e){l.value=e,u(l)},function(e){return a("throw",e,u,c)})}c(s.arg)}(a,o,i,u)})}return i=i?i.then(u,u):u()}})}function E(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return D()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=I(o,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function I(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(k.prototype),l(k.prototype,c,function(){return this}),e.AsyncIterator=k,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new k(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(b),l(b,s,"Generator"),l(b,u,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function u(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){u(i,n,a,o,c,"next",e)}function c(e){u(i,n,a,o,c,"throw",e)}o(void 0)})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=h(e,"string");return"symbol"===r(t)?t:String(t)}function h(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v2Parser=void 0;var v=require("token-types"),p=require("../common/Util"),y=require("./FrameParser"),g=require("./ID3v2Token"),m=function(){function e(){s(this,e)}return f(e,[{key:"parse",value:function(){var e=c(o().mark(function e(t,r,n){var a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.tokenizer=r,this.metadata=t,this.options=n,e.next=5,this.tokenizer.readToken(g.ID3v2Header);case 5:if("ID3"===(a=e.sent).fileIdentifier){e.next=8;break}throw new Error("expected ID3-header file-identifier 'ID3' was not found");case 8:return this.id3Header=a,this.headerType="ID3v2."+a.version.major,e.abrupt("return",a.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(a.size));case 11:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"parseExtendedHeader",value:function(){var e=c(o().mark(function e(){var t,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(g.ExtendedHeader);case 2:return t=e.sent,r=t.size-g.ExtendedHeader.len,e.abrupt("return",r>0?this.parseExtendedHeaderData(r,t.size):this.parseId3Data(this.id3Header.size-t.size));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseExtendedHeaderData",value:function(){var e=c(o().mark(function e(t,r){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.ignore(t);case 2:return e.abrupt("return",this.parseId3Data(this.id3Header.size-r));case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"parseId3Data",value:function(){var t=c(o().mark(function t(r){var a,i,u,c,s,l,f,d,h,p,y,g,m,w,b,x;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new v.Uint8ArrayType(r));case 2:a=t.sent,i=n(this.parseMetadata(a));try{for(i.s();!(u=i.n()).done;)if("TXXX"===(c=u.value).id){if(c.value){s=n(c.value.text);try{for(s.s();!(l=s.n()).done;)f=l.value,this.addTag(e.makeDescriptionTagName(c.id,c.value.description),f)}catch(o){s.e(o)}finally{s.f()}}}else if("COM"===c.id){d=n(c.value);try{for(d.s();!(h=d.n()).done;)p=h.value,this.addTag(e.makeDescriptionTagName(c.id,p.description),p.text)}catch(o){d.e(o)}finally{d.f()}}else if("COMM"===c.id){y=n(c.value);try{for(y.s();!(g=y.n()).done;)m=g.value,this.addTag(e.makeDescriptionTagName(c.id,m.description),m)}catch(o){y.e(o)}finally{y.f()}}else if(Array.isArray(c.value)){w=n(c.value);try{for(w.s();!(b=w.n()).done;)x=b.value,this.addTag(c.id,x)}catch(o){w.e(o)}finally{w.f()}}else this.addTag(c.id,c.value)}catch(o){i.e(o)}finally{i.f()}case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addTag",value:function(e,t){this.metadata.addTag(this.headerType,e,t)}},{key:"parseMetadata",value:function(t){for(var r=0,n=[];r!==t.length;){var a=e.getFrameHeaderLength(this.id3Header.version.major);if(r+a>t.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}var i=t.slice(r,r+=a),o=this.readFrameHeader(i,this.id3Header.version.major),u=t.slice(r,r+=o.length),c=e.readFrameData(u,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);c&&n.push({id:o.id,value:c})}return n}},{key:"readFrameHeader",value:function(r,n){var a;switch(n){case 2:(a={id:t.from(r.slice(0,3)).toString("ascii"),length:v.UINT24_BE.get(r,3)}).id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning("Invalid ID3v2.".concat(this.id3Header.version.major," frame-header-ID: ").concat(a.id));break;case 3:case 4:(a={id:t.from(r.slice(0,4)).toString("ascii"),length:(4===n?g.UINT32SYNCSAFE:v.UINT32_BE).get(r,4),flags:e.readFrameFlags(r.slice(8,10))}).id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning("Invalid ID3v2.".concat(this.id3Header.version.major," frame-header-ID: ").concat(a.id));break;default:throw new Error("Unexpected majorVer: "+n)}return a}}],[{key:"removeUnsyncBytes",value:function(e){for(var t=0,r=0;t<e.length-1;)t!==r&&(e[r]=e[t]),t+=255===e[t]&&0===e[t+1]?2:1,r++;return t<e.length&&(e[r++]=e[t]),e.slice(0,r)}},{key:"getFrameHeaderLength",value:function(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}},{key:"readFrameFlags",value:function(e){return{status:{tag_alter_preservation:p.getBit(e,0,6),file_alter_preservation:p.getBit(e,0,5),read_only:p.getBit(e,0,4)},format:{grouping_identity:p.getBit(e,1,7),compression:p.getBit(e,1,3),encryption:p.getBit(e,1,2),unsynchronisation:p.getBit(e,1,1),data_length_indicator:p.getBit(e,1,0)}}}},{key:"readFrameData",value:function(t,r,n,a,i){var o=new y.FrameParser(n,i);switch(n){case 2:return o.readData(t,r.id,a);case 3:case 4:return r.flags.format.unsynchronisation&&(t=e.removeUnsyncBytes(t)),r.flags.format.data_length_indicator&&(t=t.slice(4,t.length)),o.readData(t,r.id,a);default:throw new Error("Unexpected majorVer: "+n)}}},{key:"makeDescriptionTagName",value:function(e,t){return e+(t?":"+t:"")}}]),e}();exports.ID3v2Parser=m;
},{"token-types":"rOYN","../common/Util":"e0Mm","./FrameParser":"toCx","./ID3v2Token":"ujrG","buffer":"qcot"}],"Hvar":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(r){var t=i(r,"string");return"symbol"===e(t)?t:String(t)}function i(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Common=void 0;var a=require("token-types"),u=require("../common/FourCC"),s=function(){function e(t,n){r(this,e),this.isAifc=n;var o=n?22:18;if(t.chunkSize<o)throw new Error("COMMON CHUNK size should always be at least ".concat(o));this.len=t.chunkSize}return n(e,[{key:"get",value:function(e,r){var t=e.readUInt16BE(r+8)-16398,n=e.readUInt16BE(r+8+2),o={numChannels:e.readUInt16BE(r),numSampleFrames:e.readUInt32BE(r+2),sampleSize:e.readUInt16BE(r+6),sampleRate:t<0?n>>Math.abs(t):n<<t};if(this.isAifc){if(o.compressionType=u.FourCcToken.get(e,r+18),this.len>22){var i=e.readInt8(r+22);if(i>0){if(23+i+(i+1)%2!==this.len)throw new Error("Illegal pstring length");o.compressionName=new a.StringType(i,"binary").get(e,r+23)}else o.compressionName=void 0}}else o.compressionName="PCM";return o}}]),e}();exports.Common=s;
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"rTYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var e=require("token-types"),r=require("../common/FourCC");exports.Header={len:8,get:function(t,o){return{chunkID:r.FourCcToken.get(t,o),chunkSize:Number(BigInt(e.UINT32_BE.get(t,o+4)))}}};
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"C2dR":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(P){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new L(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}r.wrap=l;var p={};function d(){}function y(){}function m(){}var v={};f(v,u,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(S([])));w&&w!==n&&o.call(w,u)&&(v=w);var g=m.prototype=d.prototype=Object.create(v);function k(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function x(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=F(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function F(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:I}}function I(){return{value:void 0,done:!0}}return y.prototype=m,i(g,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=f(m,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},r.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,c,function(){return this}),r.AsyncIterator=x,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new x(l(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(g),f(g,s,"Generator"),f(g,u,function(){return this}),f(g,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AIFFParser=void 0;var m=require("token-types"),v=require("debug"),b=require("strtok3/lib/core"),w=require("../id3v2/ID3v2Parser"),g=require("../common/FourCC"),k=require("../common/BasicParser"),x=require("./AiffToken"),E=require("../iff"),F=(0,v.default)("music-metadata:parser:aiff"),O={NONE:"not compressed\tPCM\tApple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float\tApple Computer",alaw:"ALaw 2:1\t8-bit ITU-T G.711 A-law",ulaw:"Law 2:1\t8-bit ITU-T G.711 -law\tApple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32\tIEEE 32-bit float "},T=function(t){s(i,k.BasicParser);var r=l(i);function i(){return o(this,i),r.apply(this,arguments)}return a(i,[{key:"parse",value:function(){var t=n(e().mark(function t(){var r,n,o,i;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(E.Header);case 2:if("FORM"===t.sent.chunkID){t.next=5;break}throw new Error("Invalid Chunk-ID, expected 'FORM'");case 5:return t.next=7,this.tokenizer.readToken(g.FourCcToken);case 7:r=t.sent,t.t0=r,t.next="AIFF"===t.t0?11:"AIFC"===t.t0?14:17;break;case 11:return this.metadata.setFormat("container",r),this.isCompressed=!1,t.abrupt("break",18);case 14:return this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0,t.abrupt("break",18);case 17:throw Error("Unsupported AIFF type: "+r);case 18:this.metadata.setFormat("lossless",!this.isCompressed),t.prev=19;case 20:if(this.tokenizer.fileInfo.size&&!(this.tokenizer.fileInfo.size-this.tokenizer.position>=E.Header.len)){t.next=33;break}return F("Reading AIFF chunk at offset="+this.tokenizer.position),t.next=24,this.tokenizer.readToken(E.Header);case 24:return n=t.sent,o=2*Math.round(n.chunkSize/2),t.next=28,this.readData(n);case 28:return i=t.sent,t.next=31,this.tokenizer.ignore(o-i);case 31:t.next=20;break;case 33:t.next=42;break;case 35:if(t.prev=35,t.t1=t.catch(19),!(t.t1 instanceof b.EndOfStreamError)){t.next=41;break}F("End-of-stream"),t.next=42;break;case 41:throw t.t1;case 42:case"end":return t.stop()}},t,this,[[19,35]])}));return function(){return t.apply(this,arguments)}}()},{key:"readData",value:function(){var t=n(e().mark(function t(r){var n,o,i,a;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.chunkID,t.next="COMM"===t.t0?3:"ID3 "===t.t0?13:"SSND"===t.t0?20:"NAME"===t.t0?22:"AUTH"===t.t0?22:"(c) "===t.t0?22:"ANNO"===t.t0?22:23;break;case 3:return t.next=5,this.tokenizer.readToken(new x.Common(r,this.isCompressed));case 5:return o=t.sent,this.metadata.setFormat("bitsPerSample",o.sampleSize),this.metadata.setFormat("sampleRate",o.sampleRate),this.metadata.setFormat("numberOfChannels",o.numChannels),this.metadata.setFormat("numberOfSamples",o.numSampleFrames),this.metadata.setFormat("duration",o.numSampleFrames/o.sampleRate),this.metadata.setFormat("codec",null!==(n=o.compressionName)&&void 0!==n?n:O[o.compressionType]),t.abrupt("return",r.chunkSize);case 13:return t.next=15,this.tokenizer.readToken(new m.Uint8ArrayType(r.chunkSize));case 15:return i=t.sent,a=b.fromBuffer(i),t.next=19,(new w.ID3v2Parser).parse(this.metadata,a,this.options);case 19:return t.abrupt("return",r.chunkSize);case 20:return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*r.chunkSize/this.metadata.format.duration),t.abrupt("return",0);case 22:return t.abrupt("return",this.readTextChunk(r));case 23:return F("Ignore chunk id=".concat(r.chunkID,", size=").concat(r.chunkSize)),t.abrupt("return",0);case 25:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readTextChunk",value:function(){var t=n(e().mark(function t(r){var n=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new m.StringType(r.chunkSize,"ascii"));case 2:return t.sent.split("\0").map(function(t){return t.trim()}).filter(function(t){return t&&t.length>0}).forEach(function(t){n.metadata.addTag("AIFF",r.chunkID,t.trim())}),t.abrupt("return",r.chunkSize);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),i}();exports.AIFFParser=T;
},{"token-types":"rOYN","debug":"jD9Y","strtok3/lib/core":"tvmF","../id3v2/ID3v2Parser":"pIqu","../common/FourCC":"P2sd","../common/BasicParser":"O0hF","./AiffToken":"Hvar","../iff":"rTYW"}],"SsVx":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var n=o(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0});var C=function(){function t(e){n(this,t),this.str=e}return i(t,[{key:"equals",value:function(e){return this.str===e.str}},{key:"toBin",value:function(){return t.encode(this.str)}}],[{key:"fromBin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(this.decode(e,n))}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e.readUInt32LE(t).toString(16)+"-"+e.readUInt16LE(t+4).toString(16)+"-"+e.readUInt16LE(t+6).toString(16)+"-"+e.readUInt16BE(t+8).toString(16)+"-"+e.slice(t+10,t+16).toString("hex")).toUpperCase()}},{key:"decodeMediaType",value:function(e){switch(e.str){case t.AudioMedia.str:return"audio";case t.VideoMedia.str:return"video";case t.CommandMedia.str:return"command";case t.Degradable_JPEG_Media.str:return"degradable-jpeg";case t.FileTransferMedia.str:return"file-transfer";case t.BinaryMedia.str:return"binary"}}},{key:"encode",value:function(t){var n=e.alloc(16);return n.writeUInt32LE(parseInt(t.slice(0,8),16),0),n.writeUInt16LE(parseInt(t.slice(9,13),16),4),n.writeUInt16LE(parseInt(t.slice(14,18),16),6),e.from(t.slice(19,23),"hex").copy(n,8),e.from(t.slice(24),"hex").copy(n,10),n}}]),t}();C.HeaderObject=new C("75B22630-668E-11CF-A6D9-00AA0062CE6C"),C.DataObject=new C("75B22636-668E-11CF-A6D9-00AA0062CE6C"),C.SimpleIndexObject=new C("33000890-E5B1-11CF-89F4-00A0C90349CB"),C.IndexObject=new C("D6E229D3-35DA-11D1-9034-00A0C90349BE"),C.MediaObjectIndexObject=new C("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),C.TimecodeIndexObject=new C("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),C.FilePropertiesObject=new C("8CABDCA1-A947-11CF-8EE4-00C00C205365"),C.StreamPropertiesObject=new C("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),C.HeaderExtensionObject=new C("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),C.CodecListObject=new C("86D15240-311D-11D0-A3A4-00A0C90348F6"),C.ScriptCommandObject=new C("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),C.MarkerObject=new C("F487CD01-A951-11CF-8EE6-00C00C205365"),C.BitrateMutualExclusionObject=new C("D6E229DC-35DA-11D1-9034-00A0C90349BE"),C.ErrorCorrectionObject=new C("75B22635-668E-11CF-A6D9-00AA0062CE6C"),C.ContentDescriptionObject=new C("75B22633-668E-11CF-A6D9-00AA0062CE6C"),C.ExtendedContentDescriptionObject=new C("D2D0A440-E307-11D2-97F0-00A0C95EA850"),C.ContentBrandingObject=new C("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),C.StreamBitratePropertiesObject=new C("7BF875CE-468D-11D1-8D82-006097C9A2B2"),C.ContentEncryptionObject=new C("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),C.ExtendedContentEncryptionObject=new C("298AE614-2622-4C17-B935-DAE07EE9289C"),C.DigitalSignatureObject=new C("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),C.PaddingObject=new C("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),C.ExtendedStreamPropertiesObject=new C("14E6A5CB-C672-4332-8399-A96952065B5A"),C.AdvancedMutualExclusionObject=new C("A08649CF-4775-4670-8A16-6E35357566CD"),C.GroupMutualExclusionObject=new C("D1465A40-5A79-4338-B71B-E36B8FD6C249"),C.StreamPrioritizationObject=new C("D4FED15B-88D3-454F-81F0-ED5C45999E24"),C.BandwidthSharingObject=new C("A69609E6-517B-11D2-B6AF-00C04FD908E9"),C.LanguageListObject=new C("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),C.MetadataObject=new C("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),C.MetadataLibraryObject=new C("44231C94-9498-49D1-A141-1D134E457054"),C.IndexParametersObject=new C("D6E229DF-35DA-11D1-9034-00A0C90349BE"),C.MediaObjectIndexParametersObject=new C("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),C.TimecodeIndexParametersObject=new C("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),C.CompatibilityObject=new C("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),C.AdvancedContentEncryptionObject=new C("43058533-6981-49E6-9B74-AD12CB86D58C"),C.AudioMedia=new C("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),C.VideoMedia=new C("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),C.CommandMedia=new C("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),C.JFIF_Media=new C("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),C.Degradable_JPEG_Media=new C("35907DE0-E415-11CF-A917-00805F5C442B"),C.FileTransferMedia=new C("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),C.BinaryMedia=new C("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),C.ASF_Index_Placeholder_Object=new C("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),exports.default=C;
},{"buffer":"qcot"}],"VWU3":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,u(n.key),n)}}function o(r,t,e){return t&&n(r.prototype,t),e&&n(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function u(r){var e=i(r,"string");return"symbol"===t(e)?e:String(e)}function i(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfUtil=void 0;var a=require("token-types"),l=require("../common/Util"),f=function(){function t(){e(this,t)}return o(t,null,[{key:"getParserForAttr",value:function(r){return t.attributeParsers[r]}},{key:"parseUnicodeAttr",value:function(r){return l.stripNulls(l.decodeString(r,"utf16le"))}},{key:"parseByteArrayAttr",value:function(t){return r.from(t)}},{key:"parseBoolAttr",value:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1===t.parseWordAttr(r,e)}},{key:"parseDWordAttr",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.readUInt32LE(t)}},{key:"parseQWordAttr",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a.UINT64_LE.get(r,t)}},{key:"parseWordAttr",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.readUInt16LE(t)}}]),t}();f.attributeParsers=[f.parseUnicodeAttr,f.parseByteArrayAttr,f.parseBoolAttr,f.parseDWordAttr,f.parseQWordAttr,f.parseWordAttr,f.parseByteArrayAttr],exports.AsfUtil=f;
},{"token-types":"rOYN","../common/Util":"e0Mm","buffer":"qcot"}],"RkL5":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(){"use strict";r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(k){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new I(n||[]);return o(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(k){return{type:"throw",arg:k}}}t.wrap=f;var d={};function h(){}function v(){}function y(){}var g={};s(g,a,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,a)&&(g=b);var x=y.prototype=h.prototype=Object.create(g);function E(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==p(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,a,u)},function(t){r("throw",t,a,u)}):e.resolve(f).then(function(t){s.value=t,a(s)},function(t){return r("throw",t,a,u)})}u(c.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return U()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=j(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:U}}function U(){return{value:void 0,done:!0}}return v.prototype=y,o(x,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(x),s(x,c,"Generator"),s(x,a,function(){return this}),s(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=f();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function v(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=g(t,"string");return"symbol"===p(e)?e:String(e)}function g(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WmPictureToken=exports.MetadataLibraryObjectState=exports.MetadataObjectState=exports.ExtendedStreamPropertiesObjectState=exports.ExtendedContentDescriptionObjectState=exports.ContentDescriptionObjectState=exports.readCodecEntries=exports.HeaderExtensionObject=exports.StreamPropertiesObject=exports.FilePropertiesObject=exports.IgnoreObjectState=exports.State=exports.HeaderObjectToken=exports.TopLevelHeaderObjectToken=exports.DataType=void 0;var m,b=require("../common/Util"),x=require("token-types"),E=require("./GUID"),L=require("./AsfUtil"),w=require("../id3v2/ID3v2Token");!function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"}(m=exports.DataType||(exports.DataType={})),exports.TopLevelHeaderObjectToken={len:30,get:function(t,e){return{objectId:E.default.fromBin(new x.BufferType(16).get(t,e)),objectSize:Number(x.UINT64_LE.get(t,e+16)),numberOfHeaderObjects:x.UINT32_LE.get(t,e+24)}}},exports.HeaderObjectToken={len:24,get:function(t,e){return{objectId:E.default.fromBin(new x.BufferType(16).get(t,e)),objectSize:Number(x.UINT64_LE.get(t,e+16))}}};var j=function(){function t(e){d(this,t),this.len=Number(e.objectSize)-exports.HeaderObjectToken.len}return v(t,[{key:"postProcessTag",value:function(t,e,r,n){if("WM/Picture"===e)t.push({id:e,value:W.fromBuffer(n)});else{var o=L.AsfUtil.getParserForAttr(r);if(!o)throw new Error("unexpected value headerType: "+r);t.push({id:e,value:o(n)})}}}]),t}();exports.State=j;var O=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){return null}}]),r}();exports.IgnoreObjectState=O;var T=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){return{fileId:E.default.fromBin(t,e),fileSize:x.UINT64_LE.get(t,e+16),creationDate:x.UINT64_LE.get(t,e+24),dataPacketsCount:x.UINT64_LE.get(t,e+32),playDuration:x.UINT64_LE.get(t,e+40),sendDuration:x.UINT64_LE.get(t,e+48),preroll:x.UINT64_LE.get(t,e+56),flags:{broadcast:b.getBit(t,e+64,24),seekable:b.getBit(t,e+64,25)},minimumDataPacketSize:x.UINT32_LE.get(t,e+68),maximumDataPacketSize:x.UINT32_LE.get(t,e+72),maximumBitrate:x.UINT32_LE.get(t,e+76)}}}]),r}();T.guid=E.default.FilePropertiesObject,exports.FilePropertiesObject=T;var I=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){return{streamType:E.default.decodeMediaType(E.default.fromBin(t,e)),errorCorrectionType:E.default.fromBin(t,e+8)}}}]),r}();I.guid=E.default.StreamPropertiesObject,exports.StreamPropertiesObject=I;var S=function(){function t(){d(this,t),this.len=22}return v(t,[{key:"get",value:function(t,e){return{reserved1:E.default.fromBin(t,e),reserved2:t.readUInt16LE(e+16),extensionDataSize:t.readUInt32LE(e+18)}}}]),t}();S.guid=E.default.HeaderExtensionObject,exports.HeaderExtensionObject=S;var U={len:20,get:function(t,e){return{entryCount:t.readUInt16LE(e+16)}}};function k(t){return P.apply(this,arguments)}function P(){return(P=o(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readNumber(x.UINT16_LE);case 2:return n=t.sent,t.next=5,e.readToken(new x.StringType(2*n,"utf16le"));case 5:return t.abrupt("return",t.sent.replace("\0",""));case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function _(t){return N.apply(this,arguments)}function N(){return(N=o(r().mark(function t(e){var n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readToken(U);case 2:n=t.sent,o=[],i=0;case 5:if(!(i<n.entryCount)){t.next=14;break}return t.t0=o,t.next=9,C(e);case 9:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 11:++i,t.next=5;break;case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}},t)}))).apply(this,arguments)}function B(t){return D.apply(this,arguments)}function D(){return(D=o(r().mark(function t(n){var o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.readNumber(x.UINT16_LE);case 2:return o=t.sent,i=e.alloc(o),t.next=6,n.readBuffer(i);case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return(A=o(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readNumber(x.UINT16_LE);case 2:return n=t.sent,t.t0={videoCodec:1==(1&n),audioCodec:2==(2&n)},t.next=6,k(e);case 6:return t.t1=t.sent,t.next=9,k(e);case 9:return t.t2=t.sent,t.next=12,B(e);case 12:return t.t3=t.sent,t.abrupt("return",{type:t.t0,codecName:t.t1,description:t.t2,information:t.t3});case 14:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.readCodecEntries=_;var F=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){for(var n=[],o=e+10,i=0;i<r.contentDescTags.length;++i){var a=t.readUInt16LE(e+2*i);if(a>0){var u=r.contentDescTags[i],c=o+a;n.push({id:u,value:L.AsfUtil.parseUnicodeAttr(t.slice(o,c))}),o=c}}return n}}]),r}();F.guid=E.default.ContentDescriptionObject,F.contentDescTags=["Title","Author","Copyright","Description","Rating"],exports.ContentDescriptionObjectState=F;var z=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){for(var r=[],n=t.readUInt16LE(e),o=e+2,i=0;i<n;i+=1){var a=t.readUInt16LE(o);o+=2;var u=L.AsfUtil.parseUnicodeAttr(t.slice(o,o+a));o+=a;var c=t.readUInt16LE(o);o+=2;var s=t.readUInt16LE(o);o+=2;var f=t.slice(o,o+s);o+=s,this.postProcessTag(r,u,c,f)}return r}}]),r}();z.guid=E.default.ExtendedContentDescriptionObject,exports.ExtendedContentDescriptionObjectState=z;var G=function(t){i(r,j);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r,[{key:"get",value:function(t,e){return{startTime:x.UINT64_LE.get(t,e),endTime:x.UINT64_LE.get(t,e+8),dataBitrate:t.readInt32LE(e+12),bufferSize:t.readInt32LE(e+16),initialBufferFullness:t.readInt32LE(e+20),alternateDataBitrate:t.readInt32LE(e+24),alternateBufferSize:t.readInt32LE(e+28),alternateInitialBufferFullness:t.readInt32LE(e+32),maximumObjectSize:t.readInt32LE(e+36),flags:{reliableFlag:b.getBit(t,e+40,0),seekableFlag:b.getBit(t,e+40,1),resendLiveCleanpointsFlag:b.getBit(t,e+40,2)},streamNumber:t.readInt16LE(e+42),streamLanguageId:t.readInt16LE(e+44),averageTimePerFrame:t.readInt32LE(e+52),streamNameCount:t.readInt32LE(e+54),payloadExtensionSystems:t.readInt32LE(e+56),streamNames:[],streamPropertiesObject:null}}}]),r}();G.guid=E.default.ExtendedStreamPropertiesObject,exports.ExtendedStreamPropertiesObjectState=G;var H=function(t){i(n,j);var r=u(n);function n(t){return d(this,n),r.call(this,t)}return v(n,[{key:"get",value:function(t,r){for(var n=[],o=e.from(t),i=o.readUInt16LE(r),a=r+2,u=0;u<i;u+=1){a+=4;var c=o.readUInt16LE(a);a+=2;var s=o.readUInt16LE(a);a+=2;var f=o.readUInt32LE(a);a+=4;var l=L.AsfUtil.parseUnicodeAttr(o.slice(a,a+c));a+=c;var p=o.slice(a,a+f);a+=f,this.postProcessTag(n,l,s,p)}return n}}]),n}();H.guid=E.default.MetadataObject,exports.MetadataObjectState=H;var M=function(t){i(r,H);var e=u(r);function r(t){return d(this,r),e.call(this,t)}return v(r)}();M.guid=E.default.MetadataLibraryObject,exports.MetadataLibraryObjectState=M;var W=function(){function t(e){d(this,t),this.len=e}return v(t,[{key:"get",value:function(t,e){for(var r=t.readUInt8(e++),n=t.readInt32LE(e),o=5;0!==t.readUInt16BE(o);)o+=2;for(var i=t.slice(5,o).toString("utf16le");0!==t.readUInt16BE(o);)o+=2;var a=t.slice(5,o).toString("utf16le");return{type:w.AttachedPictureType[r],format:i,description:a,size:n,data:t.slice(o+4)}}}],[{key:"fromBase64",value:function(t){return this.fromBuffer(e.from(t,"base64"))}},{key:"fromBuffer",value:function(e){return new t(e.length).get(e,0)}}]),t}();exports.WmPictureToken=W;
},{"../common/Util":"e0Mm","token-types":"rOYN","./GUID":"SsVx","./AsfUtil":"VWU3","../id3v2/ID3v2Token":"ujrG","buffer":"qcot"}],"EvYH":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(_){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),c=new E(n||[]);return a(i,"_invoke",{value:x(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(_){return{type:"throw",arg:_}}}r.wrap=l;var h={};function p(){}function b(){}function y(){}var v={};f(v,c,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(P([])));g&&g!==n&&o.call(g,c)&&(v=g);var j=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(e,r){var n;a(this,"_invoke",{value:function(a,i){function c(){return new r(function(n,c){!function n(a,i,c,u){var s=d(e[a],e,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(a,i,n,c)})}return n=n?n.then(c,c):c()}})}function x(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=d(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return b.prototype=y,a(j,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=f(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},w(k.prototype),f(k.prototype,u,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new k(l(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(j),f(j,s,"Generator"),f(j,c,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},r}function r(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,u,"next",t)}function u(t){r(i,o,a,c,u,"throw",t)}c(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfParser=void 0;var y=require("debug"),v=require("../type"),m=require("./GUID"),g=require("./AsfObject"),j=require("../common/BasicParser"),w=(0,y.default)("music-metadata:parser:ASF"),k="asf",x=function(t){s(a,j.BasicParser);var r=l(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"parse",value:function(){var t=n(e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(g.TopLevelHeaderObjectToken);case 2:if((r=t.sent).objectId.equals(m.default.HeaderObject)){t.next=5;break}throw new Error("expected asf header; but was not found; got: "+r.objectId.str);case 5:return t.prev=5,t.next=8,this.parseObjectHeader(r.numberOfHeaderObjects);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),w("Error while parsing ASF: %s",t.t0);case 13:case"end":return t.stop()}},t,this,[[5,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"parseObjectHeader",value:function(){var t=n(e().mark(function t(r){var n,o,a,i,c,u,s,f=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(g.HeaderObjectToken);case 2:o=t.sent,w("header GUID=%s",o.objectId.str),t.t0=o.objectId.str,t.next=t.t0===g.FilePropertiesObject.guid.str?7:t.t0===g.StreamPropertiesObject.guid.str?13:t.t0===g.HeaderExtensionObject.guid.str?18:t.t0===g.ContentDescriptionObjectState.guid.str?24:t.t0===g.ExtendedContentDescriptionObjectState.guid.str?29:t.t0===m.default.CodecListObject.str?34:t.t0===m.default.StreamBitratePropertiesObject.str?41:t.t0===m.default.PaddingObject.str?44:48;break;case 7:return t.next=9,this.tokenizer.readToken(new g.FilePropertiesObject(o));case 9:return a=t.sent,this.metadata.setFormat("duration",Number(a.playDuration/BigInt(1e3))/1e4-Number(a.preroll)/1e3),this.metadata.setFormat("bitrate",a.maximumBitrate),t.abrupt("break",52);case 13:return t.next=15,this.tokenizer.readToken(new g.StreamPropertiesObject(o));case 15:return i=t.sent,this.metadata.setFormat("container","ASF/"+i.streamType),t.abrupt("break",52);case 18:return t.next=20,this.tokenizer.readToken(new g.HeaderExtensionObject);case 20:return c=t.sent,t.next=23,this.parseExtensionObject(c.extensionDataSize);case 23:return t.abrupt("break",52);case 24:return t.next=26,this.tokenizer.readToken(new g.ContentDescriptionObjectState(o));case 26:return n=t.sent,this.addTags(n),t.abrupt("break",52);case 29:return t.next=31,this.tokenizer.readToken(new g.ExtendedContentDescriptionObjectState(o));case 31:return n=t.sent,this.addTags(n),t.abrupt("break",52);case 34:return t.next=36,g.readCodecEntries(this.tokenizer);case 36:return(u=t.sent).forEach(function(t){f.metadata.addStreamInfo({type:t.type.videoCodec?v.TrackType.video:v.TrackType.audio,codecName:t.codecName})}),s=u.filter(function(t){return t.type.audioCodec}).map(function(t){return t.codecName}).join("/"),this.metadata.setFormat("codec",s),t.abrupt("break",52);case 41:return t.next=43,this.tokenizer.ignore(o.objectSize-g.HeaderObjectToken.len);case 43:return t.abrupt("break",52);case 44:return w("Padding: %s bytes",o.objectSize-g.HeaderObjectToken.len),t.next=47,this.tokenizer.ignore(o.objectSize-g.HeaderObjectToken.len);case 47:return t.abrupt("break",52);case 48:return this.metadata.addWarning("Ignore ASF-Object-GUID: "+o.objectId.str),w("Ignore ASF-Object-GUID: %s",o.objectId.str),t.next=52,this.tokenizer.readToken(new g.IgnoreObjectState(o));case 52:if(--r){t.next=0;break}case 53:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addTags",value:function(t){var e=this;t.forEach(function(t){e.metadata.addTag(k,t.id,t.value)})}},{key:"parseExtensionObject",value:function(){var t=n(e().mark(function t(r){var n,o,a,i;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(g.HeaderObjectToken);case 2:n=t.sent,o=n.objectSize-g.HeaderObjectToken.len,t.t0=n.objectId.str,t.next=t.t0===g.ExtendedStreamPropertiesObjectState.guid.str?7:t.t0===g.MetadataObjectState.guid.str?10:t.t0===g.MetadataLibraryObjectState.guid.str?15:t.t0===m.default.PaddingObject.str?20:t.t0===m.default.CompatibilityObject.str?23:t.t0===m.default.ASF_Index_Placeholder_Object.str?25:28;break;case 7:return t.next=9,this.tokenizer.readToken(new g.ExtendedStreamPropertiesObjectState(n));case 9:return t.abrupt("break",32);case 10:return t.next=12,this.tokenizer.readToken(new g.MetadataObjectState(n));case 12:return a=t.sent,this.addTags(a),t.abrupt("break",32);case 15:return t.next=17,this.tokenizer.readToken(new g.MetadataLibraryObjectState(n));case 17:return i=t.sent,this.addTags(i),t.abrupt("break",32);case 20:return t.next=22,this.tokenizer.ignore(o);case 22:return t.abrupt("break",32);case 23:return this.tokenizer.ignore(o),t.abrupt("break",32);case 25:return t.next=27,this.tokenizer.ignore(o);case 27:return t.abrupt("break",32);case 28:return this.metadata.addWarning("Ignore ASF-Object-GUID: "+n.objectId.str),t.next=31,this.tokenizer.readToken(new g.IgnoreObjectState(n));case 31:return t.abrupt("break",32);case 32:r-=n.objectSize;case 33:if(r>0){t.next=0;break}case 34:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),a}();exports.AsfParser=x;
},{"debug":"jD9Y","../type":"sEye","./GUID":"SsVx","./AsfObject":"RkL5","../common/BasicParser":"O0hF"}],"IGPB":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdentificationHeader=exports.CommonHeader=exports.VorbisPictureToken=void 0;var a=require("token-types"),f=require("../../id3v2/ID3v2Token"),c=function(){function t(e){r(this,t),this.len=e}return o(t,[{key:"get",value:function(t,r){var n=f.AttachedPictureType[a.UINT32_BE.get(t,r)],o=a.UINT32_BE.get(t,r+=4),i=t.toString("utf-8",r+=4,r+o),u=a.UINT32_BE.get(t,r+=o),c=t.toString("utf-8",r+=4,r+u),l=a.UINT32_BE.get(t,r+=u),s=a.UINT32_BE.get(t,r+=4),p=a.UINT32_BE.get(t,r+=4),y=a.UINT32_BE.get(t,r+=4),b=a.UINT32_BE.get(t,r+=4);return{type:n,format:i,description:c,width:l,height:s,colour_depth:p,indexed_color:y,data:e.from(t.slice(r+=4,r+b))}}}],[{key:"fromBase64",value:function(t){return this.fromBuffer(e.from(t,"base64"))}},{key:"fromBuffer",value:function(e){return new t(e.length).get(e,0)}}]),t}();exports.VorbisPictureToken=c,exports.CommonHeader={len:7,get:function(e,t){return{packetType:e.readUInt8(t),vorbis:new a.StringType(6,"ascii").get(e,t+1)}}},exports.IdentificationHeader={len:23,get:function(e,t){var r=new DataView(e.buffer,e.byteOffset);return{version:r.getUint32(t+0,!0),channelMode:r.getUint8(t+4),sampleRate:r.getUint32(t+5,!0),bitrateMax:r.getUint32(t+9,!0),bitrateNominal:r.getUint32(t+13,!0),bitrateMin:r.getUint32(t+17,!0)}}};
},{"token-types":"rOYN","../../id3v2/ID3v2Token":"ujrG","buffer":"qcot"}],"Tc8M":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(D){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),u=new j(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(D){return{type:"throw",arg:D}}}r.wrap=l;var p={};function v(){}function y(){}function d(){}var m={};f(m,u,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(I([])));g&&g!==n&&o.call(g,u)&&(m=g);var w=d.prototype=v.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return _()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=P(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return y.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=f(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(k.prototype),f(k.prototype,c,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=I,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=v();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractID3Parser=void 0;var d=require("strtok3/lib/core"),m=require("debug"),b=require("./ID3v2Token"),g=require("./ID3v2Parser"),w=require("../id3v1/ID3v1Parser"),x=require("../common/BasicParser"),k=(0,m.default)("music-metadata:parser:ID3"),E=function(t){s(i,x.BasicParser);var r=l(i);function i(){var t;return o(this,i),(t=r.apply(this,arguments)).id3parser=new g.ID3v2Parser,t}return a(i,[{key:"parse",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.parseID3v2();case 3:t.next=12;break;case 5:if(t.prev=5,t.t0=t.catch(0),!(t.t0 instanceof d.EndOfStreamError)){t.next=11;break}k("End-of-stream"),t.next=12;break;case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,5]])}));return function(){return t.apply(this,arguments)}}()},{key:"finalize",value:function(){}},{key:"parseID3v2",value:function(){var t=n(e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tryReadId3v2Headers();case 2:return k("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),t.next=5,this.postId3v2Parse();case 5:if(!this.options.skipPostHeaders||!this.metadata.hasAny()){t.next=9;break}this.finalize(),t.next=13;break;case 9:return r=new w.ID3v1Parser,t.next=12,r.init(this.metadata,this.tokenizer,this.options).parse();case 12:this.finalize();case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"tryReadId3v2Headers",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.peekToken(b.ID3v2Header);case 2:if("ID3"!==t.sent.fileIdentifier){t.next=8;break}return k("Found ID3v2 header, pos=%s",this.tokenizer.position),t.next=7,this.id3parser.parse(this.metadata,this.tokenizer,this.options);case 7:return t.abrupt("return",this.tryReadId3v2Headers());case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}],[{key:"startsWithID3v2Header",value:function(){var t=n(e().mark(function t(r){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.peekToken(b.ID3v2Header);case 2:return t.t0=t.sent.fileIdentifier,t.abrupt("return","ID3"===t.t0);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),i}();exports.AbstractID3Parser=E;
},{"strtok3/lib/core":"tvmF","debug":"jD9Y","./ID3v2Token":"ujrG","./ID3v2Parser":"pIqu","../id3v1/ID3v1Parser":"WTnS","../common/BasicParser":"O0hF"}],"Wibq":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var r=f(t,"string");return"symbol"===e(r)?r:String(r)}function f(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,r||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisDecoder=void 0;var u=require("token-types"),a=function(){function e(t,o){r(this,e),this.data=t,this.offset=o}return n(e,[{key:"readInt32",value:function(){var t=u.UINT32_LE.get(this.data,this.offset);return this.offset+=4,t}},{key:"readStringUtf8",value:function(){var e=this.readInt32(),r=t.from(this.data).toString("utf-8",this.offset,this.offset+e);return this.offset+=e,r}},{key:"parseUserComment",value:function(){var t=this.offset,e=this.readStringUtf8(),r=e.indexOf("=");return{key:e.slice(0,r).toUpperCase(),value:e.slice(r+1),len:this.offset-t}}}]),e}();exports.VorbisDecoder=a;
},{"token-types":"rOYN","buffer":"qcot"}],"nYTK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function o(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var a=i(e,"string");return"symbol"===t(a)?a:String(a)}function i(e,a){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,a||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisParser=void 0;var s=require("token-types"),u=require("debug"),l=require("./VorbisDecoder"),m=require("./Vorbis"),p=(0,u.default)("music-metadata:parser:ogg:vorbis1"),c=function(){function t(e,r){a(this,t),this.metadata=e,this.options=r,this.pageSegments=[]}return o(t,[{key:"parsePage",value:function(t,a){if(t.headerType.firstPage)this.parseFirstPage(t,a);else{if(t.headerType.continued){if(0===this.pageSegments.length)throw new Error("Cannot continue on previous page");this.pageSegments.push(a)}if(t.headerType.lastPage||!t.headerType.continued){if(this.pageSegments.length>0){var r=e.concat(this.pageSegments);this.parseFullPage(r)}this.pageSegments=t.headerType.lastPage?[]:[a]}}t.headerType.lastPage&&this.calculateDuration(t)}},{key:"flush",value:function(){this.parseFullPage(e.concat(this.pageSegments))}},{key:"parseUserComment",value:function(e,t){var a=new l.VorbisDecoder(e,t).parseUserComment();return this.addTag(a.key,a.value),a.len}},{key:"addTag",value:function(e,t){if("METADATA_BLOCK_PICTURE"===e&&"string"==typeof t){if(this.options.skipCovers)return void p("Ignore picture");t=m.VorbisPictureToken.fromBase64(t),p("Push picture: id=".concat(e,", format=").concat(t.format))}else p("Push tag: id=".concat(e,", value=").concat(t));this.metadata.addTag("vorbis",e,t)}},{key:"calculateDuration",value:function(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}},{key:"parseFirstPage",value:function(e,t){this.metadata.setFormat("codec","Vorbis I"),p("Parse first page");var a=m.CommonHeader.get(t,0);if("vorbis"!==a.vorbis)throw new Error("Metadata does not look like Vorbis");if(1!==a.packetType)throw new Error("First Ogg page should be type 1: the identification header");var r=m.IdentificationHeader.get(t,m.CommonHeader.len);this.metadata.setFormat("sampleRate",r.sampleRate),this.metadata.setFormat("bitrate",r.bitrateNominal),this.metadata.setFormat("numberOfChannels",r.channelMode),p("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",r.sampleRate,r.bitrateNominal,r.channelMode)}},{key:"parseFullPage",value:function(e){var t=m.CommonHeader.get(e,0);switch(p("Parse full page: type=%s, byteLength=%s",t.packetType,e.byteLength),t.packetType){case 3:return this.parseUserCommentList(e,m.CommonHeader.len)}}},{key:"parseUserCommentList",value:function(e,t){var a=s.UINT32_LE.get(e,t);t+=4,t+=a;var r=s.UINT32_LE.get(e,t);for(t+=4;r-- >0;)t+=this.parseUserComment(e,t)}}]),t}();exports.VorbisParser=c;
},{"token-types":"rOYN","debug":"jD9Y","./VorbisDecoder":"Wibq","./Vorbis":"IGPB","buffer":"qcot"}],"lnZi":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(_){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),c=new S(n||[]);return i(a,"_invoke",{value:P(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(_){return{type:"throw",arg:_}}}r.wrap=f;var p={};function y(){}function d(){}function v(){}var m={};l(m,c,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==n&&o.call(b,c)&&(m=b);var w=v.prototype=y.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function k(e,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var s=h(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:d,configurable:!0}),d.displayName=l(v,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},E(k.prototype),l(k.prototype,u,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(w),l(w,s,"Generator"),l(w,c,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,u,"next",t)}function u(t){r(a,o,i,c,u,"throw",t)}c(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlacParser=void 0;var g,b=require("token-types"),w=require("debug"),E=require("../common/Util"),k=require("../ogg/vorbis/Vorbis"),P=require("../id3v2/AbstractID3Parser"),x=require("../common/FourCC"),O=require("../ogg/vorbis/VorbisParser"),T=require("../ogg/vorbis/VorbisDecoder"),S=(0,w.default)("music-metadata:parser:FLAC");!function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"}(g||(g={}));var I=function(t){f(i,P.AbstractID3Parser);var r=p(i);function i(){var t;return o(this,i),(t=r.apply(this,arguments)).padding=0,t}return a(i,[{key:"init",value:function(t,e,r){return s(m(i.prototype),"init",this).call(this,t,e,r),this.vorbisParser=new O.VorbisParser(t,r),this}},{key:"postId3v2Parse",value:function(){var t=n(e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(x.FourCcToken);case 2:if("fLaC"===t.sent.toString()){t.next=5;break}throw new Error("Invalid FLAC preamble");case 5:return t.next=7,this.tokenizer.readToken(L.BlockHeader);case 7:return r=t.sent,t.next=10,this.parseDataBlock(r);case 10:if(!r.lastBlock){t.next=5;break}case 11:this.tokenizer.fileInfo.size&&this.metadata.format.duration&&(n=this.tokenizer.fileInfo.size-this.tokenizer.position,this.metadata.setFormat("bitrate",8*n/this.metadata.format.duration));case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseDataBlock",value:function(t){switch(S("blockHeader type=".concat(t.type,", length=").concat(t.length)),t.type){case g.STREAMINFO:return this.parseBlockStreamInfo(t.length);case g.PADDING:this.padding+=t.length;break;case g.APPLICATION:case g.SEEKTABLE:break;case g.VORBIS_COMMENT:return this.parseComment(t.length);case g.CUESHEET:break;case g.PICTURE:return this.parsePicture(t.length).then();default:this.metadata.addWarning("Unknown block type: "+t.type)}return this.tokenizer.ignore(t.length).then()}},{key:"parseBlockStreamInfo",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r===L.BlockStreamInfo.len){t.next=2;break}throw new Error("Unexpected block-stream-info length");case 2:return t.next=4,this.tokenizer.readToken(L.BlockStreamInfo);case 4:n=t.sent,this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseComment",value:function(){var t=n(e().mark(function t(r){var n,o,i,a,c;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new b.Uint8ArrayType(r));case 2:for(n=t.sent,(o=new T.VorbisDecoder(n,0)).readStringUtf8(),i=o.readInt32(),a=0;a<i;a++)c=o.parseUserComment(),this.vorbisParser.addTag(c.key,c.value);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parsePicture",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.options.skipCovers){t.next=4;break}return t.abrupt("return",this.tokenizer.ignore(r));case 4:return t.next=6,this.tokenizer.readToken(new k.VorbisPictureToken(r));case 6:n=t.sent,this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),i}();exports.FlacParser=I;var L=a(function t(){o(this,t)});L.BlockHeader={len:4,get:function(t,e){return{lastBlock:E.getBit(t,e,7),type:E.getBitAllignedNumber(t,e,1,7),length:b.UINT24_BE.get(t,e+1)}}},L.BlockStreamInfo={len:34,get:function(t,e){return{minimumBlockSize:b.UINT16_BE.get(t,e),maximumBlockSize:b.UINT16_BE.get(t,e+2)/1e3,minimumFrameSize:b.UINT24_BE.get(t,e+4),maximumFrameSize:b.UINT24_BE.get(t,e+7),sampleRate:b.UINT24_BE.get(t,e+10)>>4,channels:E.getBitAllignedNumber(t,e+12,4,3)+1,bitsPerSample:E.getBitAllignedNumber(t,e+12,7,5)+1,totalSamples:E.getBitAllignedNumber(t,e+13,4,36),fileMD5:new b.Uint8ArrayType(16).get(t,e+18)}}};
},{"token-types":"rOYN","debug":"jD9Y","../common/Util":"e0Mm","../ogg/vorbis/Vorbis":"IGPB","../id3v2/AbstractID3Parser":"Tc8M","../common/FourCC":"P2sd","../ogg/vorbis/VorbisParser":"nYTK","../ogg/vorbis/VorbisDecoder":"Wibq"}],"wi0z":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=a();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function f(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var n=p(e,"string");return"symbol"===t(n)?n:String(n)}function p(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChapterText=exports.StcoAtom=exports.StszAtom=exports.StscAtom=exports.SampleToChunkToken=exports.SttsAtom=exports.TimeToSampleToken=exports.SoundSampleDescriptionV0=exports.SoundSampleDescriptionVersion=exports.StsdAtom=exports.TrackHeaderAtom=exports.NameAtom=exports.DataAtom=exports.MvhdAtom=exports.MdhdAtom=exports.FixedLengthAtom=exports.mhdr=exports.tkhd=exports.ftyp=exports.ExtendedSize=exports.Header=void 0;var T=require("token-types"),m=require("debug"),v=require("../common/FourCC"),h=(0,m.default)("music-metadata:parser:MP4:atom");exports.Header={len:8,get:function(e,t){var n=T.UINT32_BE.get(e,t);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new T.StringType(4,"binary").get(e,t+4)}},put:function(e,t,n){return T.UINT32_BE.put(e,t,Number(n.length)),v.FourCcToken.put(e,t+4,n.name)}},exports.ExtendedSize=T.UINT64_BE,exports.ftyp={len:4,get:function(e,t){return{type:new T.StringType(4,"ascii").get(e,t)}}},exports.tkhd={len:4,get:function(e,t){return{type:new T.StringType(4,"ascii").get(e,t)}}},exports.mhdr={len:8,get:function(e,t){return{version:T.UINT8.get(e,t),flags:T.UINT24_BE.get(e,t+1),nextItemID:T.UINT32_BE.get(e,t+4)}}};var I=f(function e(t,n,r){if(g(this,e),this.len=t,t<n)throw new Error("Atom ".concat(r," expected to be ").concat(n,", but specifies ").concat(t," bytes long."));t>n&&h("Warning: atom ".concat(r," expected to be ").concat(n,", but was actually ").concat(t," bytes long."))});exports.FixedLengthAtom=I;var y={len:4,get:function(e,t){var n=T.UINT32_BE.get(e,t)-2082844800;return new Date(1e3*n)}},d=function(e){n(r,I);var t=o(r);function r(e){var n;return g(this,r),(n=t.call(this,e,24,"mdhd")).len=e,n}return f(r,[{key:"get",value:function(e,t){return{version:T.UINT8.get(e,t+0),flags:T.UINT24_BE.get(e,t+1),creationTime:y.get(e,t+4),modificationTime:y.get(e,t+8),timeScale:T.UINT32_BE.get(e,t+12),duration:T.UINT32_BE.get(e,t+16),language:T.UINT16_BE.get(e,t+20),quality:T.UINT16_BE.get(e,t+22)}}}]),r}();exports.MdhdAtom=d;var E=function(e){n(r,I);var t=o(r);function r(e){var n;return g(this,r),(n=t.call(this,e,100,"mvhd")).len=e,n}return f(r,[{key:"get",value:function(e,t){return{version:T.UINT8.get(e,t),flags:T.UINT24_BE.get(e,t+1),creationTime:y.get(e,t+4),modificationTime:y.get(e,t+8),timeScale:T.UINT32_BE.get(e,t+12),duration:T.UINT32_BE.get(e,t+16),preferredRate:T.UINT32_BE.get(e,t+20),preferredVolume:T.UINT16_BE.get(e,t+24),previewTime:T.UINT32_BE.get(e,t+72),previewDuration:T.UINT32_BE.get(e,t+76),posterTime:T.UINT32_BE.get(e,t+80),selectionTime:T.UINT32_BE.get(e,t+84),selectionDuration:T.UINT32_BE.get(e,t+88),currentTime:T.UINT32_BE.get(e,t+92),nextTrackID:T.UINT32_BE.get(e,t+96)}}}]),r}();exports.MvhdAtom=E;var N=function(){function t(e){g(this,t),this.len=e}return f(t,[{key:"get",value:function(t,n){return{type:{set:T.UINT8.get(t,n+0),type:T.UINT24_BE.get(t,n+1)},locale:T.UINT24_BE.get(t,n+4),value:e.from(new T.Uint8ArrayType(this.len-8).get(t,n+8))}}}]),t}();exports.DataAtom=N;var _=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){return{version:T.UINT8.get(e,t),flags:T.UINT24_BE.get(e,t+1),name:new T.StringType(this.len-4,"utf-8").get(e,t+4)}}}]),e}();exports.NameAtom=_;var B=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){return{version:T.UINT8.get(e,t),flags:T.UINT24_BE.get(e,t+1),creationTime:y.get(e,t+4),modificationTime:y.get(e,t+8),trackId:T.UINT32_BE.get(e,t+12),duration:T.UINT32_BE.get(e,t+20),layer:T.UINT16_BE.get(e,t+24),alternateGroup:T.UINT16_BE.get(e,t+26),volume:T.UINT16_BE.get(e,t+28)}}}]),e}();exports.TrackHeaderAtom=B;var x={len:8,get:function(e,t){return{version:T.UINT8.get(e,t),flags:T.UINT24_BE.get(e,t+1),numberOfEntries:T.UINT32_BE.get(e,t+4)}}},b=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){return{dataFormat:v.FourCcToken.get(e,t),dataReferenceIndex:T.UINT16_BE.get(e,t+10),description:new T.Uint8ArrayType(this.len-12).get(e,t+12)}}}]),e}(),U=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){var n=x.get(e,t);t+=x.len;for(var r=[],o=0;o<n.numberOfEntries;++o){var i=T.UINT32_BE.get(e,t);t+=T.UINT32_BE.len,r.push(new b(i).get(e,t)),t+=i}return{header:n,table:r}}}]),e}();exports.StsdAtom=U,exports.SoundSampleDescriptionVersion={len:8,get:function(e,t){return{version:T.INT16_BE.get(e,t),revision:T.INT16_BE.get(e,t+2),vendor:T.INT32_BE.get(e,t+4)}}},exports.SoundSampleDescriptionV0={len:12,get:function(e,t){return{numAudioChannels:T.INT16_BE.get(e,t+0),sampleSize:T.INT16_BE.get(e,t+2),compressionId:T.INT16_BE.get(e,t+4),packetSize:T.INT16_BE.get(e,t+6),sampleRate:T.UINT16_BE.get(e,t+8)+T.UINT16_BE.get(e,t+10)/1e4}}};var S=function(){function e(t,n){g(this,e),this.len=t,this.token=n}return f(e,[{key:"get",value:function(e,t){var n=T.INT32_BE.get(e,t+4);return{version:T.INT8.get(e,t+0),flags:T.INT24_BE.get(e,t+1),numberOfEntries:n,entries:P(e,this.token,t+8,this.len-8,n)}}}]),e}();exports.TimeToSampleToken={len:8,get:function(e,t){return{count:T.INT32_BE.get(e,t+0),duration:T.INT32_BE.get(e,t+4)}}};var k=function(e){n(r,S);var t=o(r);function r(e){var n;return g(this,r),(n=t.call(this,e,exports.TimeToSampleToken)).len=e,n}return f(r)}();exports.SttsAtom=k,exports.SampleToChunkToken={len:12,get:function(e,t){return{firstChunk:T.INT32_BE.get(e,t),samplesPerChunk:T.INT32_BE.get(e,t+4),sampleDescriptionId:T.INT32_BE.get(e,t+8)}}};var w=function(e){n(r,S);var t=o(r);function r(e){var n;return g(this,r),(n=t.call(this,e,exports.SampleToChunkToken)).len=e,n}return f(r)}();exports.StscAtom=w;var A=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){var n=T.INT32_BE.get(e,t+8);return{version:T.INT8.get(e,t),flags:T.INT24_BE.get(e,t+1),sampleSize:T.INT32_BE.get(e,t+4),numberOfEntries:n,entries:P(e,T.INT32_BE,t+12,this.len-12,n)}}}]),e}();exports.StszAtom=A;var O=function(e){n(r,S);var t=o(r);function r(e){var n;return g(this,r),(n=t.call(this,e,T.INT32_BE)).len=e,n}return f(r)}();exports.StcoAtom=O;var j=function(){function e(t){g(this,e),this.len=t}return f(e,[{key:"get",value:function(e,t){var n=T.INT16_BE.get(e,t+0);return new T.StringType(n,"utf-8").get(e,t+2)}}]),e}();function P(e,t,n,r,o){if(h("remainingLen=".concat(r,", numberOfEntries=").concat(o," * token-len=").concat(t.len)),0===r)return[];if(r!==o*t.len)throw new Error("mismatch number-of-entries with remaining atom-length");for(var i=[],u=0;u<o;++u)i.push(t.get(e,n)),n+=t.len;return i}exports.ChapterText=j;
},{"token-types":"rOYN","debug":"jD9Y","../common/FourCC":"P2sd","buffer":"qcot"}],"TSHs":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(A){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:k(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}r.wrap=f;var p={};function d(){}function v(){}function y(){}var m={};h(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(_([])));w&&w!==n&&o.call(w,u)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function L(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=l(e[i],e,a);if("throw"!==s.type){var h=s.arg,f=h.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(f).then(function(t){h.value=t,u(h)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=y,i(b,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=h(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},x(L.prototype),h(L.prototype,c,function(){return this}),r.AsyncIterator=L,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new L(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),h(b,s,"Generator"),h(b,u,function(){return this}),h(b,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=_,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Atom=void 0;var s=require("debug"),h=require("./AtomToken"),f=(0,s.default)("music-metadata:parser:MP4:Atom"),l=function(){function t(e,r,n){o(this,t),this.header=e,this.extended=r,this.parent=n,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}return a(t,[{key:"getHeaderLength",value:function(){return this.extended?16:8}},{key:"getPayloadLength",value:function(t){return(this.header.length===BigInt(0)?t:Number(this.header.length))-this.getHeaderLength()}},{key:"readAtoms",value:function(){var r=n(e().mark(function r(n,o,i){var a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i>0)){e.next=8;break}return e.next=3,t.readAtom(n,o,this,i);case 3:a=e.sent,this.children.push(a),i-=a.header.length===BigInt(0)?i:Number(a.header.length),e.next=0;break;case 8:case"end":return e.stop()}},r,this)}));return function(t,e,n){return r.apply(this,arguments)}}()},{key:"readData",value:function(){var t=n(e().mark(function t(r,n,o){var i,a;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.header.name,t.next="moov"===t.t0?3:"udta"===t.t0?3:"trak"===t.t0?3:"mdia"===t.t0?3:"minf"===t.t0?3:"stbl"===t.t0?3:"<id>"===t.t0?3:"ilst"===t.t0?3:"tref"===t.t0?3:"meta"===t.t0?4:"mdhd"===t.t0?11:"mvhd"===t.t0?11:"tkhd"===t.t0?11:"stsz"===t.t0?11:(t.t0,11);break;case 3:return t.abrupt("return",this.readAtoms(r,n,this.getPayloadLength(o)));case 4:return t.next=6,r.peekToken(h.Header);case 6:return i=t.sent,a="hdlr"===i.name?0:4,t.next=10,r.ignore(a);case 10:return t.abrupt("return",this.readAtoms(r,n,this.getPayloadLength(o)-a));case 11:return t.abrupt("return",n(this,o));case 12:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"readAtom",value:function(){var r=n(e().mark(function r(n,o,i,a){var u,c,s,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.position,e.next=3,n.readToken(h.Header);case 3:if(c=e.sent,!(c.length===BigInt(1))){e.next=9;break}return e.next=8,n.readToken(h.ExtendedSize);case 8:c.length=e.sent;case 9:return s=new t(c,c.length===BigInt(1),i),l=s.getPayloadLength(a),f("parse atom name=".concat(s.atomPath,", extended=").concat(s.extended,", offset=").concat(u,", len=").concat(s.header.length)),e.next=14,s.readData(n,o,l);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}},r)}));return function(t,e,n,o){return r.apply(this,arguments)}}()}]),t}();exports.Atom=l;
},{"debug":"jD9Y","./AtomToken":"wi0z"}],"eyoP":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(A){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),s=new z(n||[]);return o(i,"_invoke",{value:T(t,r,s)}),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=p;var h={};function d(){}function m(){}function v(){}var y={};f(y,s,function(){return this});var k=Object.getPrototypeOf,g=k&&k(k(O([])));g&&g!==e&&a.call(g,s)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var n;o(this,"_invoke",{value:function(o,i){function s(){return new e(function(n,s){!function n(o,i,s,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,p=f.value;return p&&"object"==r(p)&&a.call(p,"__await")?e.resolve(p.__await).then(function(t){n("next",t,s,c)},function(t){n("throw",t,s,c)}):e.resolve(p).then(function(t){f.value=t,s(f)},function(t){return n("throw",t,s,c)})}c(u.arg)}(o,i,n,s)})}return n=n?n.then(s,s):s()}})}function T(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=S(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,h;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=v,o(b,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=f(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),f(x.prototype,c,function(){return this}),t.AsyncIterator=x,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new x(p(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(b),f(b,u,"Generator"),f(b,s,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function a(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(t){a(i,n,o,s,c,"next",t)}function c(t){a(i,n,o,s,c,"throw",t)}s(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=y(t);if(e){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MP4Parser=void 0;var k=require("debug"),g=require("token-types"),b=require("../common/BasicParser"),w=require("../id3v1/ID3v1Parser"),x=require("../type"),T=require("./Atom"),S=require("./AtomToken"),E=(0,k.default)("music-metadata:parser:MP4"),P="iTunes",z={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function O(t,e,r){return r.indexOf(t)===e}var L=function(t){p(a,b.BasicParser);var r=h(a);function a(){var t;return i(this,a),(t=r.apply(this,arguments)).atomParsers={mvhd:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.MvhdAtom(r));case 2:a=e.sent,t.metadata.setFormat("creationTime",a.creationTime),t.metadata.setFormat("modificationTime",a.modificationTime);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),mdhd:function(){var e=o(n().mark(function e(r){var a,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.MdhdAtom(r));case 2:a=e.sent,(o=t.getTrackDescription()).creationTime=a.creationTime,o.modificationTime=a.modificationTime,o.timeScale=a.timeScale,o.duration=a.duration;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),chap:function(){var e=o(n().mark(function e(r){var a,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getTrackDescription(),o=[];case 2:if(!(r>=g.UINT32_BE.len)){e.next=11;break}return e.t0=o,e.next=6,t.tokenizer.readNumber(g.UINT32_BE);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),r-=g.UINT32_BE.len,e.next=2;break;case 11:a.chapterList=o;case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),tkhd:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.TrackHeaderAtom(r));case 2:a=e.sent,t.tracks.push(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),mdat:function(){var e=o(n().mark(function e(r){var a,o,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audioLengthInBytes=r,t.calculateBitRate(),!t.options.includeChapters){e.next=9;break}if(1!==(a=t.tracks.filter(function(t){return t.chapterList})).length){e.next=9;break}if(o=a[0].chapterList,1!==(i=t.tracks.filter(function(t){return-1!==o.indexOf(t.trackId)})).length){e.next=9;break}return e.abrupt("return",t.parseChapterTrack(i[0],a[0],r));case 9:return e.next=11,t.tokenizer.ignore(r);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ftyp:function(){var e=o(n().mark(function e(r){var a,o,i,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[];case 1:if(!(r>0)){e.next=10;break}return e.next=4,t.tokenizer.readToken(S.ftyp);case 4:o=e.sent,r-=S.ftyp.len,(i=o.type.replace(/\W/g,"")).length>0&&a.push(i),e.next=1;break;case 10:E("ftyp: ".concat(a.join("/"))),s=a.filter(O).join("/"),t.metadata.setFormat("container",s);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),stsd:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.StsdAtom(r));case 2:a=e.sent,t.getTrackDescription().soundSampleDescription=a.table.map(function(e){return t.parseSoundSampleDescription(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),stsc:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.StscAtom(r));case 2:a=e.sent,t.getTrackDescription().sampleToChunkTable=a.entries;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),stts:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.SttsAtom(r));case 2:a=e.sent,t.getTrackDescription().timeToSampleTable=a.entries;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),stsz:function(){var e=o(n().mark(function e(r){var a,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.StszAtom(r));case 2:a=e.sent,(o=t.getTrackDescription()).sampleSize=a.sampleSize,o.sampleSizeTable=a.entries;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),stco:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new S.StcoAtom(r));case 2:a=e.sent,t.getTrackDescription().chunkOffsetTable=a.entries;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),date:function(){var e=o(n().mark(function e(r){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenizer.readToken(new g.StringType(r,"utf-8"));case 2:a=e.sent,t.addTag("date",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},t}return c(a,[{key:"parse",value:function(){var t=o(n().mark(function t(){var e,r,a,o,i,s,c,u,f,p,l=this;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.tracks=[],e=this.tokenizer.fileInfo.size;case 2:if(this.tokenizer.fileInfo.size&&!(e>0)){t.next=26;break}return t.prev=3,t.next=6,this.tokenizer.peekToken(S.Header);case 6:if("\0\0\0\0"!==t.sent.name){t.next=12;break}return r="Error at offset=".concat(this.tokenizer.position,": box.id=0"),E(r),this.addWarning(r),t.abrupt("break",26);case 12:t.next=20;break;case 14:return t.prev=14,t.t0=t.catch(3),a="Error at offset=".concat(this.tokenizer.position,": ").concat(t.t0.message),E(a),this.addWarning(a),t.abrupt("break",26);case 20:return t.next=22,T.Atom.readAtom(this.tokenizer,function(t,e){return l.handleAtom(t,e)},null,e);case 22:o=t.sent,e-=o.header.length===BigInt(0)?e:Number(o.header.length),t.next=2;break;case 26:i=[],this.tracks.forEach(function(t){var e=[];t.soundSampleDescription.forEach(function(t){var r={},n=z[t.dataFormat];if(n?(e.push(n.format),r.codecName=n.format):r.codecName="<".concat(t.dataFormat,">"),t.description){var a=t.description;a.sampleRate>0&&(r.type=x.TrackType.audio,r.audio={samplingFrequency:a.sampleRate,bitDepth:a.sampleSize,channels:a.numAudioChannels})}l.metadata.addStreamInfo(r)}),e.length>=1&&i.push(e.join("/"))}),i.length>0&&this.metadata.setFormat("codec",i.filter(O).join("+")),(s=this.tracks.filter(function(t){return t.soundSampleDescription.length>=1&&t.soundSampleDescription[0].description&&t.soundSampleDescription[0].description.numAudioChannels>0})).length>=1&&(c=s[0],u=c.duration/c.timeScale,this.metadata.setFormat("duration",u),(f=c.soundSampleDescription[0]).description&&(this.metadata.setFormat("sampleRate",f.description.sampleRate),this.metadata.setFormat("bitsPerSample",f.description.sampleSize),this.metadata.setFormat("numberOfChannels",f.description.numAudioChannels)),(p=z[f.dataFormat])&&this.metadata.setFormat("lossless",!p.lossy),this.calculateBitRate());case 31:case"end":return t.stop()}},t,this,[[3,14]])}));return function(){return t.apply(this,arguments)}}()},{key:"handleAtom",value:function(){var t=o(n().mark(function t(e,r){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.parent){t.next=5;break}t.t0=e.parent.header.name,t.next="ilst"===t.t0?4:"<id>"===t.t0?4:5;break;case 4:return t.abrupt("return",this.parseMetadataItemData(e));case 5:if(!this.atomParsers[e.header.name]){t.next=9;break}return t.abrupt("return",this.atomParsers[e.header.name](r));case 9:return E("No parser for atom path=".concat(e.atomPath,", payload-len=").concat(r,", ignoring atom")),t.next=12,this.tokenizer.ignore(r);case 12:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getTrackDescription",value:function(){return this.tracks[this.tracks.length-1]}},{key:"calculateBitRate",value:function(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}},{key:"addTag",value:function(t,e){this.metadata.addTag(P,t,e)}},{key:"addWarning",value:function(t){E("Warning: "+t),this.metadata.addWarning(t)}},{key:"parseMetadataItemData",value:function(t){var e=this,r=t.header.name;return t.readAtoms(this.tokenizer,function(){var t=o(n().mark(function t(a,o){var i,s,c,u;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=a.getPayloadLength(o),t.t0=a.header.name,t.next="data"===t.t0?4:"name"===t.t0?5:"mean"===t.t0?10:15;break;case 4:return t.abrupt("return",e.parseValueAtom(r,a));case 5:return t.next=7,e.tokenizer.readToken(new S.NameAtom(i));case 7:return s=t.sent,r+=":"+s.name,t.abrupt("break",19);case 10:return t.next=12,e.tokenizer.readToken(new S.NameAtom(i));case 12:return c=t.sent,r+=":"+c.name,t.abrupt("break",19);case 15:return t.next=17,e.tokenizer.readToken(new g.BufferType(i));case 17:u=t.sent,e.addWarning("Unsupported meta-item: "+r+"["+a.header.name+"] => value="+u.toString("hex")+" ascii="+u.toString("ascii"));case 19:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),t.getPayloadLength(0))}},{key:"parseValueAtom",value:function(){var t=o(n().mark(function t(r,o){var i,s,c,u,f;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new S.DataAtom(Number(o.header.length)-S.Header.len));case 2:if(0===(i=t.sent).type.set){t.next=5;break}throw new Error("Unsupported type-set != 0: "+i.type.set);case 5:t.t0=i.type.type,t.next=0===t.t0?8:1===t.t0?20:18===t.t0?20:13===t.t0?22:14===t.t0?26:21===t.t0?30:22===t.t0?32:65===t.t0?34:66===t.t0?36:67===t.t0?38:40;break;case 8:t.t1=r,t.next="trkn"===t.t1?11:"disk"===t.t1?11:"gnre"===t.t1?15:19;break;case 11:return s=g.UINT8.get(i.value,3),c=g.UINT8.get(i.value,5),this.addTag(r,s+"/"+c),t.abrupt("break",19);case 15:return u=g.UINT8.get(i.value,1),f=w.Genres[u-1],this.addTag(r,f),t.abrupt("break",19);case 19:return t.abrupt("break",41);case 20:return this.addTag(r,i.value.toString("utf-8")),t.abrupt("break",41);case 22:if(!this.options.skipCovers){t.next=24;break}return t.abrupt("break",41);case 24:return this.addTag(r,{format:"image/jpeg",data:e.from(i.value)}),t.abrupt("break",41);case 26:if(!this.options.skipCovers){t.next=28;break}return t.abrupt("break",41);case 28:return this.addTag(r,{format:"image/png",data:e.from(i.value)}),t.abrupt("break",41);case 30:return this.addTag(r,a.read_BE_Integer(i.value,!0)),t.abrupt("break",41);case 32:return this.addTag(r,a.read_BE_Integer(i.value,!1)),t.abrupt("break",41);case 34:return this.addTag(r,i.value.readInt8(0)),t.abrupt("break",41);case 36:return this.addTag(r,i.value.readInt16BE(0)),t.abrupt("break",41);case 38:return this.addTag(r,i.value.readInt32BE(0)),t.abrupt("break",41);case 40:this.addWarning("atom key=".concat(r,", has unknown well-known-type (data-type): ").concat(i.type.type));case 41:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"parseSoundSampleDescription",value:function(t){var e={dataFormat:t.dataFormat,dataReferenceIndex:t.dataReferenceIndex},r=0,n=S.SoundSampleDescriptionVersion.get(t.description,r);return r+=S.SoundSampleDescriptionVersion.len,0===n.version||1===n.version?e.description=S.SoundSampleDescriptionV0.get(t.description,r):E("Warning: sound-sample-description ".concat(n," not implemented")),e}},{key:"parseChapterTrack",value:function(){var t=o(n().mark(function t(e,r,a){var o,i,s,c,u,f,p;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.sampleSize){t.next=3;break}if(e.chunkOffsetTable.length===e.sampleSizeTable.length){t.next=3;break}throw new Error("Expected equal chunk-offset-table & sample-size-table length.");case 3:o=[],i=0;case 5:if(!(i<e.chunkOffsetTable.length&&a>0)){t.next=24;break}if(s=e.chunkOffsetTable[i],c=s-this.tokenizer.position,u=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[i],!((a-=c+u)<0)){t.next=12;break}throw new Error("Chapter chunk exceeding token length");case 12:return t.next=14,this.tokenizer.ignore(c);case 14:return t.next=16,this.tokenizer.readToken(new S.ChapterText(u));case 16:f=t.sent,E("Chapter ".concat(i+1,": ").concat(f)),p={title:f,sampleOffset:this.findSampleOffset(r,this.tokenizer.position)},E("Chapter title=".concat(p.title,", offset=").concat(p.sampleOffset,"/").concat(this.tracks[0].duration)),o.push(p);case 21:++i,t.next=5;break;case 24:return this.metadata.setFormat("chapters",o),t.next=27,this.tokenizer.ignore(a);case 27:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"findSampleOffset",value:function(t,e){var r=0;t.timeToSampleTable.forEach(function(t){r+=t.count*t.duration}),E("Total duration=".concat(r));for(var n=0;n<t.chunkOffsetTable.length&&t.chunkOffsetTable[n]<e;)++n;return this.getChunkDuration(n+1,t)}},{key:"getChunkDuration",value:function(t,e){for(var r=0,n=e.timeToSampleTable[r].count,a=e.timeToSampleTable[r].duration,o=1,i=this.getSamplesPerChunk(o,e.sampleToChunkTable),s=0;o<t;){var c=Math.min(n,i);s+=c*a,n-=c,0===(i-=c)?(++o,i=this.getSamplesPerChunk(o,e.sampleToChunkTable)):(++r,n=e.timeToSampleTable[r].count,a=e.timeToSampleTable[r].duration)}return s}},{key:"getSamplesPerChunk",value:function(t,e){for(var r=0;r<e.length-1;++r)if(t>=e[r].firstChunk&&t<e[r+1].firstChunk)return e[r].samplesPerChunk;return e[e.length-1].samplesPerChunk}}],[{key:"read_BE_Integer",value:function(t,e){var r=(e?"INT":"UINT")+8*t.length+(t.length>1?"_BE":""),n=g[r];if(!n)throw new Error('Token for integer type not found: "'+r+'"');return Number(n.get(t,0))}}]),a}();exports.MP4Parser=L;
},{"debug":"jD9Y","token-types":"rOYN","../common/BasicParser":"O0hF","../id3v1/ID3v1Parser":"WTnS","../type":"sEye","./Atom":"TSHs","./AtomToken":"wi0z","buffer":"qcot"}],"G8sh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplayGain=void 0;var e,i,t=require("../common/Util");!function(e){e[e.not_set=0]="not_set",e[e.radio=1]="radio",e[e.audiophile=2]="audiophile"}(e||(e={})),function(e){e[e.unspecified=0]="unspecified",e[e.engineer=1]="engineer",e[e.user=2]="user",e[e.automatic=3]="automatic",e[e.rms_average=4]="rms_average"}(i||(i={})),exports.ReplayGain={len:2,get:function(e,i){var r=t.getBitAllignedNumber(e,i,0,3),n=t.getBitAllignedNumber(e,i,6,1),u=t.getBitAllignedNumber(e,i,7,9)/10;if(r>0)return{type:t.getBitAllignedNumber(e,i,0,3),origin:t.getBitAllignedNumber(e,i,3,3),adjustment:n?-u:u}}};
},{"../common/Util":"e0Mm"}],"QzJ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExtendedLameHeader=void 0;var e=require("token-types"),t=require("../common/Util"),r=require("./ReplayGainDataFormat");exports.ExtendedLameHeader={len:27,get:function(a,i){var n=e.UINT32_BE.get(a,i+2);return{revision:t.getBitAllignedNumber(a,i,0,4),vbr_method:t.getBitAllignedNumber(a,i,4,4),lowpass_filter:100*e.UINT8.get(a,i+1),track_peak:0===n?void 0:n/Math.pow(2,23),track_gain:r.ReplayGain.get(a,6),album_gain:r.ReplayGain.get(a,8),music_length:e.UINT32_BE.get(a,i+20),music_crc:e.UINT8.get(a,i+24),header_crc:e.UINT16_BE.get(a,i+24)}}};
},{"token-types":"rOYN","../common/Util":"e0Mm","./ReplayGainDataFormat":"G8sh"}],"jtQL":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(N){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new _(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var p={};function d(){}function y(){}function v(){}var g={};f(g,c,function(){return this});var m=Object.getPrototypeOf,x=m&&m(m(O([])));x&&x!==e&&o.call(x,c)&&(g=x);var w=v.prototype=d.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},b(L.prototype),f(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(w),f(w,s,"Generator"),f(w,c,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.readXingHeader=exports.XingHeaderFlags=exports.LameEncoderVersion=exports.InfoTagHeaderTag=void 0;var a=require("token-types"),c=require("../common/Util"),u=require("./ExtendedLameHeader");function s(t){return f.apply(this,arguments)}function f(){return(f=i(n().mark(function t(r){var o,i,c,s;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.readToken(exports.XingHeaderFlags);case 2:if(o=t.sent,i={},!o.frames){t.next=8;break}return t.next=7,r.readToken(a.UINT32_BE);case 7:i.numFrames=t.sent;case 8:if(!o.bytes){t.next=12;break}return t.next=11,r.readToken(a.UINT32_BE);case 11:i.streamSize=t.sent;case 12:if(!o.toc){t.next=16;break}return i.toc=e.alloc(100),t.next=16,r.readBuffer(i.toc);case 16:if(!o.vbrScale){t.next=20;break}return t.next=19,r.readToken(a.UINT32_BE);case 19:i.vbrScale=t.sent;case 20:return t.next=22,r.peekToken(new a.StringType(4,"ascii"));case 22:if("LAME"!==t.sent){t.next=38;break}return t.next=26,r.ignore(4);case 26:return t.next=28,r.readToken(new a.StringType(5,"ascii"));case 28:if(t.t0=t.sent,i.lame={version:t.t0},!i.lame.version.match(/\d+.\d+/g)){t.next=38;break}if(c=i.lame.version.match(/\d+.\d+/g)[0],!((s=c.split(".").map(function(t){return parseInt(t,10)}))[0]>=3&&s[1]>=90)){t.next=38;break}return t.next=37,r.readToken(u.ExtendedLameHeader);case 37:i.lame.extended=t.sent;case 38:return t.abrupt("return",i);case 39:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.InfoTagHeaderTag=new a.StringType(4,"ascii"),exports.LameEncoderVersion=new a.StringType(6,"ascii"),exports.XingHeaderFlags={len:4,get:function(t,e){return{frames:c.isBitSet(t,e,31),bytes:c.isBitSet(t,e,30),toc:c.isBitSet(t,e,29),vbrScale:c.isBitSet(t,e,28)}}},exports.readXingHeader=s;
},{"token-types":"rOYN","../common/Util":"e0Mm","./ExtendedLameHeader":"QzJ6","buffer":"qcot"}],"SJRM":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var e,t=require("buffer").Buffer;function r(){"use strict";r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new E(n||[]);return a(o,"_invoke",{value:P(e,r,s)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(O){return{type:"throw",arg:O}}}e.wrap=f;var m={};function p(){}function d(){}function v(){}var y={};c(y,o,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(S([])));g&&g!==t&&n.call(g,o)&&(y=g);var k=v.prototype=p.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var r;a(this,"_invoke",{value:function(a,i){function o(){return new t(function(r,o){!function r(a,i,o,s){var u=h(e[a],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==l(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):t.resolve(f).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,s)})}s(u.arg)}(a,i,r,o)})}return r=r?r.then(o,o):o()}})}function P(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=F(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function F(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,F(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=h(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=v,a(k,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:d,configurable:!0}),d.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},x(w.prototype),c(w.prototype,s,function(){return this}),e.AsyncIterator=w,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new w(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(k),c(k,u,"Generator"),c(k,o,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}function n(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,u,"next",e)}function u(e){n(o,a,i,s,u,"throw",e)}s(void 0)})}}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=f();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=y(e,"string");return"symbol"===l(t)?t:String(t)}function y(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpegParser=void 0;var b=require("token-types"),g=require("strtok3/lib/core"),k=require("debug"),x=require("../common/Util"),w=require("../id3v2/AbstractID3Parser"),P=require("./XingTag"),F=(0,k.default)("music-metadata:parser:mpeg"),_=1024,C={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},E=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]],S=function(){function e(t,r){m(this,e),this.versionIndex=x.getBitAllignedNumber(t,r+1,3,2),this.layer=e.LayerDescription[x.getBitAllignedNumber(t,r+1,5,2)],this.versionIndex>1&&0===this.layer?this.parseAdtsHeader(t,r):this.parseMpegHeader(t,r),this.isProtectedByCRC=!x.isBitSet(t,r+1,7)}return d(e,[{key:"calcDuration",value:function(e){return e*this.calcSamplesPerFrame()/this.samplingRate}},{key:"calcSamplesPerFrame",value:function(){return e.samplesInFrameTable[1===this.version?0:1][this.layer]}},{key:"calculateSideInfoLength",value:function(){if(3!==this.layer)return 2;if(3===this.channelModeIndex){if(1===this.version)return 17;if(2===this.version||2.5===this.version)return 9}else{if(1===this.version)return 32;if(2===this.version||2.5===this.version)return 17}}},{key:"calcSlotSize",value:function(){return[null,4,1,1][this.layer]}},{key:"parseMpegHeader",value:function(t,r){this.container="MPEG",this.bitrateIndex=x.getBitAllignedNumber(t,r+2,0,4),this.sampRateFreqIndex=x.getBitAllignedNumber(t,r+2,4,2),this.padding=x.isBitSet(t,r+2,6),this.privateBit=x.isBitSet(t,r+2,7),this.channelModeIndex=x.getBitAllignedNumber(t,r+3,0,2),this.modeExtension=x.getBitAllignedNumber(t,r+3,2,2),this.isCopyrighted=x.isBitSet(t,r+3,4),this.isOriginalMedia=x.isBitSet(t,r+3,5),this.emphasis=x.getBitAllignedNumber(t,r+3,7,2),this.version=e.VersionID[this.versionIndex],this.channelMode=e.ChannelMode[this.channelModeIndex],this.codec="MPEG ".concat(this.version," Layer ").concat(this.layer);var n=this.calcBitrate();if(!n)throw new Error("Cannot determine bit-rate");if(this.bitrate=1e3*n,this.samplingRate=this.calcSamplingRate(),null==this.samplingRate)throw new Error("Cannot determine sampling-rate")}},{key:"parseAdtsHeader",value:function(e,t){F("layer=0 => ADTS"),this.version=2===this.versionIndex?4:2,this.container="ADTS/MPEG-"+this.version;var r=x.getBitAllignedNumber(e,t+2,0,2);this.codec="AAC",this.codecProfile=C.AudioObjectTypes[r],F("MPEG-4 audio-codec=".concat(this.codec));var n=x.getBitAllignedNumber(e,t+2,2,4);this.samplingRate=C.SamplingFrequencies[n],F("sampling-rate=".concat(this.samplingRate));var a=x.getBitAllignedNumber(e,t+2,7,3);this.mp4ChannelConfig=E[a],F("channel-config=".concat(this.mp4ChannelConfig.join("+"))),this.frameLength=x.getBitAllignedNumber(e,t+3,6,2)<<11}},{key:"calcBitrate",value:function(){if(0!==this.bitrateIndex&&15!==this.bitrateIndex){var t="".concat(Math.floor(this.version)).concat(this.layer);return e.bitrate_index[this.bitrateIndex][t]}}},{key:"calcSamplingRate",value:function(){return 3===this.sampRateFreqIndex?null:e.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}]),e}();S.SyncByte1=255,S.SyncByte2=224,S.VersionID=[2.5,null,2,1],S.LayerDescription=[0,3,2,1],S.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],S.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},S.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},S.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];var L={len:4,get:function(e,t){return new S(e,t)}};function O(e){return"V"+Math.floor((100-e)/10)}var I=function(e){i(o,w.AbstractID3Parser);var n=s(o);function o(){var e;return m(this,o),(e=n.apply(this,arguments)).frameCount=0,e.syncFrameCount=-1,e.countSkipFrameData=0,e.totalDataLength=0,e.bitrates=[],e.calculateEofDuration=!1,e.buf_frame_header=t.alloc(4),e.syncPeek={buf:t.alloc(_),len:0},e}return d(o,[{key:"postId3v2Parse",value:function(){var e=a(r().mark(function e(){var t,n,a;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.metadata.setFormat("lossless",!1),e.prev=1,t=!1;case 3:if(t){e.next=11;break}return e.next=6,this.sync();case 6:return e.next=8,this.parseCommonMpegHeader();case 8:t=e.sent,e.next=3;break;case 11:e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(1),!(e.t0 instanceof g.EndOfStreamError)){e.next=20;break}F("End-of-stream"),this.calculateEofDuration&&(n=this.frameCount*this.samplesPerFrame,this.metadata.setFormat("numberOfSamples",n),a=n/this.metadata.format.sampleRate,F("Calculate duration at EOF: ".concat(a," sec."),a),this.metadata.setFormat("duration",a)),e.next=21;break;case 20:throw e.t0;case 21:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"finalize",value:function(){var e=this.metadata.format,t=this.metadata.native.hasOwnProperty("ID3v1");if(e.duration&&this.tokenizer.fileInfo.size){var r=this.tokenizer.fileInfo.size-this.mpegOffset-(t?128:0);e.codecProfile&&"V"===e.codecProfile[0]&&this.metadata.setFormat("bitrate",8*r/e.duration)}else if(this.tokenizer.fileInfo.size&&"CBR"===e.codecProfile){var n=this.tokenizer.fileInfo.size-this.mpegOffset-(t?128:0),a=Math.round(n/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",a);var i=a/e.sampleRate;F("Calculate CBR duration based on file size: %s",i),this.metadata.setFormat("duration",i)}}},{key:"sync",value:function(){var e=a(r().mark(function e(){var t,n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!1;case 1:return n=0,e.next=5,this.tokenizer.peekBuffer(this.syncPeek.buf,{length:_,mayBeLess:!0});case 5:if(this.syncPeek.len=e.sent,!(this.syncPeek.len<=163)){e.next=8;break}throw new g.EndOfStreamError;case 8:if(!t||224!=(224&this.syncPeek.buf[n])){e.next=20;break}return this.buf_frame_header[0]=S.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],e.next=14,this.tokenizer.ignore(n);case 14:return F("Sync at offset=".concat(this.tokenizer.position-1,", frameCount=").concat(this.frameCount)),this.syncFrameCount===this.frameCount&&(F("Re-synced MPEG stream, frameCount=".concat(this.frameCount)),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount,e.abrupt("return");case 20:if(t=!1,-1!==(n=this.syncPeek.buf.indexOf(S.SyncByte1,n))){e.next=30;break}if(!(this.syncPeek.len<this.syncPeek.buf.length)){e.next=25;break}throw new g.EndOfStreamError;case 25:return e.next=27,this.tokenizer.ignore(this.syncPeek.len);case 27:return e.abrupt("break",34);case 30:++n,t=!0;case 32:e.next=8;break;case 34:e.next=1;break;case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseCommonMpegHeader",value:function(){var e=a(r().mark(function e(){var t;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0===this.frameCount&&(this.mpegOffset=this.tokenizer.position-1),e.next=3,this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});case 3:e.prev=3,t=L.get(this.buf_frame_header,0),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(3),e.next=11,this.tokenizer.ignore(1);case 11:return this.metadata.addWarning("Parse error: "+e.t0.message),e.abrupt("return",!1);case 13:return e.next=15,this.tokenizer.ignore(3);case 15:return this.metadata.setFormat("container",t.container),this.metadata.setFormat("codec",t.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",t.samplingRate),this.frameCount++,e.abrupt("return",t.version>=2&&0===t.layer?this.parseAdts(t):this.parseAudioFrameHeader(t));case 21:case"end":return e.stop()}},e,this,[[3,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"parseAudioFrameHeader",value:function(){var e=a(r().mark(function e(t){var n,a,i;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.metadata.setFormat("numberOfChannels","mono"===t.channelMode?1:2),this.metadata.setFormat("bitrate",t.bitrate),this.frameCount<2e5&&F("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,t.layer,t.bitrate,t.samplingRate),null!==(n=t.calcSlotSize())){e.next=6;break}throw new Error("invalid slot_size");case 6:if(a=t.calcSamplesPerFrame(),F("samples_per_frame=".concat(a)),i=a/8*t.bitrate/t.samplingRate+(t.padding?n:0),this.frame_size=Math.floor(i),this.audioFrameHeader=t,this.bitrates.push(t.bitrate),1!==this.frameCount){e.next=18;break}return this.offset=L.len,e.next=17,this.skipSideInformation();case 17:return e.abrupt("return",!1);case 18:if(3!==this.frameCount){e.next=30;break}if(!this.areAllSame(this.bitrates)){e.next=26;break}if(this.samplesPerFrame=a,this.metadata.setFormat("codecProfile","CBR"),!this.tokenizer.fileInfo.size){e.next=24;break}return e.abrupt("return",!0);case 24:e.next=28;break;case 26:if(!this.metadata.format.duration){e.next=28;break}return e.abrupt("return",!0);case 28:if(this.options.duration){e.next=30;break}return e.abrupt("return",!0);case 30:if(this.options.duration&&4===this.frameCount&&(this.samplesPerFrame=a,this.calculateEofDuration=!0),this.offset=4,!t.isProtectedByCRC){e.next=38;break}return e.next=35,this.parseCrc();case 35:return e.abrupt("return",!1);case 38:return e.next=40,this.skipSideInformation();case 40:return e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseAdts",value:function(){var e=a(r().mark(function e(n){var a,i,o,s;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.alloc(3),e.next=3,this.tokenizer.readBuffer(a);case 3:return n.frameLength+=x.getBitAllignedNumber(a,0,0,11),this.totalDataLength+=n.frameLength,this.samplesPerFrame=1024,i=n.samplingRate/this.samplesPerFrame,o=0===this.frameCount?0:this.totalDataLength/this.frameCount,s=8*o*i+.5,this.metadata.setFormat("bitrate",s),F("frame-count=".concat(this.frameCount,", size=").concat(n.frameLength," bytes, bit-rate=").concat(s)),e.next=13,this.tokenizer.ignore(n.frameLength>7?n.frameLength-7:1);case 13:if(3!==this.frameCount){e.next=21;break}if(this.metadata.setFormat("codecProfile",n.codecProfile),n.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",n.mp4ChannelConfig.length),!this.options.duration){e.next=20;break}this.calculateEofDuration=!0,e.next=21;break;case 20:return e.abrupt("return",!0);case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseCrc",value:function(){var e=a(r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readNumber(b.INT16_BE);case 2:return this.crc=e.sent,this.offset+=2,e.abrupt("return",this.skipSideInformation());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"skipSideInformation",value:function(){var e=a(r().mark(function e(){var t;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.audioFrameHeader.calculateSideInfoLength(),e.next=3,this.tokenizer.readToken(new b.Uint8ArrayType(t));case 3:return this.offset+=t,e.next=6,this.readXtraInfoHeader();case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readXtraInfoHeader",value:function(){var e=a(r().mark(function e(){var t,n,a,i,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(P.InfoTagHeaderTag);case 2:t=e.sent,this.offset+=P.InfoTagHeaderTag.len,e.t0=t,e.next="Info"===e.t0?7:"Xing"===e.t0?9:"Xtra"===e.t0?15:"LAME"===e.t0?16:29;break;case 7:return this.metadata.setFormat("codecProfile","CBR"),e.abrupt("return",this.readXingInfoHeader());case 9:return e.next=11,this.readXingInfoHeader();case 11:return n=e.sent,a=O(n.vbrScale),this.metadata.setFormat("codecProfile",a),e.abrupt("return",null);case 15:return e.abrupt("break",29);case 16:return e.next=18,this.tokenizer.readToken(P.LameEncoderVersion);case 18:if(i=e.sent,!(this.frame_size>=this.offset+P.LameEncoderVersion.len)){e.next=27;break}return this.offset+=P.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+i),e.next=24,this.skipFrameData(this.frame_size-this.offset);case 24:return e.abrupt("return",null);case 27:return this.metadata.addWarning("Corrupt LAME header"),e.abrupt("break",29);case 29:if(!((o=this.frame_size-this.offset)<0)){e.next=34;break}this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"),e.next=36;break;case 34:return e.next=36,this.skipFrameData(o);case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readXingInfoHeader",value:function(){var e=a(r().mark(function e(){var t,n,a,i;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tokenizer.position,e.next=3,(0,P.readXingHeader)(this.tokenizer);case 3:if(n=e.sent,this.offset+=this.tokenizer.position-t,n.lame&&(this.metadata.setFormat("tool","LAME "+x.stripNulls(n.lame.version)),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),!n.streamSize){e.next=11;break}return a=this.audioFrameHeader.calcDuration(n.numFrames),this.metadata.setFormat("duration",a),F("Get duration from Xing header: %s",this.metadata.format.duration),e.abrupt("return",n);case 11:return i=this.frame_size-this.offset,e.next=14,this.skipFrameData(i);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"skipFrameData",value:function(){var e=a(r().mark(function e(t){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0)){e.next=2;break}throw new Error("frame-data-left cannot be negative");case 2:return e.next=4,this.tokenizer.ignore(t);case 4:this.countSkipFrameData+=t;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"areAllSame",value:function(e){var t=e[0];return e.every(function(e){return e===t})}}]),o}();exports.MpegParser=I;
},{"token-types":"rOYN","strtok3/lib/core":"tvmF","debug":"jD9Y","../common/Util":"e0Mm","../id3v2/AbstractID3Parser":"Tc8M","./XingTag":"jtQL","buffer":"qcot"}],"yr5a":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(P){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:L(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}r.wrap=f;var p={};function v(){}function d(){}function y(){}var m={};l(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(_([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=y.prototype=v.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function k(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(f).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(k.prototype),l(k.prototype,c,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),l(w,s,"Generator"),l(w,u,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=_,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=void 0;var s=require("token-types"),l=require("debug"),f=require("../../common/Util"),h=(0,l.default)("music-metadata:parser:musepack:sv8"),p=new s.StringType(2,"binary"),v={len:5,get:function(t,e){return{crc:s.UINT32_LE.get(t,e),streamVersion:s.UINT8.get(t,e+4)}}},d={len:2,get:function(t,e){return{sampleFrequency:[44100,48e3,37800,32e3][f.getBitAllignedNumber(t,e,0,3)],maxUsedBands:f.getBitAllignedNumber(t,e,3,5),channelCount:f.getBitAllignedNumber(t,e+1,0,4)+1,msUsed:f.isBitSet(t,e+1,4),audioBlockFrames:f.getBitAllignedNumber(t,e+1,5,3)}}},y=function(){function t(e){o(this,t),this.tokenizer=e}return a(t,[{key:"readPacketHeader",value:function(){var t=n(e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(p);case 2:return r=t.sent,t.next=5,this.readVariableSizeField();case 5:return n=t.sent,t.abrupt("return",{key:r,payloadLength:n.value-2-n.len});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readStreamHeader",value:function(){var t=n(e().mark(function t(r){var n,o,i,a,u;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},h("Reading SH at offset=".concat(this.tokenizer.position)),t.next=4,this.tokenizer.readToken(v);case 4:return o=t.sent,r-=v.len,Object.assign(n,o),h("SH.streamVersion = ".concat(o.streamVersion)),t.next=10,this.readVariableSizeField();case 10:return i=t.sent,r-=i.len,n.sampleCount=i.value,t.next=15,this.readVariableSizeField();case 15:return a=t.sent,r-=a.len,n.beginningOfSilence=a.value,t.next=20,this.tokenizer.readToken(d);case 20:return u=t.sent,r-=d.len,Object.assign(n,u),t.next=25,this.tokenizer.ignore(r);case 25:return t.abrupt("return",n);case 26:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readVariableSizeField",value:function(){var t=n(e().mark(function t(){var r,n,o,i=arguments;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:0,t.next=4,this.tokenizer.readNumber(s.UINT8);case 4:if(0!=(128&(o=t.sent))){t.next=7;break}return t.abrupt("return",{len:r,value:n+o});case 7:return o&=127,o+=n,t.abrupt("return",this.readVariableSizeField(r+1,o<<7));case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}();exports.StreamReader=y;
},{"token-types":"rOYN","debug":"jD9Y","../../common/Util":"e0Mm"}],"gbVp":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(F){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),u=new j(n||[]);return a(i,"_invoke",{value:k(t,r,u)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(F){return{type:"throw",arg:F}}}r.wrap=l;var p={};function y(){}function d(){}function v(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=v.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(e,r){var n;a(this,"_invoke",{value:function(a,i){function u(){return new r(function(n,u){!function n(a,i,u,c){var s=h(e[a],e,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(a,i,n,u)})}return n=n?n.then(u,u):u()}})}function k(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return _()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=P(i,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:d,configurable:!0}),d.displayName=f(v,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,c,function(){return this}),r.AsyncIterator=L,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=S,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function u(t){r(i,o,a,u,c,"next",t)}function c(t){r(i,o,a,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpcSv8Parser=void 0;var v=require("debug"),m=require("../../common/BasicParser"),g=require("../../apev2/APEv2Parser"),b=require("../../common/FourCC"),w=require("./StreamVersion8"),x=(0,v.default)("music-metadata:parser:musepack"),L=function(t){s(a,m.BasicParser);var r=l(a);function a(){var t;return o(this,a),(t=r.apply(this,arguments)).audioLength=0,t}return i(a,[{key:"parse",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(b.FourCcToken);case 2:if("MPCK"===t.sent){t.next=5;break}throw new Error("Invalid Magic number");case 5:return this.metadata.setFormat("container","Musepack, SV8"),t.abrupt("return",this.parsePacket());case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parsePacket",value:function(){var t=n(e().mark(function t(){var r,n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=new w.StreamReader(this.tokenizer);case 1:return t.next=3,r.readPacketHeader();case 3:n=t.sent,x("packet-header key=".concat(n.key,", payloadLength=").concat(n.payloadLength)),t.t0=n.key,t.next="SH"===t.t0?8:"AP"===t.t0?16:"RG"===t.t0?20:"EI"===t.t0?20:"SO"===t.t0?20:"ST"===t.t0?20:"CT"===t.t0?20:"SE"===t.t0?23:25;break;case 8:return t.next=10,r.readStreamHeader(n.payloadLength);case 10:return o=t.sent,this.metadata.setFormat("numberOfSamples",o.sampleCount),this.metadata.setFormat("sampleRate",o.sampleFrequency),this.metadata.setFormat("duration",o.sampleCount/o.sampleFrequency),this.metadata.setFormat("numberOfChannels",o.channelCount),t.abrupt("break",26);case 16:return this.audioLength+=n.payloadLength,t.next=19,this.tokenizer.ignore(n.payloadLength);case 19:return t.abrupt("break",26);case 20:return t.next=22,this.tokenizer.ignore(n.payloadLength);case 22:return t.abrupt("break",26);case 23:return this.metadata.setFormat("bitrate",8*this.audioLength/this.metadata.format.duration),t.abrupt("return",g.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 25:throw new Error("Unexpected header: ".concat(n.key));case 26:t.next=1;break;case 27:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),a}();exports.MpcSv8Parser=L;
},{"debug":"jD9Y","../../common/BasicParser":"O0hF","../../apev2/APEv2Parser":"IhDz","../../common/FourCC":"P2sd","./StreamVersion8":"yr5a"}],"qgDo":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(N){f=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}e.wrap=h;var p={};function v(){}function d(){}function y(){}var g={};f(g,u,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(S([])));w&&w!==n&&o.call(w,u)&&(g=w);var b=y.prototype=v.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(r){f(t,r,function(t){return this._invoke(r,t)})})}function L(r,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var s=l(r[i],r,a);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==t(h)&&o.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(h).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=k(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=l(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function k(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,k(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,i(b,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:d,configurable:!0}),d.displayName=f(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,c,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),f(b,s,"Generator"),f(b,u,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void e(s)}u.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(r){var e=c(r,"string");return"symbol"===t(e)?e:String(e)}function c(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitReader=void 0;var s=require("token-types"),f=function(){function t(r){o(this,t),this.tokenizer=r,this.pos=0,this.dword=void 0}return a(t,[{key:"read",value:function(){var t=n(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.dword){t.next=6;break}return t.next=3,this.tokenizer.readToken(s.UINT32_LE);case 3:this.dword=t.sent,t.next=0;break;case 6:if(n=this.dword,this.pos+=e,!(this.pos<32)){t.next=13;break}return n>>>=32-this.pos,t.abrupt("return",n&(1<<e)-1);case 13:if(this.pos-=32,0!==this.pos){t.next=19;break}return this.dword=void 0,t.abrupt("return",n&(1<<e)-1);case 19:return t.next=21,this.tokenizer.readToken(s.UINT32_LE);case 21:return this.dword=t.sent,this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),t.abrupt("return",n&(1<<e)-1);case 24:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"ignore",value:function(){var t=n(r().mark(function t(e){var n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.pos>0&&(n=32-this.pos,this.dword=void 0,e-=n,this.pos=0),i=(e-(o=e%32))/32,t.next=5,this.tokenizer.ignore(4*i);case 5:return t.abrupt("return",this.read(o));case 6:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()}]),t}();exports.BitReader=f;
},{"token-types":"rOYN"}],"yVT9":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var t=require("token-types"),r=require("../../common/Util");exports.Header={len:24,get:function(i,l){var n={signature:e.from(i).toString("latin1",l,l+3),streamMinorVersion:r.getBitAllignedNumber(i,l+3,0,4),streamMajorVersion:r.getBitAllignedNumber(i,l+3,4,4),frameCount:t.UINT32_LE.get(i,l+4),maxLevel:t.UINT16_LE.get(i,l+8),sampleFrequency:[44100,48e3,37800,32e3][r.getBitAllignedNumber(i,l+10,0,2)],link:r.getBitAllignedNumber(i,l+10,2,2),profile:r.getBitAllignedNumber(i,l+10,4,4),maxBand:r.getBitAllignedNumber(i,l+11,0,6),intensityStereo:r.isBitSet(i,l+11,6),midSideStereo:r.isBitSet(i,l+11,7),titlePeak:t.UINT16_LE.get(i,l+12),titleGain:t.UINT16_LE.get(i,l+14),albumPeak:t.UINT16_LE.get(i,l+16),albumGain:t.UINT16_LE.get(i,l+18),lastFrameLength:t.UINT32_LE.get(i,l+20)>>>20&2047,trueGapless:r.isBitSet(i,l+23,0)};return n.lastFrameLength=n.trueGapless?t.UINT32_LE.get(i,20)>>>20&2047:0,n}};
},{"token-types":"rOYN","../../common/Util":"e0Mm","buffer":"qcot"}],"Kvit":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(F){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new k(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(F){return{type:"throw",arg:F}}}r.wrap=l;var p={};function d(){}function y(){}function v(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(_([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=v.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,c,function(){return this}),r.AsyncIterator=L,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpcSv7Parser=void 0;var v=require("debug"),m=require("../../common/BasicParser"),g=require("../../apev2/APEv2Parser"),b=require("./BitReader"),w=require("./StreamVersion7"),x=(0,v.default)("music-metadata:parser:musepack"),L=function(t){s(i,m.BasicParser);var r=l(i);function i(){var t;return o(this,i),(t=r.apply(this,arguments)).audioLength=0,t}return a(i,[{key:"parse",value:function(){var t=n(e().mark(function t(){var r,n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(w.Header);case 2:if("MP+"===(r=t.sent).signature){t.next=5;break}throw new Error("Unexpected magic number");case 5:return x("stream-version=".concat(r.streamMajorVersion,".").concat(r.streamMinorVersion)),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",r.sampleFrequency),n=1152*(r.frameCount-1)+r.lastFrameLength,this.metadata.setFormat("numberOfSamples",n),this.duration=n/r.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new b.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",r.midSideStereo||r.intensityStereo?2:1),t.next=16,this.bitreader.read(8);case 16:return o=t.sent,this.metadata.setFormat("codec",(o/100).toFixed(2)),t.next=20,this.skipAudioData(r.frameCount);case 20:return x("End of audio stream, switching to APEv2, offset=".concat(this.tokenizer.position)),t.abrupt("return",g.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"skipAudioData",value:function(){var t=n(e().mark(function t(r){var n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r-- >0)){t.next=9;break}return t.next=3,this.bitreader.read(20);case 3:return n=t.sent,this.audioLength+=20+n,t.next=7,this.bitreader.ignore(n);case 7:t.next=0;break;case 9:return t.next=11,this.bitreader.read(11);case 11:o=t.sent,this.audioLength+=o,this.metadata.setFormat("bitrate",this.audioLength/this.duration);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),i}();exports.MpcSv7Parser=L;
},{"debug":"jD9Y","../../common/BasicParser":"O0hF","../../apev2/APEv2Parser":"IhDz","./BitReader":"qgDo","./StreamVersion7":"yVT9"}],"dsOL":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(T){s=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new _(n||[]);return i(a,"_invoke",{value:P(t,e,u)}),a}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(T){return{type:"throw",arg:T}}}e.wrap=l;var h={};function y(){}function v(){}function d(){}var m={};s(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(k([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function O(r,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=p(r[i],r,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==t(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function P(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=E(a,e);if(u){if(u===h)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=p(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function E(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,E(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),h;var o=p(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),s(w,f,"Generator"),s(w,u,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},e}function e(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(r){var e=c(r,"string");return"symbol"===t(e)?e:String(e)}function c(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function f(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r)}function s(t,r){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function l(t){var r=y();return function(){var e,n=v(t);if(r){var o=v(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return p(this,e)}}function p(r,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(r)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var d=require("debug"),m=require("token-types"),g=require("../id3v2/AbstractID3Parser"),b=require("./sv8/MpcSv8Parser"),w=require("./sv7/MpcSv7Parser"),x=(0,d.default)("music-metadata:parser:musepack"),O=function(t){f(i,g.AbstractID3Parser);var e=l(i);function i(){return o(this,i),e.apply(this,arguments)}return a(i,[{key:"postId3v2Parse",value:function(){var t=n(r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.peekToken(new m.StringType(3,"binary"));case 2:e=t.sent,t.t0=e,t.next="MP+"===t.t0?6:"MPC"===t.t0?9:12;break;case 6:return x("Musepack stream-version 7"),n=new w.MpcSv7Parser,t.abrupt("break",13);case 9:return x("Musepack stream-version 8"),n=new b.MpcSv8Parser,t.abrupt("break",13);case 12:throw new Error("Invalid Musepack signature prefix");case 13:return n.init(this.metadata,this.tokenizer,this.options),t.abrupt("return",n.parse());case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),i}();exports.default=O;
},{"debug":"jD9Y","token-types":"rOYN","../id3v2/AbstractID3Parser":"Tc8M","./sv8/MpcSv8Parser":"gbVp","./sv7/MpcSv7Parser":"Kvit"}],"rwC0":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var r=i(t,"string");return"symbol"===e(r)?r:String(r)}function i(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdHeader=void 0;var a=require("token-types"),u=function(){function e(r){if(t(this,e),this.len=r,r<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}return n(e,[{key:"get",value:function(e,t){return{magicSignature:new a.StringType(8,"ascii").get(e,t+0),version:e.readUInt8(t+8),channelCount:e.readUInt8(t+9),preSkip:e.readInt16LE(t+10),inputSampleRate:e.readInt32LE(t+12),outputGain:e.readInt16LE(t+16),channelMapping:e.readUInt8(t+18)}}}]),e}();exports.IdHeader=u;
},{"token-types":"rOYN"}],"Ja40":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=l();return function(){var r,o=p(t);if(e){var n=p(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return c(this,r)}}function c(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.OpusParser=void 0;var y=require("token-types"),m=require("../vorbis/VorbisParser"),b=require("./Opus"),d=function(t){a(n,m.VorbisParser);var r=s(n);function n(t,o,i){var a;return e(this,n),(a=r.call(this,t,o)).tokenizer=i,a.lastPos=-1,a}return o(n,[{key:"parseFirstPage",value:function(t,e){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new b.IdHeader(e.length).get(e,0),"OpusHead"!==this.idHeader.magicSignature)throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}},{key:"parseFullPage",value:function(t){switch(new y.StringType(8,"ascii").get(t,0)){case"OpusTags":this.parseUserCommentList(t,8),this.lastPos=this.tokenizer.position-t.length}}},{key:"calculateDuration",value:function(t){if(this.metadata.format.sampleRate&&t.absoluteGranulePosition>=0){var e=t.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",e),this.metadata.setFormat("duration",e/48e3),-1!==this.lastPos&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){var r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}]),n}();exports.OpusParser=d;
},{"token-types":"rOYN","../vorbis/VorbisParser":"nYTK","./Opus":"rwC0"}],"PMZJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var e=require("token-types"),r=require("../../common/Util");exports.Header={len:80,get:function(t,n){return{speex:new e.StringType(8,"ascii").get(t,n+0),version:r.trimRightNull(new e.StringType(20,"ascii").get(t,n+8)),version_id:t.readInt32LE(n+28),header_size:t.readInt32LE(n+32),rate:t.readInt32LE(n+36),mode:t.readInt32LE(n+40),mode_bitstream_version:t.readInt32LE(n+44),nb_channels:t.readInt32LE(n+48),bitrate:t.readInt32LE(n+52),frame_size:t.readInt32LE(n+56),vbr:t.readInt32LE(n+60),frames_per_packet:t.readInt32LE(n+64),extra_headers:t.readInt32LE(n+68),reserved1:t.readInt32LE(n+72),reserved2:t.readInt32LE(n+76)}}};
},{"token-types":"rOYN","../../common/Util":"e0Mm"}],"D7fj":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=l();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeexParser=void 0;var b=require("debug"),y=require("../vorbis/VorbisParser"),m=require("./Speex"),d=(0,b.default)("music-metadata:parser:ogg:speex"),v=function(t){u(o,y.VorbisParser);var r=c(o);function o(t,n,i){var u;return e(this,o),(u=r.call(this,t,n)).tokenizer=i,u}return n(o,[{key:"parseFirstPage",value:function(t,e){d("First Ogg/Speex page");var r=m.Header.get(e,0);this.metadata.setFormat("codec","Speex ".concat(r.version)),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),-1!==r.bitrate&&this.metadata.setFormat("bitrate",r.bitrate)}}]),o}();exports.SpeexParser=v;
},{"debug":"jD9Y","../vorbis/VorbisParser":"nYTK","./Speex":"PMZJ"}],"ArH1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdentificationHeader=void 0;var e=require("token-types");exports.IdentificationHeader={len:42,get:function(t,r){return{id:new e.StringType(7,"ascii").get(t,r),vmaj:t.readUInt8(r+7),vmin:t.readUInt8(r+8),vrev:t.readUInt8(r+9),vmbw:t.readUInt16BE(r+10),vmbh:t.readUInt16BE(r+17),nombr:e.UINT24_BE.get(t,r+37),nqual:t.readUInt8(r+40)}}};
},{"token-types":"rOYN"}],"l43t":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var r=a(t,"string");return"symbol"===e(r)?r:String(r)}function a(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,r||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TheoraParser=void 0;var i=require("debug"),u=require("./Theora"),l=(0,i.default)("music-metadata:parser:ogg:theora"),c=function(){function e(r,o,n){t(this,e),this.metadata=r,this.tokenizer=n}return o(e,[{key:"parsePage",value:function(e,t){e.headerType.firstPage&&this.parseFirstPage(e,t)}},{key:"flush",value:function(){l("flush")}},{key:"calculateDuration",value:function(e){l("duration calculation not implemented")}},{key:"parseFirstPage",value:function(e,t){l("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");var r=u.IdentificationHeader.get(t,0);this.metadata.setFormat("bitrate",r.nombr)}}]),e}();exports.TheoraParser=c;
},{"debug":"jD9Y","./Theora":"ArH1"}],"fxkA":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(){"use strict";r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(j){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new L(n||[]);return o(i,"_invoke",{value:O(t,r,u)}),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(j){return{type:"throw",arg:j}}}t.wrap=f;var p={};function g(){}function d(){}function y(){}var v={};s(v,i,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(T([])));b&&b!==e&&n.call(b,i)&&(v=b);var w=y.prototype=g.prototype=Object.create(v);function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){var r;o(this,"_invoke",{value:function(o,a){function i(){return new e(function(r,i){!function r(o,a,i,u){var c=l(t[o],t,a);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==h(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,i,u)},function(t){r("throw",t,i,u)}):e.resolve(f).then(function(t){s.value=t,i(s)},function(t){return r("throw",t,i,u)})}u(c.arg)}(o,a,r,i)})}return r=r?r.then(i,i):i()}})}function O(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return _()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=k(i,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:d,configurable:!0}),d.displayName=s(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(P.prototype),s(P.prototype,u,function(){return this}),t.AsyncIterator=P,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new P(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),s(w,c,"Generator"),s(w,i,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,a){var i=t.apply(e,r);function u(t){n(i,o,a,u,c,"next",t)}function c(t){n(i,o,a,u,c,"throw",t)}u(void 0)})}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=f();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function d(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=v(t,"string");return"symbol"===h(e)?e:String(e)}function v(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.OggParser=exports.SegmentTable=void 0;var m=require("token-types"),b=require("strtok3/lib/core"),w=require("debug"),x=require("../common/Util"),P=require("../common/FourCC"),O=require("../common/BasicParser"),k=require("./vorbis/VorbisParser"),S=require("./opus/OpusParser"),E=require("./speex/SpeexParser"),L=require("./theora/TheoraParser"),T=(0,w.default)("music-metadata:parser:ogg"),_=function(){function t(e){p(this,t),this.len=e.page_segments}return d(t,[{key:"get",value:function(e,r){return{totalPageSize:t.sum(e,r,this.len)}}}],[{key:"sum",value:function(t,e,r){for(var n=0,o=e;o<e+r;++o)n+=t[o];return n}}]),t}();exports.SegmentTable=_;var j=function(t){a(i,O.BasicParser);var n=u(i);function i(){return p(this,i),n.apply(this,arguments)}return d(i,[{key:"parse",value:function(){var t=o(r().mark(function t(){var n,o,a,u;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:T("pos=%s, parsePage()",this.tokenizer.position),t.prev=1;case 2:return t.next=4,this.tokenizer.readToken(i.Header);case 4:if("OggS"===(n=t.sent).capturePattern){t.next=7;break}throw new Error("Invalid Ogg capture pattern");case 7:return this.metadata.setFormat("container","Ogg"),this.header=n,this.pageNumber=n.pageSequenceNo,T("page#=%s, Ogg.id=%s",n.pageSequenceNo,n.capturePattern),t.next=13,this.tokenizer.readToken(new _(n));case 13:return o=t.sent,T("totalPageSize=%s",o.totalPageSize),t.next=17,this.tokenizer.readToken(new m.Uint8ArrayType(o.totalPageSize));case 17:if(a=t.sent,T("firstPage=%s, lastPage=%s, continued=%s",n.headerType.firstPage,n.headerType.lastPage,n.headerType.continued),!n.headerType.firstPage){t.next=37;break}u=new m.StringType(7,"ascii").get(e.from(a),0),t.t0=u,t.next="vorbis"===t.t0?24:"OpusHea"===t.t0?27:"Speex  "===t.t0?30:"fishead"===t.t0?33:"\0theora"===t.t0?33:36;break;case 24:return T("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new k.VorbisParser(this.metadata,this.options),t.abrupt("break",37);case 27:return T("Set page consumer to Ogg/Opus"),this.pageConsumer=new S.OpusParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 30:return T("Set page consumer to Ogg/Speex"),this.pageConsumer=new E.SpeexParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 33:return T("Set page consumer to Ogg/Theora"),this.pageConsumer=new L.TheoraParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 36:throw new Error("gg audio-codec not recognized (id="+u+")");case 37:this.pageConsumer.parsePage(n,a);case 38:if(!n.headerType.lastPage){t.next=2;break}case 39:t.next=55;break;case 41:if(t.prev=41,t.t1=t.catch(1),!(t.t1 instanceof b.EndOfStreamError)){t.next=50;break}this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),T("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header),t.next=55;break;case 50:if(!t.t1.message.startsWith("FourCC")){t.next=54;break}this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush()),t.next=55;break;case 54:throw t.t1;case 55:case"end":return t.stop()}},t,this,[[1,41]])}));return function(){return t.apply(this,arguments)}}()}]),i}();j.Header={len:27,get:function(t,e){return{capturePattern:P.FourCcToken.get(t,e),version:m.UINT8.get(t,e+4),headerType:{continued:x.getBit(t,e+5,0),firstPage:x.getBit(t,e+5,1),lastPage:x.getBit(t,e+5,2)},absoluteGranulePosition:Number(m.UINT64_LE.get(t,e+6)),streamSerialNumber:m.UINT32_LE.get(t,e+14),pageSequenceNo:m.UINT32_LE.get(t,e+18),pageChecksum:m.UINT32_LE.get(t,e+22),page_segments:m.UINT8.get(t,e+26)}}},exports.OggParser=j;
},{"token-types":"rOYN","strtok3/lib/core":"tvmF","debug":"jD9Y","../common/Util":"e0Mm","../common/FourCC":"P2sd","../common/BasicParser":"O0hF","./vorbis/VorbisParser":"nYTK","./opus/OpusParser":"Ja40","./speex/SpeexParser":"D7fj","./theora/TheoraParser":"l43t","buffer":"qcot"}],"JdqU":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var r=i(t,"string");return"symbol"===e(r)?r:String(r)}function i(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListInfoTagValue=exports.Header=void 0;var u=require("token-types");exports.Header={len:8,get:function(e,t){return{chunkID:e.toString("binary",t,t+4),chunkSize:u.UINT32_LE.get(e,4)}}};var a=function(){function e(r){t(this,e),this.tagHeader=r,this.len=r.chunkSize,this.len+=1&this.len}return n(e,[{key:"get",value:function(e,t){return new u.StringType(this.tagHeader.chunkSize,"ascii").get(e,t)}}]),e}();exports.ListInfoTagValue=a;
},{"token-types":"rOYN"}],"gDSg":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FactChunk=exports.Format=exports.WaveFormat=void 0,function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"}(a=exports.WaveFormat||(exports.WaveFormat={}));var u=function(){function t(r){if(e(this,t),r.chunkSize<16)throw new Error("Invalid chunk size");this.len=r.chunkSize}return n(t,[{key:"get",value:function(t,e){return{wFormatTag:t.readUInt16LE(e),nChannels:t.readUInt16LE(e+2),nSamplesPerSec:t.readUInt32LE(e+4),nAvgBytesPerSec:t.readUInt32LE(e+8),nBlockAlign:t.readUInt16LE(e+12),wBitsPerSample:t.readUInt16LE(e+14)}}}]),t}();exports.Format=u;var c=function(){function t(r){if(e(this,t),r.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=r.chunkSize}return n(t,[{key:"get",value:function(t,e){return{dwSampleLength:t.readUInt32LE(e)}}}]),t}();exports.FactChunk=c;
},{}],"nhC3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BroadcastAudioExtensionChunk=void 0;var e=require("token-types"),t=require("../common/Util");exports.BroadcastAudioExtensionChunk={len:420,get:function(i,r){return{description:(0,t.stripNulls)(new e.StringType(256,"ascii").get(i,r)).trim(),originator:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+256)).trim(),originatorReference:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+288)).trim(),originationDate:(0,t.stripNulls)(new e.StringType(10,"ascii").get(i,r+320)).trim(),originationTime:(0,t.stripNulls)(new e.StringType(8,"ascii").get(i,r+330)).trim(),timeReferenceLow:e.UINT32_LE.get(i,r+338),timeReferenceHigh:e.UINT32_LE.get(i,r+342),version:e.UINT16_LE.get(i,r+346),umid:new e.Uint8ArrayType(64).get(i,r+348),loudnessValue:e.UINT16_LE.get(i,r+412),maxTruePeakLevel:e.UINT16_LE.get(i,r+414),maxMomentaryLoudness:e.UINT16_LE.get(i,r+416),maxShortTermLoudness:e.UINT16_LE.get(i,r+418)}}};
},{"token-types":"rOYN","../common/Util":"e0Mm"}],"PZov":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(O){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),c=new E(n||[]);return a(i,"_invoke",{value:F(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(O){return{type:"throw",arg:O}}}r.wrap=l;var p={};function d(){}function v(){}function y(){}var m={};f(m,c,function(){return this});var k=Object.getPrototypeOf,g=k&&k(k(T([])));g&&g!==n&&o.call(g,c)&&(m=g);var b=y.prototype=d.prototype=Object.create(m);function w(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function x(e,r){var n;a(this,"_invoke",{value:function(a,i){function c(){return new r(function(n,c){!function n(a,i,c,u){var s=h(e[a],e,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(a,i,n,c)})}return n=n?n.then(c,c):c()}})}function F(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=I(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function I(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=f(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},w(x.prototype),f(x.prototype,u,function(){return this}),r.AsyncIterator=x,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new x(l(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(b),f(b,s,"Generator"),f(b,c,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=T,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),z(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,u,"next",t)}function u(t){r(i,o,a,c,u,"throw",t)}c(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaveParser=void 0;var y=require("strtok3/lib/core"),m=require("token-types"),k=require("debug"),g=require("../riff/RiffChunk"),b=require("./../wav/WaveChunk"),w=require("../id3v2/ID3v2Parser"),x=require("../common/Util"),F=require("../common/FourCC"),I=require("../common/BasicParser"),S=require("../wav/BwfChunk"),z=(0,k.default)("music-metadata:parser:RIFF"),E=function(t){s(a,I.BasicParser);var r=l(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"parse",value:function(){var t=n(e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(g.Header);case 2:if(r=t.sent,z("pos=".concat(this.tokenizer.position,", parse: chunkID=").concat(r.chunkID)),"RIFF"===r.chunkID){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",this.parseRiffChunk(r.chunkSize).catch(function(t){if(!(t instanceof y.EndOfStreamError))throw t}));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseRiffChunk",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(F.FourCcToken);case 2:n=t.sent,this.metadata.setFormat("container",n),t.t0=n,t.next="WAVE"===t.t0?7:8;break;case 7:return t.abrupt("return",this.readWaveChunk(r-F.FourCcToken.len));case 8:throw new Error("Unsupported RIFF format: RIFF/".concat(n));case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readWaveChunk",value:function(){var t=n(e().mark(function t(r){var n,o=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e().mark(function t(){var n,a,i,c,u,s,f,l,h,p;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.tokenizer.readToken(g.Header);case 2:n=t.sent,r-=g.Header.len+n.chunkSize,n.chunkSize>r&&o.metadata.addWarning("Data chunk size exceeds file size"),o.header=n,z("pos=".concat(o.tokenizer.position,", readChunk: chunkID=RIFF/WAVE/").concat(n.chunkID)),t.t0=n.chunkID,t.next="LIST"===t.t0?10:"fact"===t.t0?13:"fmt "===t.t0?18:"id3 "===t.t0?30:"ID3 "===t.t0?30:"data"===t.t0?37:"bext"===t.t0?46:"\0\0\0\0"===t.t0?54:59;break;case 10:return t.next=12,o.parseListTag(n);case 12:return t.abrupt("break",63);case 13:return o.metadata.setFormat("lossless",!1),t.next=16,o.tokenizer.readToken(new b.FactChunk(n));case 16:return o.fact=t.sent,t.abrupt("break",63);case 18:return t.next=20,o.tokenizer.readToken(new b.Format(n));case 20:return a=t.sent,(i=b.WaveFormat[a.wFormatTag])||(z("WAVE/non-PCM format="+a.wFormatTag),i="non-PCM ("+a.wFormatTag+")"),o.metadata.setFormat("codec",i),o.metadata.setFormat("bitsPerSample",a.wBitsPerSample),o.metadata.setFormat("sampleRate",a.nSamplesPerSec),o.metadata.setFormat("numberOfChannels",a.nChannels),o.metadata.setFormat("bitrate",a.nBlockAlign*a.nSamplesPerSec*8),o.blockAlign=a.nBlockAlign,t.abrupt("break",63);case 30:return t.next=32,o.tokenizer.readToken(new m.Uint8ArrayType(n.chunkSize));case 32:return c=t.sent,u=y.fromBuffer(c),t.next=36,(new w.ID3v2Parser).parse(o.metadata,u,o.options);case 36:return t.abrupt("break",63);case 37:return!1!==o.metadata.format.lossless&&o.metadata.setFormat("lossless",!0),s=n.chunkSize,o.tokenizer.fileInfo.size&&(f=o.tokenizer.fileInfo.size-o.tokenizer.position)<s&&(o.metadata.addWarning("data chunk length exceeding file length"),s=f),(l=o.fact?o.fact.dwSampleLength:4294967295===s?void 0:s/o.blockAlign)&&(o.metadata.setFormat("numberOfSamples",l),o.metadata.setFormat("duration",l/o.metadata.format.sampleRate)),"ADPCM"===o.metadata.format.codec?o.metadata.setFormat("bitrate",352e3):o.metadata.setFormat("bitrate",o.blockAlign*o.metadata.format.sampleRate*8),t.next=45,o.tokenizer.ignore(n.chunkSize);case 45:return t.abrupt("break",63);case 46:return t.next=48,o.tokenizer.readToken(S.BroadcastAudioExtensionChunk);case 48:return h=t.sent,Object.keys(h).forEach(function(t){o.metadata.addTag("exif","bext."+t,h[t])}),p=n.chunkSize-S.BroadcastAudioExtensionChunk.len,t.next=53,o.tokenizer.ignore(p);case 53:return t.abrupt("break",63);case 54:return z("Ignore padding chunk: RIFF/".concat(n.chunkID," of ").concat(n.chunkSize," bytes")),o.metadata.addWarning("Ignore chunk: RIFF/"+n.chunkID),t.next=58,o.tokenizer.ignore(n.chunkSize);case 58:return t.abrupt("break",63);case 59:return z("Ignore chunk: RIFF/".concat(n.chunkID," of ").concat(n.chunkSize," bytes")),o.metadata.addWarning("Ignore chunk: RIFF/"+n.chunkID),t.next=63,o.tokenizer.ignore(n.chunkSize);case 63:if(o.header.chunkSize%2!=1){t.next=67;break}return z("Read odd padding byte"),t.next=67,o.tokenizer.ignore(1);case 67:case"end":return t.stop()}},t)});case 1:if(!(r>=g.Header.len)){t.next=5;break}return t.delegateYield(n(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseListTag",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new m.StringType(4,"binary"));case 2:n=t.sent,z("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),t.t0=n,t.next="INFO"===t.t0?7:(t.t0,8);break;case 7:return t.abrupt("return",this.parseRiffInfoTags(r.chunkSize-4));case 8:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+n),z("Ignoring chunkID=RIFF/WAVE/LIST/"+n),t.abrupt("return",this.tokenizer.ignore(r.chunkSize-4).then());case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseRiffInfoTags",value:function(){var t=n(e().mark(function t(r){var n,o,a;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r>=8)){t.next=12;break}return t.next=3,this.tokenizer.readToken(g.Header);case 3:return n=t.sent,o=new g.ListInfoTagValue(n),t.next=7,this.tokenizer.readToken(o);case 7:a=t.sent,this.addTag(n.chunkID,x.stripNulls(a)),r-=8+o.len,t.next=0;break;case 12:if(0===r){t.next=14;break}throw Error("Illegal remaining size: "+r);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addTag",value:function(t,e){this.metadata.addTag("exif",t,e)}}]),a}();exports.WaveParser=E;
},{"strtok3/lib/core":"tvmF","token-types":"rOYN","debug":"jD9Y","../riff/RiffChunk":"JdqU","./../wav/WaveChunk":"gDSg","../id3v2/ID3v2Parser":"pIqu","../common/Util":"e0Mm","../common/FourCC":"P2sd","../common/BasicParser":"O0hF","../wav/BwfChunk":"nhC3"}],"aBWN":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t){var i=o(t,"string");return"symbol"===e(i)?i:String(i)}function o(t,i){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,i||"default");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WavPack=void 0;var l=require("token-types"),u=require("../common/FourCC"),a=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],s=function(){function e(){t(this,e)}return n(e,null,[{key:"isBitSet",value:function(t,i){return 1===e.getBitAllignedNumber(t,i,1)}},{key:"getBitAllignedNumber",value:function(e,t,i){return e>>>t&4294967295>>>32-i}}]),e}();s.BlockHeaderToken={len:32,get:function(e,t){var i=l.UINT32_LE.get(e,t+24),n={BlockID:u.FourCcToken.get(e,t),blockSize:l.UINT32_LE.get(e,t+4),version:l.UINT16_LE.get(e,t+8),totalSamples:l.UINT32_LE.get(e,t+12),blockIndex:l.UINT32_LE.get(e,t+16),blockSamples:l.UINT32_LE.get(e,t+20),flags:{bitsPerSample:8*(1+s.getBitAllignedNumber(i,0,2)),isMono:s.isBitSet(i,2),isHybrid:s.isBitSet(i,3),isJointStereo:s.isBitSet(i,4),crossChannel:s.isBitSet(i,5),hybridNoiseShaping:s.isBitSet(i,6),floatingPoint:s.isBitSet(i,7),samplingRate:a[s.getBitAllignedNumber(i,23,4)],isDSD:s.isBitSet(i,31)},crc:new l.Uint8ArrayType(4).get(e,t+28)};return n.flags.isDSD&&(n.totalSamples*=8),n}},s.MetadataIdToken={len:1,get:function(e,t){return{functionId:s.getBitAllignedNumber(e[t],0,6),isOptional:s.isBitSet(e[t],5),isOddSize:s.isBitSet(e[t],6),largeBlock:s.isBitSet(e[t],7)}}},exports.WavPack=s;
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"DiCQ":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(j){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),c=new L(n||[]);return a(i,"_invoke",{value:P(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(j){return{type:"throw",arg:j}}}t.wrap=f;var p={};function d(){}function v(){}function y(){}var m={};l(m,c,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(_([])));g&&g!==e&&o.call(g,c)&&(m=g);var k=y.prototype=d.prototype=Object.create(m);function w(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var n;a(this,"_invoke",{value:function(a,i){function c(){return new e(function(n,c){!function n(a,i,c,u){var s=h(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}(a,i,n,c)})}return n=n?n.then(c,c):c()}})}function P(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return I()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=y,a(k,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,function(){return this}),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(k),l(k,s,"Generator"),l(k,c,function(){return this}),l(k,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function c(t){o(i,n,a,c,u,"next",t)}function u(t){o(i,n,a,c,u,"throw",t)}c(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function u(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=l(t,"string");return"symbol"===r(e)?e:String(e)}function l(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=y();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WavPackParser=void 0;var b=require("token-types"),g=require("../apev2/APEv2Parser"),k=require("../common/FourCC"),w=require("../common/BasicParser"),x=require("./WavPackToken"),P=require("debug"),S=(0,P.default)("music-metadata:parser:WavPack"),O=function(t){f(o,w.BasicParser);var r=p(o);function o(){return i(this,o),r.apply(this,arguments)}return u(o,[{key:"parse",value:function(){var t=a(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.audioDataSize=0,t.next=3,this.parseWavPackBlocks();case 3:return t.abrupt("return",g.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseWavPackBlocks",value:function(){var t=a(n().mark(function t(){var e,r;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.peekToken(k.FourCcToken);case 2:if("wvpk"===t.sent){t.next=5;break}return t.abrupt("break",17);case 5:return t.next=7,this.tokenizer.readToken(x.WavPack.BlockHeaderToken);case 7:if("wvpk"===(e=t.sent).BlockID){t.next=10;break}throw new Error("Invalid WavPack Block-ID");case 10:return S("WavPack header blockIndex=".concat(e.blockIndex,", len=").concat(x.WavPack.BlockHeaderToken.len)),0!==e.blockIndex||this.metadata.format.container||(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!e.flags.isHybrid),this.metadata.setFormat("bitsPerSample",e.flags.bitsPerSample),e.flags.isDSD||(this.metadata.setFormat("sampleRate",e.flags.samplingRate),this.metadata.setFormat("duration",e.totalSamples/e.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",e.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",e.totalSamples),this.metadata.setFormat("codec",e.flags.isDSD?"DSD":"PCM")),r=e.blockSize-(x.WavPack.BlockHeaderToken.len-8),t.next=15,0===e.blockIndex?this.parseMetadataSubBlock(e,r):this.tokenizer.ignore(r);case 15:e.blockSamples>0&&(this.audioDataSize+=e.blockSize);case 16:if(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=x.WavPack.BlockHeaderToken.len){t.next=0;break}case 17:this.metadata.setFormat("bitrate",8*this.audioDataSize/this.metadata.format.duration);case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseMetadataSubBlock",value:function(){var t=a(n().mark(function t(r,o){var a,i,c,u,s;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o>x.WavPack.MetadataIdToken.len)){t.next=36;break}return t.next=3,this.tokenizer.readToken(x.WavPack.MetadataIdToken);case 3:return a=t.sent,t.next=6,this.tokenizer.readNumber(a.largeBlock?b.UINT24_LE:b.UINT8);case 6:return i=t.sent,c=e.alloc(2*i-(a.isOddSize?1:0)),t.next=10,this.tokenizer.readBuffer(c);case 10:S("Metadata Sub-Blocks functionId=0x".concat(a.functionId.toString(16),", id.largeBlock=").concat(a.largeBlock,",data-size=").concat(c.length)),t.t0=a.functionId,t.next=0===t.t0?14:14===t.t0?15:36===t.t0?23:38===t.t0?25:47===t.t0?27:29;break;case 14:return t.abrupt("break",31);case 15:if(S("ID_DSD_BLOCK"),u=1<<c.readUInt8(0),s=r.flags.samplingRate*u*8,r.flags.isDSD){t.next=20;break}throw new Error("Only expect DSD block if DSD-flag is set");case 20:return this.metadata.setFormat("sampleRate",s),this.metadata.setFormat("duration",r.totalSamples/s),t.abrupt("break",31);case 23:return S("ID_ALT_TRAILER: trailer for non-wav files"),t.abrupt("break",31);case 25:return this.metadata.setFormat("audioMD5",c),t.abrupt("break",31);case 27:return S("ID_BLOCK_CHECKSUM: checksum=".concat(c.toString("hex"))),t.abrupt("break",31);case 29:return S("Ignore unsupported meta-sub-block-id functionId=0x".concat(a.functionId.toString(16))),t.abrupt("break",31);case 31:o-=x.WavPack.MetadataIdToken.len+(a.largeBlock?b.UINT24_LE.len:b.UINT8.len)+2*i,S("remainingLength=".concat(o)),a.isOddSize&&this.tokenizer.ignore(1),t.next=0;break;case 36:if(0===o){t.next=38;break}throw new Error("metadata-sub-block should fit it remaining length");case 38:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}]),o}();exports.WavPackParser=O;
},{"token-types":"rOYN","../apev2/APEv2Parser":"IhDz","../common/FourCC":"P2sd","../common/BasicParser":"O0hF","./WavPackToken":"aBWN","debug":"jD9Y","buffer":"qcot"}],"kASw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormatChunk=exports.ChannelType=exports.DsdChunk=exports.ChunkHeader=void 0;var e,n=require("token-types"),t=require("../common/FourCC");exports.ChunkHeader={len:12,get:function(e,r){return{id:t.FourCcToken.get(e,r),size:n.UINT64_LE.get(e,r+4)}}},exports.DsdChunk={len:16,get:function(e,t){return{fileSize:n.INT64_LE.get(e,t),metadataPointer:n.INT64_LE.get(e,t+8)}}},function(e){e[e.mono=1]="mono",e[e.stereo=2]="stereo",e[e.channels=3]="channels",e[e.quad=4]="quad",e[e["4 channels"]=5]="4 channels",e[e["5 channels"]=6]="5 channels",e[e["5.1 channels"]=7]="5.1 channels"}(e=exports.ChannelType||(exports.ChannelType={})),exports.FormatChunk={len:40,get:function(e,t){return{formatVersion:n.INT32_LE.get(e,t),formatID:n.INT32_LE.get(e,t+4),channelType:n.INT32_LE.get(e,t+8),channelNum:n.INT32_LE.get(e,t+12),samplingFrequency:n.INT32_LE.get(e,t+16),bitsPerSample:n.INT32_LE.get(e,t+20),sampleCount:n.INT64_LE.get(e,t+24),blockSizePerChannel:n.INT32_LE.get(e,t+32)}}};
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"PXkK":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(F){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new j(n||[]);return i(a,"_invoke",{value:P(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(F){return{type:"throw",arg:F}}}r.wrap=l;var p={};function y(){}function d(){}function v(){}var m={};f(m,u,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(_([])));g&&g!==n&&o.call(g,u)&&(m=g);var w=v.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:d,configurable:!0}),d.displayName=f(v,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(k.prototype),f(k.prototype,c,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DsfParser=void 0;var v=require("debug"),m=require("../id3v2/AbstractID3Parser"),b=require("./DsfChunk"),g=require("../id3v2/ID3v2Parser"),w=(0,v.default)("music-metadata:parser:DSF"),x=function(t){s(i,m.AbstractID3Parser);var r=l(i);function i(){return o(this,i),r.apply(this,arguments)}return a(i,[{key:"postId3v2Parse",value:function(){var t=n(e().mark(function t(){var r,n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.tokenizer.position,t.next=3,this.tokenizer.readToken(b.ChunkHeader);case 3:if("DSD "===(n=t.sent).id){t.next=6;break}throw new Error("Invalid chunk signature");case 6:return this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0),t.next=10,this.tokenizer.readToken(b.DsdChunk);case 10:if((o=t.sent).metadataPointer!==BigInt(0)){t.next=15;break}w("No ID3v2 tag present"),t.next=21;break;case 15:return w("expect ID3v2 at offset=".concat(o.metadataPointer)),t.next=18,this.parseChunks(o.fileSize-n.size);case 18:return t.next=20,this.tokenizer.ignore(Number(o.metadataPointer)-this.tokenizer.position-r);case 20:return t.abrupt("return",(new g.ID3v2Parser).parse(this.metadata,this.tokenizer,this.options));case 21:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseChunks",value:function(){var t=n(e().mark(function t(r){var n,o,i;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r>=b.ChunkHeader.len)){t.next=24;break}return t.next=3,this.tokenizer.readToken(b.ChunkHeader);case 3:n=t.sent,w("Parsing chunk name=".concat(n.id," size=").concat(n.size)),t.t0=n.id,t.next="fmt "===t.t0?8:19;break;case 8:return t.next=10,this.tokenizer.readToken(b.FormatChunk);case 10:return o=t.sent,this.metadata.setFormat("numberOfChannels",o.channelNum),this.metadata.setFormat("sampleRate",o.samplingFrequency),this.metadata.setFormat("bitsPerSample",o.bitsPerSample),this.metadata.setFormat("numberOfSamples",o.sampleCount),this.metadata.setFormat("duration",Number(o.sampleCount)/o.samplingFrequency),i=o.bitsPerSample*o.samplingFrequency*o.channelNum,this.metadata.setFormat("bitrate",i),t.abrupt("return");case 19:return this.tokenizer.ignore(Number(n.size)-b.ChunkHeader.len),t.abrupt("break",21);case 21:r-=n.size,t.next=0;break;case 24:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),i}();exports.DsfParser=x;
},{"debug":"jD9Y","../id3v2/AbstractID3Parser":"Tc8M","./DsfChunk":"kASw","../id3v2/ID3v2Parser":"pIqu"}],"xY5O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkHeader64=void 0;var e=require("token-types"),r=require("../common/FourCC");exports.ChunkHeader64={len:12,get:function(t,o){return{chunkID:r.FourCcToken.get(t,o),chunkSize:e.INT64_BE.get(t,o+4)}}};
},{"token-types":"rOYN","../common/FourCC":"P2sd"}],"xpEd":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(C){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}r.wrap=f;var p={};function d(){}function m(){}function y(){}var k={};h(k,c,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(O([])));b&&b!==n&&o.call(b,c)&&(k=b);var g=y.prototype=d.prototype=Object.create(k);function w(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function x(e,r){var n;a(this,"_invoke",{value:function(a,i){function c(){return new r(function(n,c){!function n(a,i,c,u){var s=l(e[a],e,i);if("throw"!==s.type){var h=s.arg,f=h.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){h.value=t,c(h)},function(t){return n("throw",t,c,u)})}u(s.arg)}(a,i,n,c)})}return n=n?n.then(c,c):c()}})}function S(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return E()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=T(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(z,this),this.reset(!0)}function O(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,a(g,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:m,configurable:!0}),m.displayName=h(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},r.awrap=function(t){return{__await:t}},w(x.prototype),h(x.prototype,u,function(){return this}),r.AsyncIterator=x,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new x(f(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(g),h(g,s,"Generator"),h(g,c,function(){return this}),h(g,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,u,"next",t)}function u(t){r(i,o,a,c,u,"throw",t)}c(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=d();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DsdiffParser=void 0;var y=require("token-types"),k=require("debug"),v=require("strtok3/lib/core"),b=require("../common/FourCC"),g=require("../common/BasicParser"),w=require("../id3v2/ID3v2Parser"),x=require("./DsdiffToken"),S=(0,k.default)("music-metadata:parser:aiff"),T=function(t){s(a,g.BasicParser);var r=f(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"parse",value:function(){var t=n(e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(x.ChunkHeader64);case 2:if("FRM8"===(r=t.sent).chunkID){t.next=5;break}throw new Error("Unexpected chunk-ID");case 5:return t.next=7,this.tokenizer.readToken(b.FourCcToken);case 7:n=t.sent.trim(),t.t0=n,t.next="DSD"===t.t0?11:14;break;case 11:return this.metadata.setFormat("container","DSDIFF/".concat(n)),this.metadata.setFormat("lossless",!0),t.abrupt("return",this.readFmt8Chunks(r.chunkSize-BigInt(b.FourCcToken.len)));case 14:throw Error("Unsupported DSDIFF type: ".concat(n));case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readFmt8Chunks",value:function(){var t=n(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r>=x.ChunkHeader64.len)){t.next=10;break}return t.next=3,this.tokenizer.readToken(x.ChunkHeader64);case 3:return n=t.sent,S("Chunk id=".concat(n.chunkID)),t.next=7,this.readData(n);case 7:r-=BigInt(x.ChunkHeader64.len)+n.chunkSize,t.next=0;break;case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readData",value:function(){var t=n(e().mark(function t(r){var n,o,a,i,c;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:S("Reading data of chunk[ID=".concat(r.chunkID,", size=").concat(r.chunkSize,"]")),n=this.tokenizer.position,t.t0=r.chunkID.trim(),t.next="FVER"===t.t0?5:"PROP"===t.t0?10:"ID3"===t.t0?18:"DSD"===t.t0?27:25;break;case 5:return t.next=7,this.tokenizer.readToken(y.UINT32_LE);case 7:return o=t.sent,S("DSDIFF version=".concat(o)),t.abrupt("break",30);case 10:return t.next=12,this.tokenizer.readToken(b.FourCcToken);case 12:if("SND "===t.sent){t.next=15;break}throw new Error("Unexpected PROP-chunk ID");case 15:return t.next=17,this.handleSoundPropertyChunks(r.chunkSize-BigInt(b.FourCcToken.len));case 17:return t.abrupt("break",30);case 18:return t.next=20,this.tokenizer.readToken(new y.Uint8ArrayType(Number(r.chunkSize)));case 20:return a=t.sent,i=v.fromBuffer(a),t.next=24,(new w.ID3v2Parser).parse(this.metadata,i,this.options);case 24:return t.abrupt("break",30);case 25:return S("Ignore chunk[ID=".concat(r.chunkID,", size=").concat(r.chunkSize,"]")),t.abrupt("break",30);case 27:return this.metadata.setFormat("numberOfSamples",Number(r.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate),t.abrupt("break",30);case 30:if(!((c=r.chunkSize-BigInt(this.tokenizer.position-n))>0)){t.next=35;break}return S("After Parsing chunk, remaining ".concat(c," bytes")),t.next=35,this.tokenizer.ignore(Number(c));case 35:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"handleSoundPropertyChunks",value:function(){var t=n(e().mark(function t(r){var n,o,a,i,c,u,s,h,f,l,p,d,m,k;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:S("Parsing sound-property-chunks, remainingSize=".concat(r));case 1:if(!(r>0)){t.next=65;break}return t.next=4,this.tokenizer.readToken(x.ChunkHeader64);case 4:n=t.sent,S("Sound-property-chunk[ID=".concat(n.chunkID,", size=").concat(n.chunkSize,"]")),o=this.tokenizer.position,t.t0=n.chunkID.trim(),t.next="FS"===t.t0?10:"CHNL"===t.t0?15:"CMPR"===t.t0?22:"ABSS"===t.t0?34:"LSCO"===t.t0?48:(t.t0,53);break;case 10:return t.next=12,this.tokenizer.readToken(y.UINT32_BE);case 12:return a=t.sent,this.metadata.setFormat("sampleRate",a),t.abrupt("break",56);case 15:return t.next=17,this.tokenizer.readToken(y.UINT16_BE);case 17:return i=t.sent,this.metadata.setFormat("numberOfChannels",i),t.next=21,this.handleChannelChunks(n.chunkSize-BigInt(y.UINT16_BE.len));case 21:return t.abrupt("break",56);case 22:return t.next=24,this.tokenizer.readToken(b.FourCcToken);case 24:return c=t.sent.trim(),t.next=27,this.tokenizer.readToken(y.UINT8);case 27:return u=t.sent,t.next=30,this.tokenizer.readToken(new y.StringType(u,"ascii"));case 30:return s=t.sent,"DSD"===c&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec","".concat(c," (").concat(s,")")),t.abrupt("break",56);case 34:return t.next=36,this.tokenizer.readToken(y.UINT16_BE);case 36:return h=t.sent,t.next=39,this.tokenizer.readToken(y.UINT8);case 39:return f=t.sent,t.next=42,this.tokenizer.readToken(y.UINT8);case 42:return l=t.sent,t.next=45,this.tokenizer.readToken(y.UINT32_BE);case 45:return p=t.sent,S("ABSS ".concat(h,":").concat(f,":").concat(l,".").concat(p)),t.abrupt("break",56);case 48:return t.next=50,this.tokenizer.readToken(y.UINT16_BE);case 50:return d=t.sent,S("LSCO lsConfig=".concat(d)),t.abrupt("break",56);case 53:return S("Unknown sound-property-chunk[ID=".concat(n.chunkID,", size=").concat(n.chunkSize,"]")),t.next=56,this.tokenizer.ignore(Number(n.chunkSize));case 56:if(!((m=n.chunkSize-BigInt(this.tokenizer.position-o))>0)){t.next=61;break}return S("After Parsing sound-property-chunk ".concat(n.chunkSize,", remaining ").concat(m," bytes")),t.next=61,this.tokenizer.ignore(Number(m));case 61:r-=BigInt(x.ChunkHeader64.len)+n.chunkSize,S("Parsing sound-property-chunks, remainingSize=".concat(r)),t.next=1;break;case 65:this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample&&(k=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample,this.metadata.setFormat("bitrate",k));case 66:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"handleChannelChunks",value:function(){var t=n(e().mark(function t(r){var n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:S("Parsing channel-chunks, remainingSize=".concat(r)),n=[];case 2:if(!(r>=b.FourCcToken.len)){t.next=11;break}return t.next=5,this.tokenizer.readToken(b.FourCcToken);case 5:o=t.sent,S("Channel[ID=".concat(o,"]")),n.push(o),r-=BigInt(b.FourCcToken.len),t.next=2;break;case 11:return S("Channels: ".concat(n.join(", "))),t.abrupt("return",n);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),a}();exports.DsdiffParser=T;
},{"token-types":"rOYN","debug":"jD9Y","strtok3/lib/core":"tvmF","../common/FourCC":"P2sd","../common/BasicParser":"O0hF","../id3v2/ID3v2Parser":"pIqu","./DsdiffToken":"xY5O"}],"BQ2f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elements=void 0;var a=require("./types");exports.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:a.DataType.uint},17143:{name:"ebmlReadVersion",value:a.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:a.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:a.DataType.uint},17026:{name:"docType",value:a.DataType.string},17031:{name:"docTypeVersion",value:a.DataType.uint},17029:{name:"docTypeReadVersion",value:a.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:a.DataType.binary},21420:{name:"seekPosition",value:a.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:a.DataType.uid},29572:{name:"filename",value:a.DataType.string},3979555:{name:"prevUID",value:a.DataType.uid},3965867:{name:"prevFilename",value:a.DataType.string},4110627:{name:"nextUID",value:a.DataType.uid},4096955:{name:"nextFilename",value:a.DataType.string},2807729:{name:"timecodeScale",value:a.DataType.uint},17545:{name:"duration",value:a.DataType.float},17505:{name:"dateUTC",value:a.DataType.uint},31657:{name:"title",value:a.DataType.string},19840:{name:"muxingApp",value:a.DataType.string},22337:{name:"writingApp",value:a.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:a.DataType.uid},163:{name:"unknown",value:a.DataType.binary},167:{name:"position",value:a.DataType.uid},171:{name:"prevSize",value:a.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:a.DataType.uint},29637:{name:"uid",value:a.DataType.uid},131:{name:"trackType",value:a.DataType.uint},185:{name:"flagEnabled",value:a.DataType.bool},136:{name:"flagDefault",value:a.DataType.bool},21930:{name:"flagForced",value:a.DataType.bool},156:{name:"flagLacing",value:a.DataType.bool},28135:{name:"minCache",value:a.DataType.uint},28136:{name:"maxCache",value:a.DataType.uint},2352003:{name:"defaultDuration",value:a.DataType.uint},2306383:{name:"timecodeScale",value:a.DataType.float},21358:{name:"name",value:a.DataType.string},2274716:{name:"language",value:a.DataType.string},134:{name:"codecID",value:a.DataType.string},25506:{name:"codecPrivate",value:a.DataType.binary},2459272:{name:"codecName",value:a.DataType.string},3839639:{name:"codecSettings",value:a.DataType.string},3883072:{name:"codecInfoUrl",value:a.DataType.string},2536000:{name:"codecDownloadUrl",value:a.DataType.string},170:{name:"codecDecodeAll",value:a.DataType.bool},28587:{name:"trackOverlay",value:a.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:a.DataType.bool},21432:{name:"stereoMode",value:a.DataType.uint},176:{name:"pixelWidth",value:a.DataType.uint},186:{name:"pixelHeight",value:a.DataType.uint},21680:{name:"displayWidth",value:a.DataType.uint},21690:{name:"displayHeight",value:a.DataType.uint},21683:{name:"aspectRatioType",value:a.DataType.uint},3061028:{name:"colourSpace",value:a.DataType.uint},3126563:{name:"gammaValue",value:a.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:a.DataType.float},30901:{name:"outputSamplingFrequency",value:a.DataType.float},159:{name:"channels",value:a.DataType.uint},148:{name:"channels",value:a.DataType.uint},32123:{name:"channelPositions",value:a.DataType.binary},25188:{name:"bitDepth",value:a.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:a.DataType.uint},20530:{name:"scope",value:a.DataType.bool},20531:{name:"type",value:a.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:a.DataType.uint},16981:{name:"contentCompSettings",value:a.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:a.DataType.uint},18402:{name:"contentEncKeyID",value:a.DataType.binary},18403:{name:"contentSignature ",value:a.DataType.binary},18404:{name:"ContentSigKeyID  ",value:a.DataType.binary},18405:{name:"contentSigAlgo ",value:a.DataType.uint},18406:{name:"contentSigHashAlgo ",value:a.DataType.uint}}},25188:{name:"bitDepth",value:a.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:a.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:a.DataType.uint},241:{name:"clusterPosition",value:a.DataType.uint},21368:{name:"blockNumber",value:a.DataType.uint},234:{name:"codecState",value:a.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:a.DataType.uint},151:{name:"cluster",value:a.DataType.uint},21343:{name:"number",value:a.DataType.uint},235:{name:"codecState",value:a.DataType.uint}}},240:{name:"relativePosition",value:a.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:a.DataType.string},18030:{name:"name",value:a.DataType.string},18016:{name:"mimeType",value:a.DataType.string},18012:{name:"data",value:a.DataType.binary},18094:{name:"uid",value:a.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:a.DataType.uid},145:{name:"timeStart",value:a.DataType.uint},146:{name:"timeEnd",value:a.DataType.uid},152:{name:"hidden",value:a.DataType.bool},17816:{name:"enabled",value:a.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:a.DataType.uid},128:{name:"display",container:{133:{name:"string",value:a.DataType.string},17276:{name:"language ",value:a.DataType.string},17278:{name:"country ",value:a.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:a.DataType.uid},25540:{name:"tagChapterUID",value:a.DataType.uint},25542:{name:"tagAttachmentUID",value:a.DataType.uid},25546:{name:"targetType",value:a.DataType.string},26826:{name:"targetTypeValue",value:a.DataType.uint},25545:{name:"tagEditionUID",value:a.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:a.DataType.string},17543:{name:"string",value:a.DataType.string},17541:{name:"binary",value:a.DataType.binary},17530:{name:"language",value:a.DataType.string},17531:{name:"languageIETF",value:a.DataType.string},17540:{name:"default",value:a.DataType.bool}}}}}}}}}};
},{"./types":"rhWo"}],"OBQW":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(P){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),u=new j(n||[]);return o(i,"_invoke",{value:E(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=l;var h={};function d(){}function y(){}function v(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==e&&a.call(b,u)&&(m=b);var w=v.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){var n;o(this,"_invoke",{value:function(o,i){function u(){return new e(function(n,u){!function n(o,i,u,c){var s=p(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&a.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(o,i,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=T(i,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=p(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,h;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(k.prototype),f(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new k(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function a(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){a(i,n,o,u,c,"next",t)}function c(t){a(i,n,o,u,c,"throw",t)}u(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var r,n=b(t);if(e){var a=b(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatroskaParser=void 0;var w=require("token-types"),x=require("debug"),k=require("../common/BasicParser"),E=require("./types"),T=require("./MatroskaDtd"),L=(0,x.default)("music-metadata:parser:matroska"),O=function(t){h(a,k.BasicParser);var r=y(a);function a(){var t;return i(this,a),(t=r.call(this)).padding=0,t.parserMap=new Map,t.ebmlMaxIDLength=4,t.ebmlMaxSizeLength=8,t.parserMap.set(E.DataType.uint,function(e){return t.readUint(e)}),t.parserMap.set(E.DataType.string,function(e){return t.readString(e)}),t.parserMap.set(E.DataType.binary,function(e){return t.readBuffer(e)}),t.parserMap.set(E.DataType.uid,function(){var e=o(n().mark(function e(r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readUint(r);case 2:return e.t0=e.sent,e.abrupt("return",1===e.t0);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.parserMap.set(E.DataType.bool,function(e){return t.readFlag(e)}),t.parserMap.set(E.DataType.float,function(e){return t.readFloat(e)}),t}return c(a,[{key:"init",value:function(t,e,r){return l(b(a.prototype),"init",this).call(this,t,e,r),this}},{key:"parse",value:function(){var t=o(n().mark(function t(){var e,r,a,o,i,u,c=this;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.parseContainer(T.elements,this.tokenizer.fileInfo.size,[]);case 2:e=t.sent,this.metadata.setFormat("container","EBML/".concat(e.ebml.docType)),e.segment&&((r=e.segment.info)&&(a=r.timecodeScale?r.timecodeScale:1e6,"number"==typeof r.duration&&(o=r.duration*a/1e9,this.addTag("segment:title",r.title),this.metadata.setFormat("duration",o))),(i=e.segment.tracks)&&i.entries&&(i.entries.forEach(function(t){var e={codecName:t.codecID.replace("A_","").replace("V_",""),codecSettings:t.codecSettings,flagDefault:t.flagDefault,flagLacing:t.flagLacing,flagEnabled:t.flagEnabled,language:t.language,name:t.name,type:t.trackType,audio:t.audio,video:t.video};c.metadata.addStreamInfo(e)}),(u=i.entries.filter(function(t){return t.trackType===E.TrackType.audio.valueOf()}).reduce(function(t,e){return t?!t.flagDefault&&e.flagDefault?e:e.trackNumber&&e.trackNumber<t.trackNumber?e:t:e},null))&&(this.metadata.setFormat("codec",u.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",u.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",u.audio.channels)),e.segment.tags&&e.segment.tags.tag.forEach(function(t){var e=t.target,r=(null==e?void 0:e.targetTypeValue)?E.TargetType[e.targetTypeValue]:(null==e?void 0:e.targetType)?e.targetType:"track";t.simpleTags.forEach(function(t){var e=t.string?t.string:t.binary;c.addTag("".concat(r,":").concat(t.name),e)})}),e.segment.attachments&&e.segment.attachments.attachedFiles.filter(function(t){return t.mimeType.startsWith("image/")}).map(function(t){return{data:t.data,format:t.mimeType,description:t.description,name:t.name}}).forEach(function(t){c.addTag("picture",t)})));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseContainer",value:function(){var t=o(n().mark(function t(e,r,a){var o,i,u,c;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o={};case 1:if(!(this.tokenizer.position<r)){t.next=42;break}return i=void 0,t.prev=3,t.next=6,this.readElement();case 6:i=t.sent,t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(3),"End-Of-Stream"!==t.t0.message){t.next=13;break}return t.abrupt("break",42);case 13:throw t.t0;case 14:if(!(u=e[i.id])){t.next=29;break}if(L("Element: name=".concat(u.name,", container=").concat(!!u.container)),!u.container){t.next=24;break}return t.next=20,this.parseContainer(u.container,i.len>=0?this.tokenizer.position+i.len:-1,a.concat([u.name]));case 20:c=t.sent,u.multiple?(o[u.name]||(o[u.name]=[]),o[u.name].push(c)):o[u.name]=c,t.next=27;break;case 24:return t.next=26,this.parserMap.get(u.value)(i);case 26:o[u.name]=t.sent;case 27:t.next=40;break;case 29:t.t1=i.id,t.next=236===t.t1?32:36;break;case 32:return this.padding+=i.len,t.next=35,this.tokenizer.ignore(i.len);case 35:return t.abrupt("break",40);case 36:return L("parseEbml: path=".concat(a.join("/"),", unknown element: id=").concat(i.id.toString(16))),this.padding+=i.len,t.next=40,this.tokenizer.ignore(i.len);case 40:t.next=1;break;case 42:return t.abrupt("return",o);case 43:case"end":return t.stop()}},t,this,[[3,9]])}));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"readVintData",value:function(){var t=o(n().mark(function t(r){var a,o,i,u;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.peekNumber(w.UINT8);case 2:a=t.sent,o=128,i=1;case 5:if(0!=(a&o)){t.next=12;break}if(!(i>r)){t.next=8;break}throw new Error("VINT value exceeding maximum size");case 8:++i,o>>=1,t.next=5;break;case 12:return u=e.alloc(i),t.next=15,this.tokenizer.readBuffer(u);case 15:return t.abrupt("return",u);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readElement",value:function(){var t=o(n().mark(function t(){var e,r,a;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readVintData(this.ebmlMaxIDLength);case 2:return e=t.sent,t.next=5,this.readVintData(this.ebmlMaxSizeLength);case 5:return(r=t.sent)[0]^=128>>r.length-1,a=Math.min(6,r.length),t.abrupt("return",{id:e.readUIntBE(0,e.length),len:r.readUIntBE(r.length-a,a)});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isMaxValue",value:function(t){if(t.length===this.ebmlMaxSizeLength){for(var e=1;e<this.ebmlMaxSizeLength;++e)if(255!==t[e])return!1;return!0}return!1}},{key:"readFloat",value:function(){var t=o(n().mark(function t(e){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.len,t.next=0===t.t0?3:4===t.t0?4:8===t.t0?5:10===t.t0?6:7;break;case 3:return t.abrupt("return",0);case 4:return t.abrupt("return",this.tokenizer.readNumber(w.Float32_BE));case 5:case 6:return t.abrupt("return",this.tokenizer.readNumber(w.Float64_BE));case 7:throw new Error("Invalid IEEE-754 float length: ".concat(e.len));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readFlag",value:function(){var t=o(n().mark(function t(e){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readUint(e);case 2:return t.t0=t.sent,t.abrupt("return",1===t.t0);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readUint",value:function(){var t=o(n().mark(function t(e){var r,a;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readBuffer(e);case 2:return r=t.sent,a=Math.min(6,e.len),t.abrupt("return",r.readUIntBE(e.len-a,a));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readString",value:function(){var t=o(n().mark(function t(e){var r;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new w.StringType(e.len,"utf-8"));case 2:return r=t.sent,t.abrupt("return",r.replace(/\00.*$/g,""));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readBuffer",value:function(){var t=o(n().mark(function t(r){var a;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.alloc(r.len),t.next=3,this.tokenizer.readBuffer(a);case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addTag",value:function(t,e){this.metadata.addTag("matroska",t,e)}}]),a}();exports.MatroskaParser=O;
},{"token-types":"rOYN","debug":"jD9Y","../common/BasicParser":"O0hF","./types":"rhWo","./MatroskaDtd":"BQ2f","buffer":"qcot"}],"YKB1":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var e,r=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){"use strict";n=function(){return e};var e={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,r,t){e[r]=t.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{f({},"")}catch(I){f=function(e,r,t){return e[r]=t}}function p(e,r,t,n){var a=r&&r.prototype instanceof v?r:v,i=Object.create(a.prototype),s=new q(n||[]);return o(i,"_invoke",{value:k(e,t,s)}),i}function l(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(I){return{type:"throw",arg:I}}}e.wrap=p;var h={};function v(){}function m(){}function y(){}var d={};f(d,s,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(F([])));w&&w!==r&&a.call(w,s)&&(d=w);var b=y.prototype=v.prototype=Object.create(d);function x(e){["next","throw","return"].forEach(function(r){f(e,r,function(e){return this._invoke(r,e)})})}function P(e,r){var n;o(this,"_invoke",{value:function(o,i){function s(){return new r(function(n,s){!function n(o,i,s,c){var u=l(e[o],e,i);if("throw"!==u.type){var f=u.arg,p=f.value;return p&&"object"==t(p)&&a.call(p,"__await")?r.resolve(p.__await).then(function(e){n("next",e,s,c)},function(e){n("throw",e,s,c)}):r.resolve(p).then(function(e){f.value=e,s(f)},function(e){return n("throw",e,s,c)})}c(u.arg)}(o,i,n,s)})}return n=n?n.then(s,s):s()}})}function k(e,r,t){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(t.method=a,t.arg=o;;){var i=t.delegate;if(i){var s=E(i,t);if(s){if(s===h)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===n)throw n="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n="executing";var c=l(e,r,t);if("normal"===c.type){if(n=t.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(n="completed",t.method="throw",t.arg=c.arg)}}}function E(e,r){var t=r.method,n=e.iterator[t];if(void 0===n)return r.delegate=null,"throw"===t&&e.iterator.return&&(r.method="return",r.arg=void 0,E(e,r),"throw"===r.method)||"return"!==t&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+t+"' method")),h;var a=l(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function O(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function F(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,n=function r(){for(;++t<e.length;)if(a.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:m,configurable:!0}),m.displayName=f(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,f(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(P.prototype),f(P.prototype,c,function(){return this}),e.AsyncIterator=P,e.async=function(r,t,n,a,o){void 0===o&&(o=Promise);var i=new P(p(r,t,n,a),o);return e.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(b),f(b,u,"Generator"),f(b,s,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=F,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),h},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),h}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;O(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:F(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=void 0),h}},e}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(e,r,t,n,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void t(u)}s.done?r(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParserFactory=exports.parseHttpContentType=void 0;var p=require("file-type/core"),l=require("content-type"),h=require("media-typer"),v=require("debug"),m=require("./common/MetadataCollector"),y=require("./aiff/AiffParser"),d=require("./apev2/APEv2Parser"),g=require("./asf/AsfParser"),w=require("./flac/FlacParser"),b=require("./mp4/MP4Parser"),x=require("./mpeg/MpegParser"),P=require("./musepack"),k=require("./ogg/OggParser"),E=require("./wav/WaveParser"),L=require("./wavpack/WavPackParser"),O=require("./dsf/DsfParser"),q=require("./dsdiff/DsdiffParser"),F=require("./matroska/MatroskaParser"),j=(0,v.default)("music-metadata:parser:factory");function I(e){var r=l.parse(e),t=h.parse(r.type);return{type:t.type,subtype:t.subtype,suffix:t.suffix,parameters:r.parameters}}function M(e,r){return T.apply(this,arguments)}function T(){return(T=f(n().mark(function e(r,t){var a,o,i,s=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,_.loadParser(t);case 3:return o=e.sent,i=new m.MetadataCollector(a),e.next=7,o.init(i,r,a).parse();case 7:return e.abrupt("return",i.toCommonMetadata());case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}exports.parseHttpContentType=I;var _=function(){function e(){a(this,e)}return i(e,null,[{key:"parseOnContentType",value:function(){var r=f(n().mark(function r(t,a){var o,i,s,c,u;return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.fileInfo;case 2:return o=r.sent,i=o.mimeType,s=o.path,c=o.url,(u=e.getParserIdForMimeType(i)||e.getParserIdForExtension(s)||e.getParserIdForExtension(c))||j("No parser found for MIME-type / extension: "+i),r.abrupt("return",this.parse(t,u,a));case 9:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}()},{key:"parse",value:function(){var t=f(n().mark(function t(a,o,i){var s,c;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=16;break}return j("Guess parser on content..."),s=r.alloc(4100),t.next=5,a.peekBuffer(s,{mayBeLess:!0});case 5:if(a.fileInfo.path&&(o=this.getParserIdForExtension(a.fileInfo.path)),o){t.next=16;break}return t.next=9,p.fromBuffer(s);case 9:if(c=t.sent){t.next=12;break}throw new Error("Failed to determine audio format");case 12:if(j("Guessed file type is mime=".concat(c.mime,", extension=").concat(c.ext)),o=e.getParserIdForMimeType(c.mime)){t.next=16;break}throw new Error("Guessed MIME-type not supported: "+c.mime);case 16:return t.abrupt("return",M(a,o,i));case 17:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"getParserIdForExtension",value:function(e){if(e)switch(this.getExtension(e).toLocaleLowerCase()||e){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}},{key:"loadParser",value:function(){var e=f(n().mark(function e(r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="aiff"===e.t0?3:"adts"===e.t0?4:"mpeg"===e.t0?4:"apev2"===e.t0?5:"asf"===e.t0?6:"dsf"===e.t0?7:"dsdiff"===e.t0?8:"flac"===e.t0?9:"mp4"===e.t0?10:"musepack"===e.t0?11:"ogg"===e.t0?12:"riff"===e.t0?13:"wavpack"===e.t0?14:"matroska"===e.t0?15:16;break;case 3:return e.abrupt("return",new y.AIFFParser);case 4:return e.abrupt("return",new x.MpegParser);case 5:return e.abrupt("return",new d.APEv2Parser);case 6:return e.abrupt("return",new g.AsfParser);case 7:return e.abrupt("return",new O.DsfParser);case 8:return e.abrupt("return",new q.DsdiffParser);case 9:return e.abrupt("return",new w.FlacParser);case 10:return e.abrupt("return",new b.MP4Parser);case 11:return e.abrupt("return",new P.default);case 12:return e.abrupt("return",new k.OggParser);case 13:return e.abrupt("return",new E.WaveParser);case 14:return e.abrupt("return",new L.WavPackParser);case 15:return e.abrupt("return",new F.MatroskaParser);case 16:throw new Error("Unknown parser type: ".concat(r));case 17:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},{key:"getExtension",value:function(e){var r=e.lastIndexOf(".");return-1===r?"":e.slice(r)}},{key:"getParserIdForMimeType",value:function(e){var r;try{r=I(e)}catch(n){return void j("Invalid HTTP Content-Type header value: ".concat(e))}var t=0===r.subtype.indexOf("x-")?r.subtype.substring(2):r.subtype;switch(r.type){case"audio":switch(t){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(t){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(t){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}}}}]),e}();exports.ParserFactory=_;
},{"file-type/core":"mKqu","content-type":"UNrW","media-typer":"atBn","debug":"jD9Y","./common/MetadataCollector":"Xpa0","./aiff/AiffParser":"C2dR","./apev2/APEv2Parser":"IhDz","./asf/AsfParser":"EvYH","./flac/FlacParser":"lnZi","./mp4/MP4Parser":"eyoP","./mpeg/MpegParser":"SJRM","./musepack":"dsOL","./ogg/OggParser":"fxkA","./wav/WaveParser":"PZov","./wavpack/WavPackParser":"DiCQ","./dsf/DsfParser":"PXkK","./dsdiff/DsdiffParser":"xpEd","./matroska/MatroskaParser":"OBQW","buffer":"qcot"}],"JgOH":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(N){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new S(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}e.wrap=s;var p={};function y(){}function v(){}function d(){}var m={};l(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(P([])));w&&w!==n&&o.call(w,u)&&(m=w);var b=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function L(r,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=h(r[i],r,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==t(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(s).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=j(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function _(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(L.prototype),l(L.prototype,c,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),l(b,f,"Generator"),l(b,u,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:P(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(r){var e=c(r,"string");return"symbol"===t(e)?e:String(e)}function c(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RandomUint8ArrayReader=void 0;var f=function(){function t(r){o(this,t),this.uint8Array=r,this.fileSize=r.length}return a(t,[{key:"randomRead",value:function(){var t=n(r().mark(function t(e,n,o,i){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.set(this.uint8Array.subarray(i,i+o),n),t.abrupt("return",o);case 2:case"end":return t.stop()}},t,this)}));return function(r,e,n,o){return t.apply(this,arguments)}}()}]),t}();exports.RandomUint8ArrayReader=f;
},{}],"lnbn":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,r=require("buffer").Buffer;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(G){s=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:E(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(G){return{type:"throw",arg:G}}}t.wrap=l;var p={};function y(){}function v(){}function d(){}var g={};s(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(k([])));w&&w!==r&&o.call(w,c)&&(g=w);var b=d.prototype=y.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function L(t,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var f=h(t[i],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==e(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(f.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=h(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}function _(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,_(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(l(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),s(b,f,"Generator"),s(b,c,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void e(f)}c.done?r(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var r=this,e=arguments;return new Promise(function(n,i){var a=t.apply(r,e);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}function a(t){return c.apply(this,arguments)}function c(){return(c=i(n().mark(function t(e){var o,i;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.fileSize>=143)){t.next=8;break}return o=r.alloc(15),t.next=4,e.randomRead(o,0,o.length,e.fileSize-143);case 4:if(i=o.toString("binary"),i.substr(6)!==exports.endTag2){t.next=8;break}return t.abrupt("return",parseInt(i.substr(0,6),10)+15);case 8:return t.abrupt("return",0);case 9:case"end":return t.stop()}},t)}))).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLyricsHeaderLength=exports.endTag2=void 0,exports.endTag2="LYRICS200",exports.getLyricsHeaderLength=a;
},{"buffer":"qcot"}],"PvpT":[function(require,module,exports) {
var define;
var t;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){"use strict";e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(T){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(T){return{type:"throw",arg:T}}}t.wrap=l;var p={};function y(){}function v(){}function d(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(_([])));w&&w!==n&&o.call(w,u)&&(m=w);var x=d.prototype=y.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(r){f(t,r,function(t){return this._invoke(r,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return A()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=S(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function S(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,S(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=f(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(L.prototype),f(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(l(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(x),f(x,s,"Generator"),f(x,u,function(){return this}),f(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:_(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=o(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw a}}}}function o(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void e(s)}u.done?r(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function u(t){a(i,n,o,u,c,"next",t)}function c(t){a(i,n,o,u,c,"throw",t)}u(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.scanAppendingHeaders=exports.selectCover=exports.ratingToStars=exports.orderTags=exports.parseFromTokenizer=exports.parseBuffer=exports.parseStream=void 0;var c=require("strtok3/lib/core"),s=require("./ParserFactory"),f=require("./common/RandomUint8ArrayReader"),l=require("./apev2/APEv2Parser"),h=require("./id3v1/ID3v1Parser"),p=require("./lyrics3/Lyrics3");function y(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(c.fromStream(t,"string"==typeof r?{mimeType:r}:r),e)}function v(t,r){return d.apply(this,arguments)}function d(){return(d=u(e().mark(function t(r,n){var o,i,a,u=arguments;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>2&&void 0!==u[2]?u[2]:{},i=new f.RandomUint8ArrayReader(r),t.next=4,b(i,o);case 4:return a=c.fromBuffer(r,"string"==typeof n?{mimeType:n}:n),t.abrupt("return",m(a,o));case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function m(t,r){return s.ParserFactory.parseOnContentType(t,r)}function g(t){var r,e={},o=n(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;(e[i.id]=e[i.id]||[]).push(i.value)}}catch(a){o.e(a)}finally{o.f()}return e}function w(t){return void 0===t?0:1+Math.round(4*t)}function x(t){return t?t.reduce(function(t,r){return r.name&&r.name.toLowerCase()in["front","cover","cover (front)"]?r:t}):null}function b(t){return L.apply(this,arguments)}function L(){return(L=u(e().mark(function t(r){var n,o,i,a=arguments;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},o=r.fileSize,t.next=4,(0,h.hasID3v1Header)(r);case 4:if(!t.sent){t.next=10;break}return o-=128,t.next=8,(0,p.getLyricsHeaderLength)(r);case 8:i=t.sent,o-=i;case 10:return t.next=12,l.APEv2Parser.findApeFooterOffset(r,o);case 12:n.apeHeader=t.sent;case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.parseStream=y,exports.parseBuffer=v,exports.parseFromTokenizer=m,exports.orderTags=g,exports.ratingToStars=w,exports.selectCover=x,exports.scanAppendingHeaders=b;
},{"strtok3/lib/core":"tvmF","./ParserFactory":"YKB1","./common/RandomUint8ArrayReader":"JgOH","./apev2/APEv2Parser":"IhDz","./id3v1/ID3v1Parser":"WTnS","./lyrics3/Lyrics3":"lnbn"}],"qbWF":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s,c;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),(o=f(e))>0&&c.length>o&&!c.warned){c.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=c.length,r(v)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=v.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&L(e,i,{once:!0})})}function L(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var c=f.length,v=h(f,c);for(r=0;r<c;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"na3P":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"qbWF"}],"FWam":[function(require,module,exports) {

},{}],"kpD3":[function(require,module,exports) {

"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function r(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function h(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(e){var n=o(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var u=require("buffer"),s=u.Buffer,c=require("util"),f=c.inspect,d=f&&f.custom||"inspect";function y(t,e,n){s.prototype.copy.call(t,e,n)}module.exports=function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return h(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e=s.allocUnsafe(t>>>0),n=this.head,r=0;n;)y(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,a=t>i.length?i.length:t;if(a===i.length?r+=i:r+=i.slice(0,t),0===(t-=a)){a===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,a=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,a),0===(t-=a)){a===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(a));break}++r}return this.length-=r,e}},{key:d,value:function(t,e){return f(this,n(n({},e),{},{depth:0,customInspect:!1}))}}]),t}();
},{"buffer":"qcot","util":"FWam"}],"HhnD":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(e,r){var d=this,l=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return l||o?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(s,this,e)):t.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?d._writableState?d._writableState.errorEmitted?t.nextTick(i,d):(d._writableState.errorEmitted=!0,t.nextTick(a,d,e)):t.nextTick(a,d,e):r?(t.nextTick(i,d),r(e)):t.nextTick(i,d)}),this)}function a(t,e){s(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}function d(t,e){var a=t._readableState,i=t._writableState;a&&a.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}module.exports={destroy:e,undestroy:r,errorOrDestroy:d};
},{"process":"lwAM"}],"OlHr":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var e={};function o(t,o,r){r||(r=Error);var c=function(t){function e(n,e,r){return t.call(this,function(t,n,e){return"string"==typeof o?o:o(t,n,e)}(n,e,r))||this}return n(e,t),e}(r);c.prototype.name=r.name,c.prototype.code=t,e[t]=c}function r(t,n){if(Array.isArray(t)){var e=t.length;return t=t.map(function(t){return String(t)}),e>2?"one of ".concat(n," ").concat(t.slice(0,e-1).join(", "),", or ")+t[e-1]:2===e?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}return"of ".concat(n," ").concat(String(t))}function c(t,n,e){return t.substr(!e||e<0?0:+e,n.length)===n}function a(t,n,e){return(void 0===e||e>t.length)&&(e=t.length),t.substring(e-n.length,e)===n}function u(t,n,e){return"number"!=typeof e&&(e=0),!(e+n.length>t.length)&&-1!==t.indexOf(n,e)}o("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(n,e,o){var i,E;if("string"==typeof e&&c(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",a(n," argument"))E="The ".concat(n," ").concat(i," ").concat(r(e,"type"));else{var f=u(n,".")?"property":"argument";E='The "'.concat(n,'" ').concat(f," ").concat(i," ").concat(r(e,"type"))}return E+=". Received type ".concat(t(o))},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=e;
},{}],"B26a":[function(require,module,exports) {
"use strict";var r=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function e(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function t(t,i,o,a){var n=e(i,a,o);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new r(a?o:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}module.exports={getHighWaterMark:t};
},{"../../../errors":"OlHr"}],"oxwV":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"hQaz":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"uwTl":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){G(t,e)}}module.exports=x,x.WritableState=m;var o={deprecate:require("util-deprecate")},s=require("./internal/streams/stream"),f=require("buffer").Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function a(e){return f.from(e)}function c(e){return f.isBuffer(e)||e instanceof u}var l,d=require("./internal/streams/destroy"),h=require("./internal/streams/state"),b=h.getHighWaterMark,p=require("../errors").codes,w=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,k=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING,q=d.errorOrDestroy;function v(){}function m(t,n,i){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof e),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){O(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function x(t){var n=this instanceof(e=e||require("./_stream_duplex"));if(!n&&!l.call(x,this))return new x(t);this._writableState=new m(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function M(e,t){var i=new E;q(e,i),n.nextTick(t,i)}function B(e,t,i,r){var o;return null===i?o=new k:"string"==typeof i||t.objectMode||(o=new w("chunk",["string","Buffer"],i)),!o||(q(e,o),n.nextTick(r,o),!1)}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}function D(e,t,n,i,r,o){if(!n){var s=T(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var f=t.objectMode?1:i.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,f,i,r,o);return u}function P(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function j(e,t,i,r,o){--t.pendingcb,i?(n.nextTick(o,r),n.nextTick(U,e,t),e._writableState.errorEmitted=!0,q(e,r)):(o(r),e._writableState.errorEmitted=!0,q(e,r),U(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function O(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new g;if(C(i),t)j(e,i,r,t,o);else{var s=I(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||N(e,i),r?n.nextTick(A,e,i,s,o):A(e,i,s,o)}}function A(e,t,n,i){n||L(e,t),t.pendingcb--,i(),U(e,t)}function L(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(P(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function W(e,t){e._final(function(n){t.pendingcb--,n&&q(e,n),t.prefinished=!0,e.emit("prefinish"),U(e,t)})}function F(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(W,e,t)))}function U(e,t){var n=I(t);if(n&&(F(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}function H(e,t,i){t.ending=!0,U(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function G(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}require("inherits")(x,s),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===x&&(e&&e._writableState instanceof m)}})):l=function(e){return e instanceof this},x.prototype.pipe=function(){q(this,new _)},x.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&c(e);return o&&!f.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ending?M(this,n):(o||B(this,i,e,n))&&(i.pendingcb++,r=D(this,i,o,e,t,n)),r},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||H(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=d.destroy,x.prototype._undestroy=d.undestroy,x.prototype._destroy=function(e,t){t(e)};
},{"util-deprecate":"hQaz","./internal/streams/stream":"na3P","buffer":"qcot","./internal/streams/destroy":"HhnD","./internal/streams/state":"B26a","../errors":"OlHr","inherits":"oxwV","./_stream_duplex":"E89P","process":"lwAM"}],"E89P":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("./_stream_readable"),a=require("./_stream_writable");require("inherits")(l,r);for(var i=t(a.prototype),n=0;n<i.length;n++){var o=i[n];l.prototype[o]||(l.prototype[o]=a.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||e.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});
},{"./_stream_readable":"LuJf","./_stream_writable":"uwTl","inherits":"oxwV","process":"lwAM"}],"gIYa":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function o(r,e){for(var o in r)e[o]=r[o]}function n(r,o,n){return e(r,o,n)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(o(r,exports),exports.Buffer=n),n.prototype=Object.create(e.prototype),o(e,n),n.from=function(r,o,n){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,o,n)},n.alloc=function(r,o,n){if("number"!=typeof r)throw new TypeError("Argument must be a number");var t=e(r);return void 0!==o?"string"==typeof n?t.fill(o,n):t.fill(o):t.fill(0),t},n.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"qcot"}],"ikue":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"gIYa"}],"ZlsT":[function(require,module,exports) {
"use strict";var e=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function t(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function o(i,a,l){if("function"==typeof a)return o(i,null,a);a||(a={}),l=r(l||t);var s=a.readable||!1!==a.readable&&i.readable,c=a.writable||!1!==a.writable&&i.writable,u=function(){i.writable||d()},f=i._writableState&&i._writableState.finished,d=function(){c=!1,f=!0,s||l.call(i)},b=i._readableState&&i._readableState.endEmitted,v=function(){s=!1,b=!0,c||l.call(i)},m=function(e){l.call(i,e)},w=function(){var r;return s&&!b?(i._readableState&&i._readableState.ended||(r=new e),l.call(i,r)):c&&!f?(i._writableState&&i._writableState.ended||(r=new e),l.call(i,r)):void 0},_=function(){i.req.on("finish",d)};return n(i)?(i.on("complete",d),i.on("abort",w),i.req?_():i.on("request",_)):c&&!i._writableState&&(i.on("end",u),i.on("close",u)),i.on("end",v),i.on("finish",d),!1!==a.error&&i.on("error",m),i.on("close",w),function(){i.removeListener("complete",d),i.removeListener("abort",w),i.removeListener("request",_),i.req&&i.req.removeListener("finish",d),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",d),i.removeListener("end",v),i.removeListener("error",m),i.removeListener("close",w)}}module.exports=o;
},{"../../../errors":"OlHr"}],"XVOa":[function(require,module,exports) {
var process = require("process");
var e,t=require("process");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!==r(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var i=require("./end-of-stream"),u=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),s=Symbol("ended"),c=Symbol("lastPromise"),v=Symbol("handlePromise"),m=Symbol("stream");function b(e,t){return{value:e,done:t}}function y(e){var t=e[u];if(null!==t){var r=e[m].read();null!==r&&(e[c]=null,e[u]=null,e[a]=null,t(b(r,!1)))}}function d(e){t.nextTick(y,e)}function S(e,t){return function(r,n){e.then(function(){t[s]?r(b(void 0,!0)):t[v](r,n)},n)}}var h=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((n(e={get stream(){return this[m]},next:function(){var e=this,r=this[f];if(null!==r)return Promise.reject(r);if(this[s])return Promise.resolve(b(void 0,!0));if(this[m].destroyed)return new Promise(function(r,n){t.nextTick(function(){e[f]?n(e[f]):r(b(void 0,!0))})});var n,l=this[c];if(l)n=new Promise(S(l,this));else{var o=this[m].read();if(null!==o)return Promise.resolve(b(o,!1));n=new Promise(this[v])}return this[c]=n,n}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,r){e[m].destroy(null,function(e){e?r(e):t(b(void 0,!0))})})}),e),h),p=function(e){var t,r=Object.create(P,(n(t={},m,{value:e,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,f,{value:null,writable:!0}),n(t,s,{value:e._readableState.endEmitted,writable:!0}),n(t,v,{value:function(e,t){var n=r[m].read();n?(r[c]=null,r[u]=null,r[a]=null,e(b(n,!1))):(r[u]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[u]=null,r[a]=null,t(e)),void(r[f]=e)}var n=r[u];null!==n&&(r[c]=null,r[u]=null,r[a]=null,n(b(void 0,!0))),r[s]=!0}),e.on("readable",d.bind(null,r)),r};module.exports=p;
},{"./end-of-stream":"ZlsT","process":"lwAM"}],"vMkT":[function(require,module,exports) {
module.exports=function(){throw new Error("Readable.from is not available in the browser")};
},{}],"LuJf":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");module.exports=j,j.ReadableState=L;var r=require("events").EventEmitter,i=function(e,t){return e.listeners(t).length},a=require("./internal/streams/stream"),d=require("buffer").Buffer,o=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function s(e){return d.from(e)}function l(e){return d.isBuffer(e)||e instanceof o}var u,h=require("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p,c,b=require("./internal/streams/buffer_list"),g=require("./internal/streams/destroy"),m=require("./internal/streams/state"),y=m.getHighWaterMark,_=require("../errors").codes,v=_.ERR_INVALID_ARG_TYPE,w=_.ERR_STREAM_PUSH_AFTER_EOF,S=_.ERR_METHOD_NOT_IMPLEMENTED,R=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;require("inherits")(j,a);var M=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function L(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=require("string_decoder/").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function j(t){if(e=e||require("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof e;this._readableState=new L(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function D(e,t,n,r,i){u("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,A(e,o);else if(i||(a=T(o,t)),a)M(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=s(t)),r)o.endEmitted?M(e,new R):C(e,o,t,!0);else if(o.ended)M(e,new w);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?C(e,o,t,!1):U(e,o)):C(e,o,t,!1)}else r||(o.reading=!1,U(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),U(e,t)}function T(e,t){var n;return l(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},j.prototype.unshift=function(e){return D(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){f||(f=require("string_decoder/").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var q=1073741824;function W(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=W(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function U(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function H(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,G(e))}}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function F(e){u("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(J,t,e))}function J(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}j.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){M(this,new S("_read()"))},j.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",c),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}a.endEmitted?n.nextTick(d):r.once("end",d),e.on("unpipe",o);var l=H(r);e.on("drain",l);var h=!1;function f(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==K(a.pipes,e))&&!h&&(u("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function p(t){u("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&M(e,t)}function c(){e.removeListener("finish",b),g()}function b(){u("onfinish"),e.removeListener("close",c),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",f),k(e,"error",p),e.once("close",c),e.once("finish",b),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=K(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},j.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(F,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},j.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,B(this,e)),e.paused=!1,this},j.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=require("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=Y,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(j.from=function(e,t){return void 0===c&&(c=require("./internal/streams/from")),c(j,e,t)});
},{"events":"qbWF","./internal/streams/stream":"na3P","buffer":"qcot","util":"FWam","./internal/streams/buffer_list":"kpD3","./internal/streams/destroy":"HhnD","./internal/streams/state":"B26a","../errors":"OlHr","inherits":"oxwV","./_stream_duplex":"E89P","string_decoder/":"ikue","./internal/streams/async_iterator":"XVOa","./internal/streams/from":"vMkT","process":"lwAM"}],"OIPK":[function(require,module,exports) {
"use strict";module.exports=o;var t=require("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,e=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require("./_stream_duplex");function s(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new e);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(r,e){f(t,r,e)})}function f(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new i;if(t._transformState.transforming)throw new n;return t.push(null)}require("inherits")(o,a),o.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},o.prototype._transform=function(t,e,n){n(new r("_transform()"))},o.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},o.prototype._destroy=function(t,r){a.prototype._destroy.call(this,t,function(t){r(t)})};
},{"../errors":"OlHr","./_stream_duplex":"E89P","inherits":"oxwV"}],"O05x":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform");function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}require("inherits")(t,r),t.prototype._transform=function(r,t,e){e(null,r)};
},{"./_stream_transform":"OIPK","inherits":"oxwV"}],"XJDm":[function(require,module,exports) {
"use strict";var r;function n(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var t=require("../../../errors").codes,e=t.ERR_MISSING_ARGS,o=t.ERR_STREAM_DESTROYED;function i(r){if(r)throw r}function u(r){return r.setHeader&&"function"==typeof r.abort}function f(t,e,i,f){f=n(f);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=require("./end-of-stream")),r(t,{readable:e,writable:i},function(r){if(r)return f(r);a=!0,f()});var c=!1;return function(r){if(!a&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void f(r||new o("pipe"))}}function a(r){r()}function c(r,n){return r.pipe(n)}function p(r){return r.length?"function"!=typeof r[r.length-1]?i:r.pop():i}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var o,i=p(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new e("streams");var u=n.map(function(r,t){var e=t<n.length-1;return f(r,e,t>0,function(r){o||(o=r),r&&u.forEach(a),e||(u.forEach(a),i(o))})});return n.reduce(c)}module.exports=s;
},{"../../../errors":"OlHr","./end-of-stream":"ZlsT"}],"tQE2":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");
},{"./lib/_stream_readable.js":"LuJf","./lib/_stream_writable.js":"uwTl","./lib/_stream_duplex.js":"E89P","./lib/_stream_transform.js":"OIPK","./lib/_stream_passthrough.js":"O05x","./lib/internal/streams/end-of-stream.js":"ZlsT","./lib/internal/streams/pipeline.js":"XJDm"}],"B0l7":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(S){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:L(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}r.wrap=l;var p={};function y(){}function d(){}function v(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(R([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=v.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function O(e,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(e[i],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=j(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function R(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:d,configurable:!0}),d.displayName=f(v,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(O.prototype),f(O.prototype,c,function(){return this}),r.AsyncIterator=O,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,u,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:R(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadableWebToNodeStream=void 0;var v=require("readable-stream"),m=function(t){s(i,v.Readable);var r=l(i);function i(t){var e;return o(this,i),(e=r.call(this)).bytesRead=0,e.released=!1,e.reader=t.getReader(),e}return a(i,[{key:"_read",value:function(){var t=n(e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.released){t.next=3;break}return this.push(null),t.abrupt("return");case 3:return this.pendingRead=this.reader.read(),t.next=6,this.pendingRead;case 6:r=t.sent,delete this.pendingRead,r.done||this.released?this.push(null):(this.bytesRead+=r.value.length,this.push(r.value));case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"waitForReadToComplete",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pendingRead){t.next=3;break}return t.next=3,this.pendingRead;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.syncAndRelease();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"syncAndRelease",value:function(){var t=n(e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.released=!0,t.next=3,this.waitForReadToComplete();case 3:return t.next=5,this.reader.releaseLock();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),i}();exports.ReadableWebToNodeStream=m;
},{"readable-stream":"tQE2"}],"OmPf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFromUrl=exports.parseBlob=exports.parseReadableStream=exports.parseNodeStream=exports.selectCover=exports.ratingToStars=exports.orderTags=exports.parseFromTokenizer=exports.parseBuffer=void 0;const e=require("debug"),r=require("music-metadata/lib/core"),t=require("readable-web-to-node-stream"),a=e("music-metadata-browser:main");var o=require("music-metadata/lib/core");async function s(e,r,a){const o=new t.ReadableWebToNodeStream(e),s=await(0,exports.parseNodeStream)(o,"string"==typeof r?{mimeType:r}:r,a);return await o.close(),s}async function n(e,r){const t={mimeType:e.type,size:e.size};return e instanceof File&&(t.path=e.name),s(e.stream?e.stream():i(e),{mimeType:e.type,size:e.size},r)}function i(e){const r=new FileReader;return new ReadableStream({start(t){r.onloadend=(e=>{let r=e.target.result;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),t.enqueue(r),t.close()}),r.onerror=(e=>{t.close()}),r.onabort=(e=>{t.close()}),r.readAsArrayBuffer(e)}})}async function p(e,r){const t=await fetch(e),o={size:parseInt(t.headers.get("Content-Length"),10),mimeType:t.headers.get("Content-Type")};if(t.ok){if(t.body){const e=await s(t.body,o,r);return a("Closing HTTP-readable-stream..."),t.body.locked||await t.body.cancel(),a("HTTP-readable-stream closed."),e}return n(await t.blob(),r)}throw new Error(`HTTP error status=${t.status}: ${t.statusText}`)}Object.defineProperty(exports,"parseBuffer",{enumerable:!0,get:function(){return o.parseBuffer}}),Object.defineProperty(exports,"parseFromTokenizer",{enumerable:!0,get:function(){return o.parseFromTokenizer}}),Object.defineProperty(exports,"orderTags",{enumerable:!0,get:function(){return o.orderTags}}),Object.defineProperty(exports,"ratingToStars",{enumerable:!0,get:function(){return o.ratingToStars}}),Object.defineProperty(exports,"selectCover",{enumerable:!0,get:function(){return o.selectCover}}),exports.parseNodeStream=r.parseStream,exports.parseReadableStream=s,exports.parseBlob=n,exports.fetchFromUrl=p;
},{"debug":"jD9Y","music-metadata/lib/core":"PvpT","readable-web-to-node-stream":"B0l7"}],"fmDi":[function(require,module,exports) {
exports.endianness=function(){return"LE"},exports.hostname=function(){return"undefined"!=typeof location?location.hostname:""},exports.loadavg=function(){return[]},exports.uptime=function(){return 0},exports.freemem=function(){return Number.MAX_VALUE},exports.totalmem=function(){return Number.MAX_VALUE},exports.cpus=function(){return[]},exports.type=function(){return"Browser"},exports.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},exports.networkInterfaces=exports.getNetworkInterfaces=function(){return{}},exports.arch=function(){return"javascript"},exports.platform=function(){return"browser"},exports.tmpdir=exports.tmpDir=function(){return"/tmp"},exports.EOL="\n",exports.homedir=function(){return"/"};
},{}],"GxwF":[function(require,module,exports) {
const e="undefined"==typeof window?require("os").EOL:"\n";function t(e){return e.trim().slice(1,-1).split(": ")}function r(r){if("string"!=typeof r)throw new TypeError("expect first argument to be a string");let s=r.split(e);const o=/\[(\d*\:\d*\.?\d*)\]/,c=o,i=new RegExp(o.source+/(.+)/.source),u=[],p=[],l={};for(let e=0;!1===i.test(s[e]);e++)u.push(s[e]);u.reduce((e,r)=>{const[n,s]=t(r);return e[n]=s,e},l),s.splice(0,u.length);const f=new RegExp(i.source+"|"+c.source);for(let e=0,t=(s=s.filter(e=>f.test(e))).length;e<t;e++){const t=i.exec(s[e]),r=c.exec(s[e+1]);if(t&&r){const[,e,s]=t,[,o]=r;p.push({start:n(e),text:s,end:n(o)})}}return l.scripts=p,l}function n(e){e=e.split(":");const t=parseInt(e[0],10),r=parseFloat(e[1]);if(t>0){return parseFloat((60*t+r).toFixed(2))}return r}module.exports=r;
},{"os":"fmDi"}],"epB2":[function(require,module,exports) {
"use strict";var t=n(require("music-metadata-browser")),e=require("lrc-parser");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var c=i?Object.getOwnPropertyDescriptor(t,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(I){l=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(I){return{type:"throw",arg:I}}}t.wrap=s;var p={};function y(){}function d(){}function v(){}var m={};l(m,c,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(k([])));w&&w!==e&&r.call(w,c)&&(m=w);var b=v.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var i;n(this,"_invoke",{value:function(n,a){function c(){return new e(function(i,c){!function n(i,a,c,u){var f=h(t[i],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==o(s)&&r.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(s).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(f.arg)}(n,a,i,c)})}return i=i?i.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=l(v,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),l(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),l(b,f,"Generator"),l(b,c,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void r(f)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,u,"next",t)}function u(t){a(i,n,o,c,u,"throw",t)}c(void 0)})}}var u,f=document.getElementById("file"),l=document.getElementById("player"),s=document.getElementById("cover"),h=document.getElementById("lyrics");f.addEventListener("change",function(){var r=c(i().mark(function r(n){var o,a,c,f,p,y,d,v,m,g,w;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=n.target.files[0]){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,t.parseBlob(o);case 5:a=r.sent,c=a.common,f=c.picture,p=c.lyrics,y=c.artist,d=c.title,f&&f[0]&&(v=f[0],m=v.data,g=v.format,w=URL.createObjectURL(new Blob([m],{type:"image/".concat(g)})),s.src=w),document.getElementById("artist").textContent=y,document.getElementById("title").textContent=d,p&&p[0]&&(u=(0,e.parse)(p[0].text),h.textContent=u.lines.map(function(t){return t.text}).join("\n")),l.src=URL.createObjectURL(o),l.play();case 13:case"end":return r.stop()}},r)}));return function(t){return r.apply(this,arguments)}}()),l.addEventListener("timeupdate",function(){if(u){var t=u.lines.find(function(t){return t.time>1e3*l.currentTime});if(t){var e=document.getElementById("line-".concat(t.id));e&&e.scrollIntoView({behavior:"smooth"})}}});
},{"music-metadata-browser":"OmPf","lrc-parser":"GxwF"}]},{},["epB2"], null)
//# sourceMappingURL=/main.js.map